{"remainingRequest":"/home/ally/gofr2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr2/src/components/FacilityRegistry/AddService.vue?vue&type=style&index=0&id=7a00a0e3&scoped=true&lang=css&","dependencies":[{"path":"/home/ally/gofr2/src/components/FacilityRegistry/AddService.vue","mtime":1619239848044},{"path":"/home/ally/gofr2/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ally/gofr2/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/ally/gofr2/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/ally/gofr2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ally/gofr2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmZpbGUtdXBsb2FkLWZvcm0sCi5pbWFnZS1wcmV2aWV3IHsKICBmb250LWZhbWlseTogIkhlbHZldGljYSBOZXVlIiwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjsKICBwYWRkaW5nOiAyMHB4Owp9CmltZy5wcmV2aWV3IHsKICB3aWR0aDogMjAwcHg7CiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7CiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsKICBwYWRkaW5nOiA1cHg7Cn0K"},{"version":3,"sources":["AddService.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0qCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddService.vue","sourceRoot":"src/components/FacilityRegistry","sourcesContent":["<template>\n  <v-container fluid>\n    <v-card\n      class=\"pt-4 mx-auto\"\n      flat\n      max-width=\"1000\"\n    >\n      <v-card-title primary-title>\n        <b>Adding New Service</b>\n      </v-card-title>\n      <v-card-text>\n        <v-card>\n          <v-form\n            ref=\"form\"\n            class=\"pa-3 pt-4\"\n          >\n            <v-layout\n              column\n              wrap\n            >\n              <v-flex>\n                <v-layout\n                  row\n                  wrap\n                >\n                  <v-flex xs5>\n                    <v-text-field\n                      required\n                      @blur=\"$v.name.$touch()\"\n                      @change=\"$v.name.$touch()\"\n                      :error-messages=\"nameErrors\"\n                      v-model=\"name\"\n                      filled\n                      color=\"deep-purple\"\n                      label=\"Name *\"\n                    />\n                  </v-flex>\n                  <v-spacer></v-spacer>\n                  <v-flex xs5>\n                    <v-text-field\n                      required\n                      v-model=\"code\"\n                      filled\n                      color=\"deep-purple\"\n                      label=\"Code\"\n                    />\n                  </v-flex>\n                </v-layout>\n              </v-flex>\n              <v-flex>\n                <v-layout\n                  row\n                  wrap\n                >\n                  <v-flex xs5>\n                    <v-tooltip top>\n                      <template v-slot:activator=\"{ on }\">\n                        <v-select\n                          multiple\n                          multi-line\n                          item-text=\"display\"\n                          item-value=\"code\"\n                          :items=\"serviceCategoriesConcept\"\n                          v-model=\"serviceCategories\"\n                          label=\"Service Category\"\n                          v-on=\"on\"\n                        >\n                          <template v-slot:selection=\"{ item, index }\">\n                            <v-chip v-if=\"index < 2\">\n                              <span>{{ item.display }}</span>\n                            </v-chip>\n                            <span\n                              v-if=\"index === 2\"\n                              class=\"grey--text caption\"\n                            >(+{{ serviceCategories.length - 2 }} others)</span>\n                          </template>\n                        </v-select>\n                      </template>\n                      <span>Broad category of service being performed or delivered</span>\n                    </v-tooltip>\n                  </v-flex>\n                  <v-spacer></v-spacer>\n                  <v-flex xs5>\n                    <v-tooltip top>\n                      <template v-slot:activator=\"{ on }\">\n                        <v-select\n                          multiple\n                          multi-line\n                          item-text=\"display\"\n                          item-value=\"code\"\n                          :items=\"serviceTypesConcept\"\n                          v-model=\"serviceTypes\"\n                          label=\"Service Type\"\n                          v-on=\"on\"\n                        >\n                          <template v-slot:selection=\"{ item, index }\">\n                            <v-chip v-if=\"index < 2\">\n                              <span>{{ item.display }}</span>\n                            </v-chip>\n                            <span\n                              v-if=\"index === 2\"\n                              class=\"grey--text caption\"\n                            >(+{{ serviceTypes.length - 2 }} others)</span>\n                          </template>\n                        </v-select>\n                      </template>\n                      <span>Type of service that may be delivered or performed</span>\n                    </v-tooltip>\n                  </v-flex>\n                </v-layout>\n              </v-flex>\n              <v-flex>\n                <v-layout\n                  row\n                  wrap\n                >\n                  <v-flex xs5>\n                    <v-tooltip top>\n                      <template v-slot:activator=\"{ on }\">\n                        <v-select\n                          multiple\n                          multi-line\n                          item-text=\"display\"\n                          item-value=\"code\"\n                          :items=\"referralMethodsConcept\"\n                          v-model=\"referralMethods\"\n                          label=\"Referral Methods\"\n                          v-on=\"on\"\n                        >\n                          <template v-slot:selection=\"{ item, index }\">\n                            <v-chip v-if=\"index < 2\">\n                              <span>{{ item.display }}</span>\n                            </v-chip>\n                            <span\n                              v-if=\"index === 2\"\n                              class=\"grey--text caption\"\n                            >(+{{ referralMethods.length - 2 }} others)</span>\n                          </template>\n                        </v-select>\n                      </template>\n                      <span>Ways that the service accepts referrals</span>\n                    </v-tooltip>\n                  </v-flex>\n                  <v-spacer></v-spacer>\n                  <v-flex xs5>\n                    <v-tooltip top>\n                      <template v-slot:activator=\"{ on }\">\n                        <v-select\n                          multiple\n                          multi-line\n                          item-text=\"display\"\n                          item-value=\"code\"\n                          :items=\"specialtiesConcept\"\n                          v-model=\"specialties\"\n                          label=\"Specialties\"\n                          v-on=\"on\"\n                        >\n                          <template v-slot:selection=\"{ item, index }\">\n                            <v-chip v-if=\"index < 2\">\n                              <span>{{ item.display }}</span>\n                            </v-chip>\n                            <span\n                              v-if=\"index === 2\"\n                              class=\"grey--text caption\"\n                            >(+{{ specialties.length - 2 }} others)</span>\n                          </template>\n                        </v-select>\n                      </template>\n                      <span>Specialties handled by the HealthcareService</span>\n                    </v-tooltip>\n                  </v-flex>\n                </v-layout>\n              </v-flex>\n              <v-flex>\n                <v-layout\n                  row\n                  wrap\n                >\n                  <v-flex xs5>\n                    <v-tooltip top>\n                      <template v-slot:activator=\"{ on }\">\n                        <v-select\n                          multiple\n                          multi-line\n                          item-text=\"display\"\n                          item-value=\"code\"\n                          :items=\"serviceEligibilitiesConcept\"\n                          v-model=\"serviceEligibilities\"\n                          label=\"Service Eligibility\"\n                          v-on=\"on\"\n                        >\n                          <template v-slot:selection=\"{ item, index }\">\n                            <v-chip v-if=\"index < 2\">\n                              <span>{{ item.display }}</span>\n                            </v-chip>\n                            <span\n                              v-if=\"index === 2\"\n                              class=\"grey--text caption\"\n                            >(+{{ serviceEligibilities.length - 2 }} others)</span>\n                          </template>\n                        </v-select>\n                      </template>\n                      <span>Specific eligibility requirements required to use the service</span>\n                    </v-tooltip>\n                  </v-flex>\n                  <v-spacer></v-spacer>\n                  <v-flex xs5>\n                    <v-tooltip top>\n                      <template v-slot:activator=\"{ on }\">\n                        <v-select\n                          multiple\n                          multi-line\n                          item-text=\"display\"\n                          item-value=\"code\"\n                          :items=\"languagesConcept\"\n                          v-model=\"languages\"\n                          label=\"Communication Language\"\n                          v-on=\"on\"\n                        >\n                          <template v-slot:selection=\"{ item, index }\">\n                            <v-chip v-if=\"index < 2\">\n                              <span>{{ item.display }}</span>\n                            </v-chip>\n                            <span\n                              v-if=\"index === 2\"\n                              class=\"grey--text caption\"\n                            >(+{{ languages.length - 2 }} others)</span>\n                          </template>\n                        </v-select>\n                      </template>\n                      <span>The language that this service is offered in</span>\n                    </v-tooltip>\n                  </v-flex>\n                </v-layout>\n              </v-flex>\n              <v-flex>\n                <v-layout\n                  row\n                  wrap\n                >\n                  <v-flex xs5>\n                    <v-tooltip top>\n                      <template v-slot:activator=\"{ on }\">\n                        <v-select\n                          multiple\n                          multi-line\n                          item-text=\"display\"\n                          item-value=\"code\"\n                          :items=\"programsConcept\"\n                          v-model=\"programs\"\n                          label=\"Programs\"\n                          v-on=\"on\"\n                        >\n                          <template v-slot:selection=\"{ item, index }\">\n                            <v-chip v-if=\"index < 2\">\n                              <span>{{ item.display }}</span>\n                            </v-chip>\n                            <span\n                              v-if=\"index === 2\"\n                              class=\"grey--text caption\"\n                            >(+{{ programs.length - 2 }} others)</span>\n                          </template>\n                        </v-select>\n                      </template>\n                      <span>Programs that this service is applicable to</span>\n                    </v-tooltip>\n                  </v-flex>\n                  <v-spacer></v-spacer>\n                  <v-flex xs5>\n                    <v-tooltip top>\n                      <template v-slot:activator=\"{ on }\">\n                        <v-select\n                          multiple\n                          multi-line\n                          item-text=\"display\"\n                          item-value=\"code\"\n                          :items=\"serviceCharacteristicsConcept\"\n                          v-model=\"serviceCharacteristics\"\n                          label=\"Characteristics\"\n                          v-on=\"on\"\n                        >\n                          <template v-slot:selection=\"{ item, index }\">\n                            <v-chip v-if=\"index < 2\">\n                              <span>{{ item.display }}</span>\n                            </v-chip>\n                            <span\n                              v-if=\"index === 2\"\n                              class=\"grey--text caption\"\n                            >(+{{ serviceCharacteristics.length - 2 }} others)</span>\n                          </template>\n                        </v-select>\n                      </template>\n                      <span>Collection of characteristics (attributes)</span>\n                    </v-tooltip>\n                  </v-flex>\n                </v-layout>\n              </v-flex>\n              <v-flex>\n                <v-tooltip top>\n                  <template v-slot:activator=\"{ on }\">\n                    <v-select\n                      multiple\n                      multi-line\n                      item-text=\"display\"\n                      item-value=\"code\"\n                      :items=\"serviceProvisionConditionsConcept\"\n                      v-model=\"serviceProvisionConditions\"\n                      label=\"Service Provision Conditions\"\n                      v-on=\"on\"\n                    >\n                      <template v-slot:selection=\"{ item, index }\">\n                        <v-chip v-if=\"index < 2\">\n                          <span>{{ item.display }}</span>\n                        </v-chip>\n                        <span\n                          v-if=\"index === 2\"\n                          class=\"grey--text caption\"\n                        >(+{{ serviceProvisionConditions.length - 2 }} others)</span>\n                      </template>\n                    </v-select>\n                  </template>\n                  <span>Conditions under which service is available/offered</span>\n                </v-tooltip>\n              </v-flex>\n              <v-flex>\n                Facility where service is provided\n                <liquor-tree\n                  v-if=\"locationHierarchy.length > 0\"\n                  :data=\"locationHierarchy\"\n                  :filter=\"searchLocation\"\n                  :options=\"{checkbox: true}\"\n                  @node:checked=\"locationSelected\"\n                  @node:unchecked=\"locationUnSelected\"\n                  ref=\"locationHierarchyRef\"\n                >\n                  <div\n                    slot-scope=\"{ node }\"\n                    class=\"node-container\"\n                  >\n                    <div class=\"node-text\">{{ node.text }}</div>\n                  </div>\n                </liquor-tree>\n              </v-flex>\n              <v-flex>\n                <v-card>\n                  <v-card-title primary-title>\n                    Service time availability\n                  </v-card-title>\n                  <v-card-text>\n                    <div\n                      v-for='(avTime,key) in availableTime'\n                      :key=\"key\"\n                    >\n                      <v-layout\n                        column\n                        wrap\n                      >\n                        <v-flex>\n                          <v-layout\n                            row\n                            wrap\n                          >\n                            <v-flex xs5>\n                              <v-select\n                                multiple\n                                multi-line\n                                item-text=\"text\"\n                                item-value=\"value\"\n                                :items=\"days\"\n                                v-model=\"availableTime[key].mainFields.daysOfWeek\"\n                                label=\"Available days of the week\"\n                              >\n                                <template v-slot:selection=\"{ item }\">\n                                  <v-chip>\n                                    <span>{{ item.text }}</span>\n                                  </v-chip>\n                                </template>\n                              </v-select>\n                            </v-flex>\n                            <v-spacer></v-spacer>\n                            <v-flex xs5>\n                              <v-switch\n                                label=\"Always available (24 hr service)\"\n                                v-model=\"availableTime[key].mainFields.allDay\"\n                              ></v-switch>\n                            </v-flex>\n                          </v-layout>\n                        </v-flex>\n                        <v-flex v-if='!availableTime[key].mainFields.allDay'>\n                          <div style=\"color: red\">\n                            {{timeRangeErrors[key]}}\n                          </div>\n                        </v-flex>\n                        <v-flex>\n                          <v-layout\n                            row\n                            wrap\n                          >\n                            <v-flex xs5>\n                              <v-menu\n                                ref=\"timeMenuStart\"\n                                v-model=\"availableTime[key].otherFields.timeMenuStart\"\n                                :close-on-content-click=\"false\"\n                                :nudge-right=\"40\"\n                                :return-value.sync=\"availableTime[key].mainFields.availableStartTime\"\n                                transition=\"scale-transition\"\n                                offset-y\n                                max-width=\"290px\"\n                                min-width=\"290px\"\n                              >\n                                <template v-slot:activator=\"{ on }\">\n                                  <v-text-field\n                                    :disabled=\"availableTime[key].mainFields.allDay\"\n                                    v-model=\"availableTime[key].mainFields.availableStartTime\"\n                                    label=\"Available start time\"\n                                    prepend-icon=\"mdi-clock-outline\"\n                                    clearable\n                                    @click:clear=\"clearStartTime(key)\"\n                                    readonly\n                                    v-on=\"on\"\n                                  ></v-text-field>\n                                </template>\n                                <v-time-picker\n                                  v-if=\"availableTime[key].otherFields.timeMenuStart\"\n                                  v-model=\"availableTime[key].mainFields.availableStartTime\"\n                                  format=\"24hr\"\n                                  @click:minute=\"validateStartTime(key)\"\n                                ></v-time-picker>\n                              </v-menu>\n                            </v-flex>\n                            <v-spacer></v-spacer>\n                            <v-flex xs5>\n                              <v-menu\n                                ref=\"timeMenuEnd\"\n                                v-model=\"availableTime[key].otherFields.timeMenuEnd\"\n                                :close-on-content-click=\"false\"\n                                :nudge-right=\"40\"\n                                :return-value.sync=\"availableTime[key].mainFields.availableEndTime\"\n                                transition=\"scale-transition\"\n                                offset-y\n                                max-width=\"290px\"\n                                min-width=\"290px\"\n                              >\n                                <template v-slot:activator=\"{ on }\">\n                                  <v-text-field\n                                    :disabled=\"availableTime[key].mainFields.allDay\"\n                                    v-model=\"availableTime[key].mainFields.availableEndTime\"\n                                    label=\"Available end time\"\n                                    prepend-icon=\"mdi-clock-outline\"\n                                    clearable\n                                    @click:clear=\"clearEndTime(key)\"\n                                    readonly\n                                    v-on=\"on\"\n                                  ></v-text-field>\n                                </template>\n                                <v-time-picker\n                                  v-if=\"availableTime[key].otherFields.timeMenuEnd\"\n                                  v-model=\"availableTime[key].mainFields.availableEndTime\"\n                                  format=\"24hr\"\n                                  @click:minute=\"validateEndTime(key)\"\n                                ></v-time-picker>\n                              </v-menu>\n                            </v-flex>\n                          </v-layout>\n                        </v-flex>\n                      </v-layout>\n                      <v-divider></v-divider>\n                      <v-divider></v-divider>\n                    </div>\n                    <v-layout\n                      row\n                      wrap\n                    >\n                      <v-spacer></v-spacer>\n                      <v-flex xs1>\n                        <v-tooltip top>\n                          <template v-slot:activator=\"{ on }\">\n                            <v-btn\n                              class=\"mx-1\"\n                              fab\n                              dark\n                              x-small\n                              color=\"primary\"\n                              @click=\"addAvailableTime\"\n                              v-on=\"on\"\n                            >\n                              <v-icon>mdi-plus</v-icon>\n                            </v-btn>\n                          </template>\n                          <span>Add more availability for this service</span>\n                        </v-tooltip>\n                      </v-flex>\n                    </v-layout>\n                  </v-card-text>\n                </v-card>\n              </v-flex>\n              <v-divider></v-divider>\n              <v-divider></v-divider>\n              <v-flex>\n                <v-card>\n                  <v-card-title primary-title>\n                    Service un availability\n                  </v-card-title>\n                  <v-card-text>\n                    <div\n                      v-for='(notAvTime,key) in notAvailable'\n                      :key=\"key\"\n                    >\n                      <v-layout\n                        column\n                        wrap\n                      >\n                        <v-flex>\n                          <div style=\"color: red\">\n                            {{unavailabilityDescrErr[key]}}\n                          </div>\n                        </v-flex>\n                        <v-flex>\n                          <v-layout\n                            row\n                            wrap\n                          >\n                            <v-flex>\n                              <v-tooltip top>\n                                <template v-slot:activator=\"{ on }\">\n                                  <v-text-field\n                                    v-model=\"notAvailable[key].mainFields.description\"\n                                    label=\"Description\"\n                                    @input=\"validateUnavailabilityDescr(key)\"\n                                    id=\"id\"\n                                    v-on=\"on\"\n                                  ></v-text-field>\n                                </template>\n                                <span>Reason presented to the user explaining why time not available</span>\n                              </v-tooltip>\n                            </v-flex>\n                          </v-layout>\n                        </v-flex>\n                        <v-flex>\n                          <div style=\"color: red\">\n                            {{dateRangeErrors[key]}}\n                          </div>\n                        </v-flex>\n                        <v-flex>\n                          <v-layout\n                            row\n                            wrap\n                          >\n                            <v-flex xs5>\n                              <v-menu\n                                ref=\"dateMenuStart\"\n                                v-model=\"notAvailable[key].otherFields.dateMenuStart\"\n                                :return-value.sync=\"notAvailable[key].mainFields.during.startDisplay\"\n                                :close-on-content-click=\"false\"\n                                max-width=\"290\"\n                              >\n                                <template v-slot:activator=\"{ on }\">\n                                  <v-text-field\n                                    :value=\"notAvailable[key].mainFields.during.startDisplay\"\n                                    clearable\n                                    @click:clear=\"clearStartDate(key)\"\n                                    label=\"Start Date\"\n                                    readonly\n                                    v-on=\"on\"\n                                  ></v-text-field>\n                                </template>\n                                <v-date-picker\n                                  v-model=\"notAvailable[key].mainFields.during.start\"\n                                  @change=\"notAvailable[key].otherFields.dateMenuStart = false\"\n                                  @input=\"validateStartDate(key)\"\n                                ></v-date-picker>\n                              </v-menu>\n                            </v-flex>\n                            <v-spacer></v-spacer>\n                            <v-flex xs5>\n                              <v-menu\n                                ref=\"dateMenuEnd\"\n                                v-model=\"notAvailable[key].otherFields.dateMenuEnd\"\n                                :return-value.sync=\"notAvailable[key].mainFields.during.endDisplay\"\n                                :close-on-content-click=\"false\"\n                                max-width=\"290\"\n                              >\n                                <template v-slot:activator=\"{ on }\">\n                                  <v-text-field\n                                    :value=\"notAvailable[key].mainFields.during.endDisplay\"\n                                    clearable\n                                    @click:clear=\"clearEndDate(key)\"\n                                    label=\"End Date\"\n                                    readonly\n                                    v-on=\"on\"\n                                  ></v-text-field>\n                                </template>\n                                <v-date-picker\n                                  v-model=\"notAvailable[key].mainFields.during.end\"\n                                  @change=\"notAvailable[key].otherFields.dateMenuEnd = false\"\n                                  @input=\"validateEndDate(key)\"\n                                ></v-date-picker>\n                              </v-menu>\n                            </v-flex>\n                          </v-layout>\n                        </v-flex>\n                      </v-layout>\n                      <v-divider></v-divider>\n                      <v-divider></v-divider>\n                    </div>\n                    <v-layout\n                      row\n                      wrap\n                    >\n                      <v-spacer></v-spacer>\n                      <v-flex xs1>\n                        <v-tooltip top>\n                          <template v-slot:activator=\"{ on }\">\n                            <v-btn\n                              class=\"mx-1\"\n                              fab\n                              dark\n                              x-small\n                              color=\"primary\"\n                              @click=\"addUnavailableTime\"\n                              v-on=\"on\"\n                            >\n                              <v-icon>mdi-plus</v-icon>\n                            </v-btn>\n                          </template>\n                          <span>Add more service un availability</span>\n                        </v-tooltip>\n                      </v-flex>\n                    </v-layout>\n                  </v-card-text>\n                </v-card>\n              </v-flex>\n              <v-divider></v-divider>\n              <v-divider></v-divider>\n              <v-flex>\n                <v-card>\n                  <v-card-title primary-title>\n                    Contacts Informations\n                  </v-card-title>\n                  <v-card-text>\n                    <v-layout\n                      column\n                      wrap\n                    >\n                      <v-flex>\n                        <v-layout\n                          row\n                          wrap\n                        >\n                          <v-flex xs5>\n                            <v-text-field\n                              v-model=\"contact.email\"\n                              filled\n                              color=\"deep-purple\"\n                              label=\"Email\"\n                            />\n                          </v-flex>\n                          <v-spacer></v-spacer>\n                          <v-flex xs5>\n                            <v-text-field\n                              v-model=\"contact.phone\"\n                              filled\n                              color=\"deep-purple\"\n                              label=\"Phone\"\n                            />\n                          </v-flex>\n                        </v-layout>\n                      </v-flex>\n                      <v-flex>\n                        <v-layout\n                          row\n                          wrap\n                        >\n                          <v-flex xs5>\n                            <v-text-field\n                              v-model=\"contact.fax\"\n                              filled\n                              color=\"deep-purple\"\n                              label=\"Fax\"\n                            />\n                          </v-flex>\n                          <v-spacer></v-spacer>\n                          <v-flex xs5>\n                            <v-text-field\n                              v-model=\"contact.website\"\n                              filled\n                              color=\"deep-purple\"\n                              label=\"Website\"\n                            />\n                          </v-flex>\n                        </v-layout>\n                      </v-flex>\n                    </v-layout>\n                  </v-card-text>\n                </v-card>\n              </v-flex>\n              <v-divider></v-divider>\n              <v-divider></v-divider>\n              <v-divider></v-divider>\n              <v-flex>\n                <v-tooltip top>\n                  <template v-slot:activator=\"{ on }\">\n                    <v-textarea\n                      outline\n                      label=\"Comment about this service\"\n                      v-model=\"comment\"\n                      v-on=\"on\"\n                    >\n                    </v-textarea>\n                  </template>\n                  <span>Additional description and/or any specific issues not covered elsewhere</span>\n                </v-tooltip>\n              </v-flex>\n              <v-flex>\n                <v-tooltip top>\n                  <template v-slot:activator=\"{ on }\">\n                    <v-textarea\n                      outline\n                      label=\"Extra details about this service\"\n                      v-model=\"extraDetails\"\n                      v-on=\"on\"\n                    >\n                    </v-textarea>\n                  </template>\n                  <span>Extra details about the service that can't be placed in the other fields</span>\n                </v-tooltip>\n              </v-flex>\n              <v-flex>\n                <v-tooltip top>\n                  <template v-slot:activator=\"{ on }\">\n                    <label>Photo for a service</label>\n                    <input\n                      type=\"file\"\n                      @change=\"previewImage\"\n                      accept=\"image/*\"\n                      v-on=\"on\"\n                    >\n                  </template>\n                  <span>Facilitates quick identification of the service</span>\n                </v-tooltip>\n                <div\n                  class=\"image-preview\"\n                  v-if=\"imageData.length > 0\"\n                >\n                  <img\n                    class=\"preview\"\n                    :src=\"imageData\"\n                  >\n                </div>\n              </v-flex>\n              <v-flex>\n                <v-layout\n                  row\n                  wrap\n                >\n                  <v-flex xs5>\n                    <v-tooltip top>\n                      <template v-slot:activator=\"{ on }\">\n                        <v-switch\n                          label=\"Appointment Required\"\n                          v-model=\"appointmentRequired\"\n                          v-on=\"on\"\n                        ></v-switch>\n                      </template>\n                      <span>If an appointment is required for access to this service</span>\n                    </v-tooltip>\n                  </v-flex>\n                  <v-spacer></v-spacer>\n                  <v-flex xs2>\n                    <v-switch\n                      label=\"Active\"\n                      v-model=\"active\"\n                    ></v-switch>\n                  </v-flex>\n                </v-layout>\n              </v-flex>\n            </v-layout>\n          </v-form>\n          <v-card-actions>\n            <v-btn\n              text\n              @click=\"$store.state.baseRouterViewKey++\"\n            >\n              <v-icon>mdi-close</v-icon>Clear\n            </v-btn>\n            <v-spacer />\n            <v-btn\n              @click=\"addService()\"\n              :disabled=\"$v.$invalid || ((hasTimeRangeErrors || hasDateRangeErrors || hasUnAvDescrErrors) && !availableTime.allDay)\"\n              class=\"white--text\"\n              color=\"deep-purple accent-4\"\n              depressed\n            >\n              <v-icon left>mdi-plus</v-icon>Add\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-card-text>\n    </v-card>\n  </v-container>\n</template>\n<script>\nimport axios from 'axios'\nimport LiquorTree from 'liquor-tree'\nimport moment from 'moment'\nimport { required } from 'vuelidate/lib/validators'\nimport { generalMixin } from '../../mixins/generalMixin'\nexport default {\n  mixins: [generalMixin],\n  validations: {\n    name: { required }\n  },\n  data () {\n    return {\n      dateRangeErrors: [],\n      timeRangeErrors: [],\n      unavailabilityDescrErr: [],\n      name: '',\n      code: '',\n      comment: '',\n      extraDetails: '',\n      serviceTypes: [],\n      serviceCharacteristics: [],\n      serviceProvisionConditions: [],\n      programs: [],\n      languages: [],\n      serviceCategories: [],\n      specialties: [],\n      referralMethods: [],\n      serviceEligibilities: [],\n      serviceTypesConcept: [],\n      serviceCategoriesConcept: [],\n      specialtiesConcept: [],\n      referralMethodsConcept: [],\n      serviceEligibilitiesConcept: [],\n      languagesConcept: [],\n      serviceCharacteristicsConcept: [],\n      serviceProvisionConditionsConcept: [],\n      programsConcept: [],\n      locations: [],\n      contact: {\n        email: '',\n        phone: '',\n        fax: '',\n        website: ''\n      },\n      availableTime: [{\n        mainFields: {\n          daysOfWeek: [],\n          allDay: false,\n          availableStartTime: '',\n          availableEndTime: ''\n        },\n        otherFields: {\n          timeMenuStart: false,\n          timeMenuEnd: false\n        }\n      }],\n      notAvailable: [{\n        mainFields: {\n          description: '',\n          during: {\n            start: '',\n            end: '',\n            startDisplay: '',\n            endDisplay: ''\n          }\n        },\n        otherFields: {\n          dateMenuStart: false,\n          dateMenuEnd: false\n        }\n      }],\n      active: true,\n      appointmentRequired: false,\n      locationHierarchy: [],\n      searchLocation: '',\n      days: [{\n        text: 'Monday',\n        value: 'mon'\n      }, {\n        text: 'Tuesday',\n        value: 'tue'\n      }, {\n        text: 'Wednesday',\n        value: 'wed'\n      }, {\n        text: 'Thursday',\n        value: 'thu'\n      }, {\n        text: 'Friday',\n        value: 'fri'\n      }, {\n        text: 'Saturday',\n        value: 'sat'\n      }, {\n        text: 'Sunday',\n        value: 'sun'\n      }],\n      imageData: ''\n    }\n  },\n  methods: {\n    addAvailableTime () {\n      this.availableTime.push({\n        mainFields: {\n          daysOfWeek: [],\n          allDay: false,\n          availableStartTime: '',\n          availableEndTime: ''\n        },\n        otherFields: {\n          timeMenuStart: false,\n          timeMenuEnd: false\n        }\n      })\n    },\n    addUnavailableTime () {\n      this.notAvailable.push({\n        mainFields: {\n          description: '',\n          during: {\n            start: '',\n            end: '',\n            startDisplay: '',\n            endDisplay: ''\n          }\n        },\n        otherFields: {\n          dateMenuStart: false,\n          dateMenuEnd: false\n        }\n      })\n    },\n    clearEndTime (key) {\n      this.availableTime[key].mainFields.availableEndTime = ''\n      this.validateStartTime(key)\n    },\n    clearStartTime (key) {\n      this.availableTime[key].mainFields.availableStartTime = ''\n      this.validateEndTime(key)\n    },\n    clearEndDate (key) {\n      this.notAvailable[key].mainFields.during.end = ''\n      this.notAvailable[key].mainFields.during.endDisplay = ''\n      this.validateStartDate(key)\n    },\n    clearStartDate (key) {\n      this.notAvailable[key].mainFields.during.start = ''\n      this.notAvailable[key].mainFields.during.startDisplay = ''\n      this.validateEndDate(key)\n    },\n    previewImage (event) {\n      var input = event.target\n      if (input.files && input.files[0]) {\n        var reader = new FileReader()\n        reader.onload = (e) => {\n          this.imageData = e.target.result\n        }\n        reader.readAsDataURL(input.files[0])\n      }\n    },\n    locationSelected (location) {\n      if (location.data.locType === 'bu') {\n        this.locations.push(location.id)\n      }\n    },\n    locationUnSelected (location) {\n      if (this.locations.indexOf(location.id) !== -1) {\n        this.locations.splice(this.locations.indexOf(location.id), 1)\n      }\n    },\n    addService () {\n      let formData = new FormData()\n      formData.append('name', this.name)\n      formData.append('code', this.code)\n      formData.append('category', JSON.stringify(this.serviceCategories))\n      formData.append('type', JSON.stringify(this.serviceTypes))\n      formData.append('referralMethod', JSON.stringify(this.referralMethods))\n      formData.append('specialty', JSON.stringify(this.specialties))\n      formData.append('eligibility', JSON.stringify(this.serviceEligibilities))\n      formData.append('communication', JSON.stringify(this.languages))\n      formData.append('program', JSON.stringify(this.programs))\n      formData.append('characteristic', JSON.stringify(this.serviceCharacteristics))\n      formData.append('serviceProvisionCode', JSON.stringify(this.serviceProvisionConditions))\n      formData.append('location', JSON.stringify(this.locations))\n      formData.append('comment', this.comment)\n      formData.append('extraDetails', this.extraDetails)\n      formData.append('photo', this.imageData)\n      formData.append('availableTime', JSON.stringify(this.availableTime))\n      formData.append('notAvailable', JSON.stringify(this.notAvailable))\n      formData.append('telecom', JSON.stringify(this.contact))\n      formData.append('appointmentRequired', this.appointmentRequired)\n      formData.append('active', this.active)\n      axios.post('/FR/addService', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(() => {\n        this.$store.state.alert.show = true\n        this.$store.state.alert.width = '800px'\n        this.$store.state.alert.msg = 'Service added successfully!'\n        this.$store.state.alert.type = 'success'\n        // increment component key to force component reload\n        this.$store.state.baseRouterViewKey += 1\n      }).catch((err) => {\n        this.$store.state.alert.show = true\n        this.$store.state.alert.width = '800px'\n        this.$store.state.alert.msg = 'Failed to add service!'\n        this.$store.state.alert.type = 'error'\n        this.$store.state.baseRouterViewKey += 1\n        console.log(err)\n      })\n    },\n    validateEndTime (key) {\n      this.$refs.timeMenuEnd[key].save(this.availableTime[key].mainFields.availableEndTime + ':00')\n      this.timeRangeErrors.splice(key, 1, '')\n      if (!this.availableTime[key].mainFields.availableStartTime && this.availableTime[key].mainFields.availableEndTime) {\n        this.timeRangeErrors.splice(key, 1, 'Start time is missing')\n        return false\n      }\n      if (!this.availableTime[key].mainFields.availableStartTime && !this.availableTime[key].mainFields.availableEndTime) {\n        return\n      }\n      let time1 = this.availableTime[key].mainFields.availableStartTime.split(':')\n      let startTimeObject = new Date()\n      startTimeObject.setHours(time1[0], time1[1], '00')\n\n      let time2 = this.availableTime[key].mainFields.availableEndTime.split(':')\n      let endTimeObject = new Date()\n      endTimeObject.setHours(time2[0], time2[1], '00')\n      if (time2 <= time1) {\n        this.timeRangeErrors.splice(key, 1, 'End time must be after start time')\n      }\n    },\n    validateStartTime (key) {\n      this.$refs.timeMenuStart[key].save(this.availableTime[key].mainFields.availableStartTime + ':00')\n      this.timeRangeErrors.splice(key, 1, '')\n      if (!this.availableTime[key].mainFields.availableEndTime && this.availableTime[key].mainFields.availableStartTime) {\n        this.timeRangeErrors.splice(key, 1, 'End time is missing')\n        return false\n      }\n      if (!this.availableTime[key].mainFields.availableStartTime && !this.availableTime[key].mainFields.availableEndTime) {\n        return\n      }\n      let time1 = this.availableTime[key].mainFields.availableStartTime.split(':')\n      let startTimeObject = new Date()\n      startTimeObject.setHours(time1[0], time1[1], '00')\n\n      let time2 = this.availableTime[key].mainFields.availableEndTime.split(':')\n      let endTimeObject = new Date()\n      endTimeObject.setHours(time2[0], time2[1], '00')\n      if (time2 <= time1) {\n        this.timeRangeErrors.splice(key, 1, 'End time must be after start time')\n      }\n    },\n    validateStartDate (key) {\n      this.dateRangeErrors.splice(key, 1, '')\n      let date = moment(this.notAvailable[key].mainFields.during.start).format('Do MMMM YYYY')\n      this.$refs.dateMenuStart[key].save(date)\n      this.validateUnavailabilityDescr(key)\n      if (!this.notAvailable[key].mainFields.during.end && this.notAvailable[key].mainFields.during.start) {\n        this.dateRangeErrors.splice(key, 1, 'End date is missing')\n        return false\n      }\n      if (this.notAvailable[key].mainFields.during.end < this.notAvailable[key].mainFields.during.start) {\n        this.dateRangeErrors.splice(key, 1, 'End date must be after start date')\n      }\n    },\n    validateEndDate (key) {\n      this.dateRangeErrors.splice(key, 1, '')\n      let date = moment(this.notAvailable[key].mainFields.during.end).format('Do MMMM YYYY')\n      this.$refs.dateMenuEnd[key].save(date)\n      this.validateUnavailabilityDescr(key)\n      if (!this.notAvailable[key].mainFields.during.start && this.notAvailable[key].mainFields.during.end) {\n        this.dateRangeErrors.splice(key, 1, 'Start date is missing')\n        return false\n      }\n      if (this.notAvailable[key].mainFields.during.end < this.notAvailable[key].mainFields.during.start) {\n        this.dateRangeErrors.splice(key, 1, 'End date must be after start date')\n      }\n    },\n    validateUnavailabilityDescr (key) {\n      this.unavailabilityDescrErr.splice(key, 1, '')\n      if ((this.notAvailable[key].mainFields.during.start || this.notAvailable[key].mainFields.during.end) && !this.notAvailable[key].mainFields.description) {\n        return this.unavailabilityDescrErr.splice(key, 1, 'Description is missing')\n      }\n    }\n  },\n  computed: {\n    nameErrors () {\n      const errors = []\n      if (!this.$v.name.$dirty) return errors\n      !this.$v.name.required && errors.push('Name is required')\n      return errors\n    },\n    codeErrors () {\n      const errors = []\n      if (!this.$v.code.$dirty) return errors\n      !this.$v.code.required && errors.push('Code is required')\n      return errors\n    },\n    hasTimeRangeErrors () {\n      if (this.timeRangeErrors.length === 0) {\n        return false\n      }\n      for (let error of this.timeRangeErrors) {\n        if (error) {\n          return true\n        }\n      }\n      return false\n    },\n    hasDateRangeErrors () {\n      if (this.dateRangeErrors.length === 0) {\n        return false\n      }\n      for (let error of this.dateRangeErrors) {\n        if (error) {\n          return true\n        }\n      }\n      return false\n    },\n    hasUnAvDescrErrors () {\n      if (this.unavailabilityDescrErr.length === 0) {\n        return false\n      }\n      for (let error of this.unavailabilityDescrErr) {\n        if (error) {\n          return true\n        }\n      }\n      return false\n    }\n  },\n  created () {\n    this.getTree(true, true, (err, tree) => {\n      if (!err) {\n        this.locationHierarchy = tree\n      }\n    })\n    this.getCodeSystem('serviceTypes', (err, response) => {\n      if (!err) {\n        this.serviceTypesConcept = response\n      }\n    })\n    this.getCodeSystem('serviceCategories', (err, response) => {\n      if (!err) {\n        this.serviceCategoriesConcept = response\n      }\n    })\n    this.getCodeSystem('specialties', (err, response) => {\n      if (!err) {\n        this.specialtiesConcept = response\n      }\n    })\n    this.getCodeSystem('serviceEligibilities', (err, response) => {\n      if (!err) {\n        this.serviceEligibilitiesConcept = response\n      }\n    })\n    this.getCodeSystem('languages', (err, response) => {\n      if (!err) {\n        this.languagesConcept = response\n      }\n    })\n    this.getCodeSystem('referralMethods', (err, response) => {\n      if (!err) {\n        this.referralMethodsConcept = response\n      }\n    })\n    this.getCodeSystem('programs', (err, response) => {\n      if (!err) {\n        this.programsConcept = response\n      }\n    })\n    this.getCodeSystem('serviceCharacteristics', (err, response) => {\n      if (!err) {\n        this.serviceCharacteristicsConcept = response\n      }\n    })\n    this.getCodeSystem('serviceProvisionConditions', (err, response) => {\n      if (!err) {\n        this.serviceProvisionConditionsConcept = response\n      }\n    })\n  },\n  components: {\n    'liquor-tree': LiquorTree\n  }\n}\n</script>\n<style scoped>\n.file-upload-form,\n.image-preview {\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  padding: 20px;\n}\nimg.preview {\n  width: 200px;\n  background-color: white;\n  border: 1px solid #ddd;\n  padding: 5px;\n}\n</style>"]}]}