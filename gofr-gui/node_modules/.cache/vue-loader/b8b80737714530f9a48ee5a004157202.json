{"remainingRequest":"/home/ally/gofr/gofr-gui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr/gofr-gui/src/components/FacilityReconScores.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr/gofr-gui/src/components/FacilityReconScores.vue","mtime":1619257194369},{"path":"/home/ally/gofr/gofr-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/gofr-gui/node_modules/babel-loader/lib/index.js","mtime":1619257191453},{"path":"/home/ally/gofr/gofr-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/gofr-gui/node_modules/vue-loader/lib/index.js","mtime":1619257191305}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IExpcXVvclRyZWUgZnJvbSAnbGlxdW9yLXRyZWUnCmltcG9ydCB7IHNjb3Jlc01peGluIH0gZnJvbSAnLi4vbWl4aW5zL3Njb3Jlc01peGluJwppbXBvcnQgeyBnZW5lcmFsTWl4aW4gfSBmcm9tICcuLi9taXhpbnMvZ2VuZXJhbE1peGluJwppbXBvcnQgeyBldmVudEJ1cyB9IGZyb20gJy4uL21haW4nCmltcG9ydCBSZWNvbmNpbGlhdGlvbkV4cG9ydCBmcm9tICcuL1JlY29uY2lsaWF0aW9uRXhwb3J0JwoKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW3Njb3Jlc01peGluLCBnZW5lcmFsTWl4aW5dLAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgY2xpZW50SWQ6ICcnLAogICAgICBmbGFnQ29tbWVudERpYWxvZzogZmFsc2UsCiAgICAgIGZsYWdDb21tZW50OiAnJywKICAgICAgaGVscERpYWxvZzogZmFsc2UsCiAgICAgIHR5cGU6ICcnLAogICAgICBzb3VyY2UySWQ6ICcnLAogICAgICBzb3VyY2UyTmFtZTogJycsCiAgICAgIHNvcnRfYXJyb3c6ICd1cCcsCiAgICAgIHBhZ2luYXRpb246IHsgc29ydEJ5OiAnc2NvcmUnIH0sCiAgICAgIHJlY29MZXZlbDogMCwKICAgICAgc2VhcmNoVW5tYXRjaGVkU291cmNlMjogJycsCiAgICAgIHNlYXJjaFVubWF0Y2hlZFNvdXJjZTE6ICcnLAogICAgICBzZWFyY2hQb3RlbnRpYWw6ICcnLAogICAgICBzZWFyY2hNYXRjaGVkOiAnJywKICAgICAgc2VhcmNoTm90TWF0Y2hlZDogJycsCiAgICAgIHNlYXJjaElnbm9yZTogJycsCiAgICAgIHNlYXJjaEZsYWdnZWQ6ICcnLAogICAgICBwb3RlbnRpYWxNYXRjaGVzOiBbXSwKICAgICAgc2hvd0FsbFBvdGVudGlhbDogZmFsc2UsCiAgICAgIGFsZXJ0VGV4dDogJycsCiAgICAgIGFsZXJ0VGl0bGU6ICcnLAogICAgICBhbGVydDogZmFsc2UsCiAgICAgIHNhdmVQcm9ncmVzc1RpbWVkb3V0OiBmYWxzZSwKICAgICAgc291cmNlMVBhcmVudHM6IHt9LAogICAgICBzb3VyY2UxRmlsdGVyOiB7IHRleHQ6ICcnLCBsZXZlbDogJycgfSwKICAgICAgc291cmNlMVRyZWVVcGRhdGU6IDAsCiAgICAgIHNlbGVjdGVkU291cmNlMToge30sCiAgICAgIHNlbGVjdGVkU291cmNlMU5hbWU6IG51bGwsCiAgICAgIHNlbGVjdGVkU291cmNlMUlkOiBudWxsLAogICAgICBzZWxlY3RlZFNvdXJjZTFMYXQ6IG51bGwsCiAgICAgIHNlbGVjdGVkU291cmNlMUxvbmc6IG51bGwsCiAgICAgIHNlbGVjdGVkU291cmNlMVBhcmVudHM6IFtdLAogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICBkaWFsb2dXaWR0aDogJycsCiAgICAgIHNvdXJjZTFVbm1hdGNoZWRIZWFkZXJzOiBbeyB0ZXh0OiAnTG9jYXRpb24nLCB2YWx1ZTogJ25hbWUnIH1dLAogICAgICBub01hdGNoSGVhZGVyczogWwogICAgICAgIHsgdGV4dDogJ1NvdXJjZSAxIExvY2F0aW9uJywgdmFsdWU6ICdzb3VyY2UxTmFtZScgfSwKICAgICAgICB7IHRleHQ6ICdTb3VyY2UgMSBJRCcsIHZhbHVlOiAnc291cmNlMUlkJyB9LAogICAgICAgIHsgdGV4dDogJ1BhcmVudHMnLCB2YWx1ZTogJ3BhcmVudHMnIH0KICAgICAgXSwKICAgICAgZmxhZ2dlZEhlYWRlcnM6IFsKICAgICAgICB7IHRleHQ6ICdTb3VyY2UgMSBMb2NhdGlvbicsIHZhbHVlOiAnc291cmNlMU5hbWUnIH0sCiAgICAgICAgeyB0ZXh0OiAnU291cmNlIDEgSUQnLCB2YWx1ZTogJ3NvdXJjZTFJZCcgfSwKICAgICAgICB7IHRleHQ6ICdTb3VyY2UgMiBMb2NhdGlvbicsIHZhbHVlOiAnc291cmNlMk5hbWUnIH0sCiAgICAgICAgeyB0ZXh0OiAnU291cmNlIDIgSUQnLCB2YWx1ZTogJ3NvdXJjZTJJZCcgfSwKICAgICAgICB7IHRleHQ6ICdDb21tZW50JywgdmFsdWU6ICdmbGFnQ29tbWVudCcgfQogICAgICBdCiAgICB9CiAgfSwKICBmaWx0ZXJzOiB7CiAgICByZW1vdmVDb3VudHJ5IChwYXJlbnRzKSB7CiAgICAgIHZhciBwYXJlbnRzQ29weSA9IHBhcmVudHMuc2xpY2UoMCkKICAgICAgcGFyZW50c0NvcHkuc3BsaWNlKHBhcmVudHNDb3B5Lmxlbmd0aCAtIDEsIDEpCiAgICAgIHJldHVybiBwYXJlbnRzQ29weQogICAgfSwKICAgIGpvaW5QYXJlbnRzIChwYXJlbnRzKSB7CiAgICAgIHJldHVybiBwYXJlbnRzLmpvaW4oJy0+JykKICAgIH0sCiAgICBqb2luUGFyZW50c0FuZFJldmVyc2UgKHBhcmVudHMpIHsKICAgICAgcmV0dXJuIFsuLi5wYXJlbnRzXS5yZXZlcnNlKCkuam9pbignLT4nKQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlU29ydCAoY29sdW1uKSB7CiAgICAgIGlmICh0aGlzLnBhZ2luYXRpb24uc29ydEJ5ID09PSBjb2x1bW4pIHsKICAgICAgICB0aGlzLnBhZ2luYXRpb24uZGVzY2VuZGluZyA9ICF0aGlzLnBhZ2luYXRpb24uZGVzY2VuZGluZwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGFnaW5hdGlvbi5zb3J0QnkgPSBjb2x1bW4KICAgICAgICB0aGlzLnBhZ2luYXRpb24uZGVzY2VuZGluZyA9IGZhbHNlCiAgICAgIH0KICAgICAgaWYgKHRoaXMucGFnaW5hdGlvbi5kZXNjZW5kaW5nKSB7CiAgICAgICAgdGhpcy5zb3J0X2Fycm93ID0gJ21kaS1kb3duJwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc29ydF9hcnJvdyA9ICdtZGktdXAnCiAgICAgIH0KICAgIH0sCiAgICBhZGRMaXN0ZW5lciAoKSB7CiAgICAgIGNvbnN0IHNldExpc3RlbmVyID0gKCkgPT4gewogICAgICAgIGlmICh0aGlzLiRyZWZzICYmIHRoaXMuJHJlZnMuc291cmNlMVRyZWUpIHsKICAgICAgICAgIHRoaXMuJHJlZnMuc291cmNlMVRyZWUuJG9uKCdub2RlOnNlbGVjdGVkJywgbm9kZSA9PiB7CiAgICAgICAgICAgIHRoaXMuc291cmNlMUZpbHRlci50ZXh0ID0gbm9kZS5kYXRhLnRleHQKICAgICAgICAgICAgbGV0IGxldmVsID0gMQogICAgICAgICAgICB3aGlsZSAobm9kZS5wYXJlbnQpIHsKICAgICAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnQKICAgICAgICAgICAgICBsZXZlbCsrCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5zb3VyY2UxRmlsdGVyLmxldmVsID0gbGV2ZWwKICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzZXRMaXN0ZW5lcigpCiAgICAgICAgICB9LCA1MDApCiAgICAgICAgfQogICAgICB9CiAgICAgIHNldExpc3RlbmVyKCkKICAgIH0sCiAgICBsZXZlbENoYW5nZWQgKGxldmVsKSB7CiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5yZWNvTGV2ZWwgPT09IGxldmVsKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgdGhpcy4kc3RvcmUuc3RhdGUucmVjb0xldmVsID0gbGV2ZWwKICAgICAgdGhpcy5nZXRTY29yZXMoZmFsc2UpCiAgICAgIGlmICgKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5yZWNvTGV2ZWwgPT09IHRoaXMuJHN0b3JlLnN0YXRlLnRvdGFsU291cmNlMUxldmVscwogICAgICApIHsKICAgICAgICB0aGlzLmRpYWxvZ1dpZHRoID0gJzE0NDBweCcKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRpYWxvZ1dpZHRoID0gJzExOTBweCcKICAgICAgfQogICAgfSwKICAgIGdldEJ1aWxkaW5nUG90ZW50aWFsTWF0Y2hlcyAoaWQpIHsKICAgICAgdGhpcy5wb3RlbnRpYWxNYXRjaGVzID0gW10KICAgICAgbGV0IHNvdXJjZTEgPSB0aGlzLmdldFNvdXJjZTEoKQogICAgICBsZXQgc291cmNlMiA9IHRoaXMuZ2V0U291cmNlMigpCiAgICAgIGxldCByZWNvTGV2ZWwgPSB0aGlzLiRzdG9yZS5zdGF0ZS5yZWNvTGV2ZWwKICAgICAgbGV0IHRvdGFsU291cmNlMUxldmVscyA9IHRoaXMuJHN0b3JlLnN0YXRlLnRvdGFsU291cmNlMUxldmVscwogICAgICBsZXQgdG90YWxTb3VyY2UyTGV2ZWxzID0gdGhpcy4kc3RvcmUuc3RhdGUudG90YWxTb3VyY2UyTGV2ZWxzCiAgICAgIGlmICh0aGlzLmNsaWVudElkKSB7CiAgICAgICAgbGV0IGxhc3RDaGFyID0gdGhpcy5jbGllbnRJZFt0aGlzLmNsaWVudElkLmxlbmd0aCAtIDFdCiAgICAgICAgbGFzdENoYXIgPSBwYXJzZUludChsYXN0Q2hhcikKICAgICAgICBsYXN0Q2hhciArPSAxCiAgICAgICAgdGhpcy5jbGllbnRJZCArPSBsYXN0Q2hhcgogICAgICB9IGVsc2UgewogICAgICAgIGxldCBsYXN0Q2hhciA9IHRoaXMuJHN0b3JlLnN0YXRlLmNsaWVudElkW3RoaXMuJHN0b3JlLnN0YXRlLmNsaWVudElkLmxlbmd0aCAtIDFdCiAgICAgICAgbGFzdENoYXIgPSBwYXJzZUludChsYXN0Q2hhcikKICAgICAgICBsYXN0Q2hhciArPSAxCiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHRoaXMuJHN0b3JlLnN0YXRlLmNsaWVudElkICsgbGFzdENoYXIKICAgICAgfQoKICAgICAgbGV0IHNvdXJjZXNPd25lciA9IHRoaXMuZ2V0RGF0YXNvdXJjZU93bmVyKCkKICAgICAgbGV0IHVzZXJJRCA9IHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2ZVBhaXIudXNlcklELl9pZAogICAgICBsZXQgc291cmNlMU93bmVyID0gc291cmNlc093bmVyLnNvdXJjZTFPd25lcgogICAgICBsZXQgc291cmNlMk93bmVyID0gc291cmNlc093bmVyLnNvdXJjZTJPd25lcgogICAgICBsZXQgc291cmNlMUxpbWl0T3JnSWQgPSB0aGlzLmdldExpbWl0T3JnSWRPbkFjdGl2ZVBhaXIoKQogICAgICAgIC5zb3VyY2UxTGltaXRPcmdJZAogICAgICBsZXQgc291cmNlMkxpbWl0T3JnSWQgPSB0aGlzLmdldExpbWl0T3JnSWRPbkFjdGl2ZVBhaXIoKQogICAgICAgIC5zb3VyY2UyTGltaXRPcmdJZAogICAgICBsZXQgcGFyZW50Q29uc3RyYWludCA9IEpTT04uc3RyaW5naWZ5KAogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmNvbmZpZy5nZW5lcmFsQ29uZmlnLnJlY29uY2lsaWF0aW9uLnBhcmVudENvbnN0cmFpbnQKICAgICAgKQogICAgICBsZXQgcGF0aCA9IGBpZD0ke2lkfSZzb3VyY2UxPSR7c291cmNlMX0mc291cmNlMj0ke3NvdXJjZTJ9JnNvdXJjZTFPd25lcj0ke3NvdXJjZTFPd25lcn0mc291cmNlMk93bmVyPSR7c291cmNlMk93bmVyfSZzb3VyY2UxTGltaXRPcmdJZD0ke3NvdXJjZTFMaW1pdE9yZ0lkfSZzb3VyY2UyTGltaXRPcmdJZD0ke3NvdXJjZTJMaW1pdE9yZ0lkfSZ0b3RhbFNvdXJjZTFMZXZlbHM9JHt0b3RhbFNvdXJjZTFMZXZlbHN9JnRvdGFsU291cmNlMkxldmVscz0ke3RvdGFsU291cmNlMkxldmVsc31gCiAgICAgIHBhdGggKz0KICAgICAgICBgJnJlY29MZXZlbD0ke3JlY29MZXZlbH0mY2xpZW50SWQ9JHt0aGlzLmNsaWVudElkfSZ1c2VySUQ9JHt1c2VySUR9JnBhcmVudENvbnN0cmFpbnQ9YCArCiAgICAgICAgcGFyZW50Q29uc3RyYWludCArCiAgICAgICAgJyZnZXRQb3RlbnRpYWw9JyArCiAgICAgICAgdHJ1ZQogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5keW5hbWljUHJvZ3Jlc3MgPSB0cnVlCiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnByb2dyZXNzVGl0bGUgPSAnR2V0dGluZyBwb3RlbnRpYWwgbWF0Y2hlcyBmcm9tIHNlcnZlcicKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KCcvcmVjb25jaWxlLz8nICsgcGF0aCkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5keW5hbWljUHJvZ3Jlc3MgPSBmYWxzZQogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgbGV0IHNjb3JlcyA9IEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YSkucmVzcG9uc2VEYXRhLnNjb3JlUmVzdWx0cwogICAgICAgICAgICBpZiAoc2NvcmVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICBsZXQgbWF0Y2hlcyA9IHNjb3Jlc1swXQogICAgICAgICAgICAgIGNvbnN0IGV4YWN0TWF0Y2hlcyA9IG1hdGNoZXMuZXhhY3RNYXRjaAogICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhleGFjdE1hdGNoZXMpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmRpYWxvZ0Vycm9yID0gdHJ1ZQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZXJyb3JEZXNjcmlwdGlvbiA9CiAgICAgICAgICAgICAgICAgICdUaGlzIGxvY2F0aW9uIGlzIGFscmVhZHkgbWFwcGVkLCBwbGVhc2UgcmVjYWxjdWxhdGUgc2NvcmVzIHRvIGdldCBjaGFuZ2VzJwogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZXJyb3JUaXRsZSA9ICdJbmZvJwogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZXJyb3JDb2xvciA9ICdlcnJvcicKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU291cmNlMSA9IG1hdGNoZXMuc291cmNlMQogICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTb3VyY2UxTmFtZSA9IG1hdGNoZXMuc291cmNlMS5uYW1lCiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNvdXJjZTFQYXJlbnRzID0gbWF0Y2hlcy5zb3VyY2UxLnBhcmVudHMKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU291cmNlMUxhdCA9IG1hdGNoZXMuc291cmNlMS5sYXQKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU291cmNlMUxvbmcgPSBtYXRjaGVzLnNvdXJjZTEubG9uZwogICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTb3VyY2UxSWQgPSBtYXRjaGVzLnNvdXJjZTEuaWQKICAgICAgICAgICAgICBmb3IgKGxldCBzY29yZSBpbiBtYXRjaGVzLnBvdGVudGlhbE1hdGNoZXMpIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogaW4gbWF0Y2hlcy5wb3RlbnRpYWxNYXRjaGVzW3Njb3JlXSkgewogICAgICAgICAgICAgICAgICBsZXQgcG90ZW50aWFscyA9IG1hdGNoZXMucG90ZW50aWFsTWF0Y2hlc1tzY29yZV1bal0KICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoZWQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5tYXRjaGVkQ29udGVudC5maW5kKAogICAgICAgICAgICAgICAgICAgIG1hdGNoZWQgPT4gewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZWQuc291cmNlMklkID09PSBwb3RlbnRpYWxzLmlkCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgIHZhciBmbGFnZ2VkID0gdGhpcy4kc3RvcmUuc3RhdGUuZmxhZ2dlZC5maW5kKGZsYWdnZWQgPT4gewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmbGFnZ2VkLnNvdXJjZTJJZCA9PT0gcG90ZW50aWFscy5pZAogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZCkgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKGZsYWdnZWQpIHsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRoaXMucG90ZW50aWFsTWF0Y2hlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBzY29yZTogc2NvcmUsCiAgICAgICAgICAgICAgICAgICAgbmFtZTogcG90ZW50aWFscy5uYW1lLAogICAgICAgICAgICAgICAgICAgIGlkOiBwb3RlbnRpYWxzLmlkLAogICAgICAgICAgICAgICAgICAgIHNvdXJjZTJJZEhpZXJhcmNoeTogcG90ZW50aWFscy5zb3VyY2UySWRIaWVyYXJjaHksCiAgICAgICAgICAgICAgICAgICAgbGF0OiBwb3RlbnRpYWxzLmxhdCwKICAgICAgICAgICAgICAgICAgICBsb25nOiBwb3RlbnRpYWxzLmxvbmcsCiAgICAgICAgICAgICAgICAgICAgZ2VvRGlzdGFuY2U6IHBvdGVudGlhbHMuZ2VvRGlzdGFuY2UsCiAgICAgICAgICAgICAgICAgICAgcGFyZW50czogcG90ZW50aWFscy5wYXJlbnRzLAogICAgICAgICAgICAgICAgICAgIG1hcHBlZFBhcmVudE5hbWU6IHBvdGVudGlhbHMubWFwcGVkUGFyZW50TmFtZQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmRpYWxvZyA9IHRydWUKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nID0gdHJ1ZQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgIH0pCiAgICB9LAogICAgZ2V0SnVyaXNkaWN0aW9uUG90ZW50aWFsTWF0Y2hlcyAoaWQpIHsKICAgICAgdGhpcy5wb3RlbnRpYWxNYXRjaGVzID0gW10KICAgICAgdGhpcy5zaG93QWxsUG90ZW50aWFsID0gZmFsc2UKICAgICAgZm9yIChsZXQgc2NvcmVSZXN1bHQgb2YgdGhpcy4kc3RvcmUuc3RhdGUuc2NvcmVSZXN1bHRzKSB7CiAgICAgICAgaWYgKHNjb3JlUmVzdWx0LnNvdXJjZTEuaWQgPT09IGlkKSB7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkU291cmNlMSA9IHNjb3JlUmVzdWx0LnNvdXJjZTEKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTb3VyY2UxTmFtZSA9IHNjb3JlUmVzdWx0LnNvdXJjZTEubmFtZQogICAgICAgICAgdGhpcy5zZWxlY3RlZFNvdXJjZTFQYXJlbnRzID0gc2NvcmVSZXN1bHQuc291cmNlMS5wYXJlbnRzCiAgICAgICAgICB0aGlzLnNlbGVjdGVkU291cmNlMUxhdCA9IHNjb3JlUmVzdWx0LnNvdXJjZTEubGF0CiAgICAgICAgICB0aGlzLnNlbGVjdGVkU291cmNlMUxvbmcgPSBzY29yZVJlc3VsdC5zb3VyY2UxLmxvbmcKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTb3VyY2UxSWQgPSBzY29yZVJlc3VsdC5zb3VyY2UxLmlkCiAgICAgICAgICBmb3IgKGxldCBzY29yZSBpbiBzY29yZVJlc3VsdC5wb3RlbnRpYWxNYXRjaGVzKSB7CiAgICAgICAgICAgIGZvciAobGV0IGogaW4gc2NvcmVSZXN1bHQucG90ZW50aWFsTWF0Y2hlc1tzY29yZV0pIHsKICAgICAgICAgICAgICBsZXQgcG90ZW50aWFscyA9IHNjb3JlUmVzdWx0LnBvdGVudGlhbE1hdGNoZXNbc2NvcmVdW2pdCiAgICAgICAgICAgICAgdmFyIG1hdGNoZWQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5tYXRjaGVkQ29udGVudC5maW5kKG1hdGNoZWQgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZWQuc291cmNlMklkID09PSBwb3RlbnRpYWxzLmlkCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB2YXIgZmxhZ2dlZCA9IHRoaXMuJHN0b3JlLnN0YXRlLmZsYWdnZWQuZmluZChmbGFnZ2VkID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiBmbGFnZ2VkLnNvdXJjZTJJZCA9PT0gcG90ZW50aWFscy5pZAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgaWYgKG1hdGNoZWQpIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChmbGFnZ2VkKSB7CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLnBvdGVudGlhbE1hdGNoZXMucHVzaCh7CiAgICAgICAgICAgICAgICBzY29yZTogc2NvcmUsCiAgICAgICAgICAgICAgICBuYW1lOiBwb3RlbnRpYWxzLm5hbWUsCiAgICAgICAgICAgICAgICBpZDogcG90ZW50aWFscy5pZCwKICAgICAgICAgICAgICAgIHNvdXJjZTJJZEhpZXJhcmNoeTogcG90ZW50aWFscy5zb3VyY2UySWRIaWVyYXJjaHksCiAgICAgICAgICAgICAgICBsYXQ6IHBvdGVudGlhbHMubGF0LAogICAgICAgICAgICAgICAgbG9uZzogcG90ZW50aWFscy5sb25nLAogICAgICAgICAgICAgICAgZ2VvRGlzdGFuY2U6IHBvdGVudGlhbHMuZ2VvRGlzdGFuY2UsCiAgICAgICAgICAgICAgICBwYXJlbnRzOiBwb3RlbnRpYWxzLnBhcmVudHMsCiAgICAgICAgICAgICAgICBtYXBwZWRQYXJlbnROYW1lOiBwb3RlbnRpYWxzLm1hcHBlZFBhcmVudE5hbWUKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuZGlhbG9nID0gdHJ1ZQogICAgfSwKICAgIGdldFBvdGVudGlhbE1hdGNoIChpZCkgewogICAgICB0aGlzLmdldEJ1aWxkaW5nUG90ZW50aWFsTWF0Y2hlcyhpZCkKICAgIH0sCiAgICBwb3RlbnRpYWxNYXRjaENvbW1lbnQgKHBvdGVudGlhbE1hdGNoKSB7CiAgICAgIGxldCBjb21tZW50ID0gJycKICAgICAgLy8gY2hlY2sgaWYgSUQgZGlmZmVyZW50CiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5yZWNvTGV2ZWwgPT09IHRoaXMuJHN0b3JlLnN0YXRlLnRvdGFsU291cmNlMUxldmVscykgewogICAgICAgIGxldCBzb3VyY2UxSURzID0gW10KICAgICAgICBsZXQgc291cmNlMklEcyA9IFtdCiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTb3VyY2UxLnNvdXJjZTFJZEhpZXJhcmNoeSkgewogICAgICAgICAgc291cmNlMUlEcy5wdXNoKHRoaXMuc2VsZWN0ZWRTb3VyY2UxLnNvdXJjZTFJZEhpZXJhcmNoeVswXS5pZCkKICAgICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuc2VsZWN0ZWRTb3VyY2UxLnNvdXJjZTFJZEhpZXJhcmNoeVswXS5jaGlsZHJlbikgewogICAgICAgICAgICBzb3VyY2UxSURzLnB1c2goY2hpbGQuaWQpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChwb3RlbnRpYWxNYXRjaC5zb3VyY2UySWRIaWVyYXJjaHkpIHsKICAgICAgICAgIHNvdXJjZTJJRHMucHVzaChwb3RlbnRpYWxNYXRjaC5zb3VyY2UySWRIaWVyYXJjaHlbMF0uaWQpCiAgICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBwb3RlbnRpYWxNYXRjaC5zb3VyY2UySWRIaWVyYXJjaHlbMF0uY2hpbGRyZW4pIHsKICAgICAgICAgICAgc291cmNlMklEcy5wdXNoKGNoaWxkLmlkKQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbGV0IGV4aXN0ID0gc291cmNlMUlEcy5zb21lKGlkMSA9PiBzb3VyY2UySURzLmluZGV4T2YoaWQxKSA+PSAwKQogICAgICAgIGlmICghZXhpc3QpIHsKICAgICAgICAgIGlmIChjb21tZW50KSB7CiAgICAgICAgICAgIGNvbW1lbnQgKz0gJywgJwogICAgICAgICAgfQogICAgICAgICAgY29tbWVudCArPSAnSUQgZGlmZmVyJwogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gY2hlY2sgaWYgbmFtZXMgYXJlIGRpZmZlcmVudAogICAgICBpZiAocG90ZW50aWFsTWF0Y2gubmFtZS50b0xvd2VyQ2FzZSgpICE9PSB0aGlzLnNlbGVjdGVkU291cmNlMS5uYW1lLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICBpZiAoY29tbWVudCkgewogICAgICAgICAgY29tbWVudCArPSAnLCAnCiAgICAgICAgfQogICAgICAgIGNvbW1lbnQgKz0gJ05hbWVzIGRpZmZlcicKICAgICAgfQoKICAgICAgLy8gY2hlY2sgaWYgcGFyZW50cyBhcmUgZGlmZmVyZW50CiAgICAgIGNvbnN0IHNvdXJjZTJQYXJlbnQgPSBwb3RlbnRpYWxNYXRjaC5tYXBwZWRQYXJlbnROYW1lCiAgICAgIGNvbnN0IHNvdXJjZTFQYXJlbnQgPSB0aGlzLnNlbGVjdGVkU291cmNlMS5wYXJlbnRzWzBdCiAgICAgIGlmIChzb3VyY2UxUGFyZW50ICE9PSBzb3VyY2UyUGFyZW50KSB7CiAgICAgICAgaWYgKGNvbW1lbnQpIHsKICAgICAgICAgIGNvbW1lbnQgKz0gJywgJwogICAgICAgIH0KICAgICAgICBjb21tZW50ICs9ICdQYXJlbnRzIGRpZmZlcicKICAgICAgfQoKICAgICAgcmV0dXJuIGNvbW1lbnQKICAgIH0sCiAgICBtYXRjaCAodHlwZSwgc291cmNlMklkLCBzb3VyY2UyTmFtZSwgc291cmNlMklkSGllcmFyY2h5LCBtYXBwZWRQYXJlbnROYW1lKSB7CiAgICAgIHRoaXMubWF0Y2hUeXBlID0gdHlwZQogICAgICB0aGlzLnNvdXJjZTJJZCA9IHNvdXJjZTJJZAogICAgICB0aGlzLnNvdXJjZTJOYW1lID0gc291cmNlMk5hbWUKICAgICAgdGhpcy5zb3VyY2UySWRIaWVyYXJjaHkgPSBzb3VyY2UySWRIaWVyYXJjaHkKICAgICAgdGhpcy5tYXBwZWRQYXJlbnROYW1lID0gbWFwcGVkUGFyZW50TmFtZQogICAgICBpZiAoc291cmNlMklkID09PSBudWxsKSB7CiAgICAgICAgdGhpcy5hbGVydCA9IHRydWUKICAgICAgICB0aGlzLmFsZXJ0VGl0bGUgPSAnSW5mb3JtYXRpb24nCiAgICAgICAgdGhpcy5hbGVydFRleHQgPSAnU2VsZWN0IFNvdXJjZSAyIExvY2F0aW9uIHRvIG1hdGNoIGFnYWluc3QgU291cmNlIDEgTG9jYXRpb24nCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgaWYgKHR5cGUgPT09ICdmbGFnJykgewogICAgICAgIHRoaXMuZmxhZ0NvbW1lbnREaWFsb2cgPSB0cnVlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zYXZlTWF0Y2goKQogICAgICB9CiAgICB9LAogICAgc2F2ZU1hdGNoICgpIHsKICAgICAgdGhpcy5mbGFnQ29tbWVudERpYWxvZyA9IGZhbHNlCiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnByb2dyZXNzVGl0bGUgPSAnU2F2aW5nIG1hdGNoJwogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5keW5hbWljUHJvZ3Jlc3MgPSB0cnVlCiAgICAgIGxldCBzb3VyY2VzT3duZXIgPSB0aGlzLmdldERhdGFzb3VyY2VPd25lcigpCiAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnc291cmNlMUlkJywgdGhpcy5zZWxlY3RlZFNvdXJjZTFJZCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdzb3VyY2UySWQnLCB0aGlzLnNvdXJjZTJJZCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdzb3VyY2UxT3duZXInLCBzb3VyY2VzT3duZXIuc291cmNlMU93bmVyKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3NvdXJjZTJPd25lcicsIHNvdXJjZXNPd25lci5zb3VyY2UyT3duZXIpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmxhZ0NvbW1lbnQnLCB0aGlzLmZsYWdDb21tZW50KQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3NvdXJjZTFEQicsIHRoaXMuZ2V0U291cmNlMSgpKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3NvdXJjZTJEQicsIHRoaXMuZ2V0U291cmNlMigpKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3JlY29MZXZlbCcsIHRoaXMuJHN0b3JlLnN0YXRlLnJlY29MZXZlbCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCd0b3RhbExldmVscycsIHRoaXMuJHN0b3JlLnN0YXRlLnRvdGFsU291cmNlMUxldmVscykKICAgICAgZm9ybURhdGEuYXBwZW5kKCd1c2VySUQnLCB0aGlzLiRzdG9yZS5zdGF0ZS5hY3RpdmVQYWlyLnVzZXJJRC5faWQpCiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoJy9tYXRjaC8nICsgdGhpcy5tYXRjaFR5cGUsIGZvcm1EYXRhLCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmR5bmFtaWNQcm9ncmVzcyA9IGZhbHNlCiAgICAgICAgICAvLyByZW1vdmUgZnJvbSBTb3VyY2UgMiBVbm1hdGNoZWQKICAgICAgICAgIGxldCBzb3VyY2UyUGFyZW50cyA9IG51bGwKICAgICAgICAgIGZvciAobGV0IGsgaW4gdGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMlVuTWF0Y2hlZCkgewogICAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMlVuTWF0Y2hlZFtrXS5pZCA9PT0gdGhpcy5zb3VyY2UySWQpIHsKICAgICAgICAgICAgICBzb3VyY2UyUGFyZW50cyA9IHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTJVbk1hdGNoZWRba10ucGFyZW50cwogICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTJVbk1hdGNoZWQuc3BsaWNlKGssIDEpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvLyBBZGQgZnJvbSBhIGxpc3Qgb2YgU291cmNlIDEgTWF0Y2hlZCBhbmQgcmVtb3ZlIGZyb20gbGlzdCBvZiBTb3VyY2UgMSB1bk1hdGNoZWQKICAgICAgICAgIGZvciAobGV0IGsgaW4gdGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMVVuTWF0Y2hlZCkgewogICAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMVVuTWF0Y2hlZFtrXS5pZCA9PT0gdGhpcy5zZWxlY3RlZFNvdXJjZTFJZCkgewogICAgICAgICAgICAgIGlmICh0aGlzLm1hdGNoVHlwZSA9PT0gJ21hdGNoJykgewogICAgICAgICAgICAgICAgKyt0aGlzLiRzdG9yZS5zdGF0ZS50b3RhbEFsbE1hcHBlZAogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubWF0Y2hlZENvbnRlbnQucHVzaCh7CiAgICAgICAgICAgICAgICAgIHNvdXJjZTFOYW1lOiB0aGlzLnNlbGVjdGVkU291cmNlMU5hbWUsCiAgICAgICAgICAgICAgICAgIHNvdXJjZTFJZDogdGhpcy5zZWxlY3RlZFNvdXJjZTFJZCwKICAgICAgICAgICAgICAgICAgc291cmNlMVBhcmVudHM6IHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTFVbk1hdGNoZWRba10ucGFyZW50cywKICAgICAgICAgICAgICAgICAgc291cmNlMk5hbWU6IHRoaXMuc291cmNlMk5hbWUsCiAgICAgICAgICAgICAgICAgIHNvdXJjZTJJZDogdGhpcy5zb3VyY2UySWQsCiAgICAgICAgICAgICAgICAgIHNvdXJjZTJJZEhpZXJhcmNoeTogdGhpcy5zb3VyY2UySWRIaWVyYXJjaHksCiAgICAgICAgICAgICAgICAgIG1hcHBlZFBhcmVudE5hbWU6IHRoaXMubWFwcGVkUGFyZW50TmFtZSwKICAgICAgICAgICAgICAgICAgc291cmNlMlBhcmVudHM6IHNvdXJjZTJQYXJlbnRzLAogICAgICAgICAgICAgICAgICBtYXRjaENvbW1lbnRzOiByZXNwb25zZS5kYXRhLm1hdGNoQ29tbWVudHMKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1hdGNoVHlwZSA9PT0gJ2ZsYWcnKSB7CiAgICAgICAgICAgICAgICArK3RoaXMuJHN0b3JlLnN0YXRlLnRvdGFsQWxsRmxhZ2dlZAogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZmxhZ2dlZC5wdXNoKHsKICAgICAgICAgICAgICAgICAgc291cmNlMU5hbWU6IHRoaXMuc2VsZWN0ZWRTb3VyY2UxTmFtZSwKICAgICAgICAgICAgICAgICAgc291cmNlMUlkOiB0aGlzLnNlbGVjdGVkU291cmNlMUlkLAogICAgICAgICAgICAgICAgICBzb3VyY2UxUGFyZW50czogdGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMVVuTWF0Y2hlZFtrXS5wYXJlbnRzLAogICAgICAgICAgICAgICAgICBzb3VyY2UyTmFtZTogdGhpcy5zb3VyY2UyTmFtZSwKICAgICAgICAgICAgICAgICAgc291cmNlMklkOiB0aGlzLnNvdXJjZTJJZCwKICAgICAgICAgICAgICAgICAgc291cmNlMklkSGllcmFyY2h5OiB0aGlzLnNvdXJjZTJJZEhpZXJhcmNoeSwKICAgICAgICAgICAgICAgICAgbWFwcGVkUGFyZW50TmFtZTogdGhpcy5tYXBwZWRQYXJlbnROYW1lLAogICAgICAgICAgICAgICAgICBzb3VyY2UyUGFyZW50czogc291cmNlMlBhcmVudHMsCiAgICAgICAgICAgICAgICAgIGZsYWdDb21tZW50OiB0aGlzLmZsYWdDb21tZW50CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zb3VyY2UxVW5NYXRjaGVkLnNwbGljZShrLCAxKQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmZsYWdDb21tZW50ID0gJycKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTb3VyY2UxSWQgPSBudWxsCiAgICAgICAgICB0aGlzLnNlbGVjdGVkU291cmNlMU5hbWUgPSBudWxsCiAgICAgICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIHRoaXMuZmxhZ0NvbW1lbnQgPSAnJwogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZHluYW1pY1Byb2dyZXNzID0gZmFsc2UKICAgICAgICAgIHRoaXMuYWxlcnQgPSB0cnVlCiAgICAgICAgICB0aGlzLmFsZXJ0VGl0bGUgPSAnRXJyb3InCiAgICAgICAgICB0aGlzLmFsZXJ0VGV4dCA9IGVyci5yZXNwb25zZS5kYXRhLmVycm9yCiAgICAgICAgICB0aGlzLnNlbGVjdGVkU291cmNlMUlkID0gbnVsbAogICAgICAgICAgdGhpcy5zZWxlY3RlZFNvdXJjZTFOYW1lID0gbnVsbAogICAgICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZQogICAgICAgIH0pCiAgICB9LAogICAgYWNjZXB0RmxhZyAoc291cmNlMUlkKSB7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnByb2dyZXNzVGl0bGUgPSAnQWNjZXB0aW5nIGZsYWcnCiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmR5bmFtaWNQcm9ncmVzcyA9IHRydWUKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdzb3VyY2UxSWQnLCBzb3VyY2UxSWQpCiAgICAgIGxldCB1c2VySUQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5hY3RpdmVQYWlyLnVzZXJJRC5faWQKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgnL2FjY2VwdEZsYWcvJyArIHRoaXMuZ2V0U291cmNlMSgpICsgJy8nICsgdGhpcy5nZXRTb3VyY2UyKCkgKyAnLycgKyB1c2VySUQsIGZvcm1EYXRhLCB7IGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJyB9IH0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZHluYW1pY1Byb2dyZXNzID0gZmFsc2UKICAgICAgICAgIC8vIEFkZCBmcm9tIGEgbGlzdCBvZiBTb3VyY2UgMSBNYXRjaGVkIGFuZCByZW1vdmUgZnJvbSBsaXN0IG9mIEZsYWdnZWQKICAgICAgICAgIGZvciAobGV0IGsgaW4gdGhpcy4kc3RvcmUuc3RhdGUuZmxhZ2dlZCkgewogICAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuZmxhZ2dlZFtrXS5zb3VyY2UxSWQgPT09IHNvdXJjZTFJZCkgewogICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLm1hdGNoZWRDb250ZW50LnB1c2goewogICAgICAgICAgICAgICAgc291cmNlMU5hbWU6IHRoaXMuJHN0b3JlLnN0YXRlLmZsYWdnZWRba10uc291cmNlMU5hbWUsCiAgICAgICAgICAgICAgICBzb3VyY2UxSWQ6IHRoaXMuJHN0b3JlLnN0YXRlLmZsYWdnZWRba10uc291cmNlMUlkLAogICAgICAgICAgICAgICAgc291cmNlMVBhcmVudHM6IHRoaXMuJHN0b3JlLnN0YXRlLmZsYWdnZWRba10uc291cmNlMVBhcmVudHMsCiAgICAgICAgICAgICAgICBzb3VyY2UyTmFtZTogdGhpcy4kc3RvcmUuc3RhdGUuZmxhZ2dlZFtrXS5zb3VyY2UyTmFtZSwKICAgICAgICAgICAgICAgIHNvdXJjZTJJZDogdGhpcy4kc3RvcmUuc3RhdGUuZmxhZ2dlZFtrXS5zb3VyY2UySWQsCiAgICAgICAgICAgICAgICBzb3VyY2UySWRIaWVyYXJjaHk6IHRoaXMuJHN0b3JlLnN0YXRlLmZsYWdnZWRba10uc291cmNlMklkSGllcmFyY2h5LAogICAgICAgICAgICAgICAgbWFwcGVkUGFyZW50TmFtZTogdGhpcy4kc3RvcmUuc3RhdGUuZmxhZ2dlZFtrXS5tYXBwZWRQYXJlbnROYW1lLAogICAgICAgICAgICAgICAgc291cmNlMlBhcmVudHM6IHRoaXMuJHN0b3JlLnN0YXRlLmZsYWdnZWRba10uc291cmNlMlBhcmVudHMKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmZsYWdnZWQuc3BsaWNlKGssIDEpCiAgICAgICAgICAgICAgKyt0aGlzLiRzdG9yZS5zdGF0ZS50b3RhbEFsbE1hcHBlZAogICAgICAgICAgICAgIC0tdGhpcy4kc3RvcmUuc3RhdGUudG90YWxBbGxGbGFnZ2VkCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZHluYW1pY1Byb2dyZXNzID0gZmFsc2UKICAgICAgICAgIHRoaXMuYWxlcnQgPSB0cnVlCiAgICAgICAgICB0aGlzLmFsZXJ0VGl0bGUgPSAnRXJyb3InCiAgICAgICAgICB0aGlzLmFsZXJ0VGV4dCA9IGVyci5yZXNwb25zZS5kYXRhLmVycm9yCiAgICAgICAgICB0aGlzLnNlbGVjdGVkU291cmNlMUlkID0gbnVsbAogICAgICAgICAgdGhpcy5zZWxlY3RlZFNvdXJjZTFOYW1lID0gbnVsbAogICAgICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZQogICAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICAgIH0pCiAgICB9LAogICAgYnJlYWtNYXRjaCAoc291cmNlMUlkKSB7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnByb2dyZXNzVGl0bGUgPSAnQnJlYWtpbmcgbWF0Y2gnCiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmR5bmFtaWNQcm9ncmVzcyA9IHRydWUKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgbGV0IHVzZXJJRCA9IHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2ZVBhaXIudXNlcklELl9pZAogICAgICBsZXQgc291cmNlc093bmVyID0gdGhpcy5nZXREYXRhc291cmNlT3duZXIoKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3NvdXJjZTFJZCcsIHNvdXJjZTFJZCkKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgnL2JyZWFrTWF0Y2gvJyArIHRoaXMuZ2V0U291cmNlMSgpICsgJy8nICsgdGhpcy5nZXRTb3VyY2UyKCkgKyAnLycgKyBzb3VyY2VzT3duZXIuc291cmNlMU93bmVyICsgJy8nICsgc291cmNlc093bmVyLnNvdXJjZTJPd25lciArICcvJyArIHVzZXJJRCwgZm9ybURhdGEsIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICApCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZHluYW1pY1Byb2dyZXNzID0gZmFsc2UKICAgICAgICAgIGZvciAobGV0IGsgaW4gdGhpcy4kc3RvcmUuc3RhdGUubWF0Y2hlZENvbnRlbnQpIHsKICAgICAgICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLm1hdGNoZWRDb250ZW50W2tdLnNvdXJjZTFJZCA9PT0gc291cmNlMUlkKSB7CiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMVVuTWF0Y2hlZC5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuJHN0b3JlLnN0YXRlLm1hdGNoZWRDb250ZW50W2tdLnNvdXJjZTFOYW1lLAogICAgICAgICAgICAgICAgaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLm1hdGNoZWRDb250ZW50W2tdLnNvdXJjZTFJZCwKICAgICAgICAgICAgICAgIHBhcmVudHM6IHRoaXMuJHN0b3JlLnN0YXRlLm1hdGNoZWRDb250ZW50W2tdLnNvdXJjZTFQYXJlbnRzCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zb3VyY2UyVW5NYXRjaGVkLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogdGhpcy4kc3RvcmUuc3RhdGUubWF0Y2hlZENvbnRlbnRba10uc291cmNlMk5hbWUsCiAgICAgICAgICAgICAgICBpZDogdGhpcy4kc3RvcmUuc3RhdGUubWF0Y2hlZENvbnRlbnRba10uc291cmNlMklkLAogICAgICAgICAgICAgICAgc291cmNlMklkSGllcmFyY2h5OiB0aGlzLiRzdG9yZS5zdGF0ZS5tYXRjaGVkQ29udGVudFtrXS5zb3VyY2UySWRIaWVyYXJjaHksCiAgICAgICAgICAgICAgICBtYXBwZWRQYXJlbnROYW1lOiB0aGlzLiRzdG9yZS5zdGF0ZS5tYXRjaGVkQ29udGVudFtrXS5tYXBwZWRQYXJlbnROYW1lLAogICAgICAgICAgICAgICAgcGFyZW50czogdGhpcy4kc3RvcmUuc3RhdGUubWF0Y2hlZENvbnRlbnRba10uc291cmNlMlBhcmVudHMKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLm1hdGNoZWRDb250ZW50LnNwbGljZShrLCAxKQogICAgICAgICAgICAgIC0tdGhpcy4kc3RvcmUuc3RhdGUudG90YWxBbGxNYXBwZWQKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5keW5hbWljUHJvZ3Jlc3MgPSBmYWxzZQogICAgICAgICAgdGhpcy5hbGVydCA9IHRydWUKICAgICAgICAgIHRoaXMuYWxlcnRUaXRsZSA9ICdFcnJvcicKICAgICAgICAgIHRoaXMuYWxlcnRUZXh0ID0gZXJyLnJlc3BvbnNlLmRhdGEuZXJyb3IKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTb3VyY2UxSWQgPSBudWxsCiAgICAgICAgICB0aGlzLnNlbGVjdGVkU291cmNlMU5hbWUgPSBudWxsCiAgICAgICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgICAgfSkKICAgIH0sCiAgICB1bkZsYWcgKHNvdXJjZTFJZCkgewogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5wcm9ncmVzc1RpdGxlID0gJ1VuZmxhZ2dpbmcgbWF0Y2gnCiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmR5bmFtaWNQcm9ncmVzcyA9IHRydWUKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgbGV0IHVzZXJJRCA9IHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2ZVBhaXIudXNlcklELl9pZAogICAgICBsZXQgc291cmNlc093bmVyID0gdGhpcy5nZXREYXRhc291cmNlT3duZXIoKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3NvdXJjZTFJZCcsIHNvdXJjZTFJZCkKICAgICAgYXhpb3MKICAgICAgICAucG9zdCgnL2JyZWFrTWF0Y2gvJyArIHRoaXMuZ2V0U291cmNlMSgpICsgJy8nICsgdGhpcy5nZXRTb3VyY2UyKCkgKyAnLycgKyBzb3VyY2VzT3duZXIuc291cmNlMU93bmVyICsgJy8nICsgc291cmNlc093bmVyLnNvdXJjZTJPd25lciArICcvJyArIHVzZXJJRCwgZm9ybURhdGEsIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICApLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZHluYW1pY1Byb2dyZXNzID0gZmFsc2UKICAgICAgICAgIGZvciAobGV0IGsgaW4gdGhpcy4kc3RvcmUuc3RhdGUuZmxhZ2dlZCkgewogICAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuZmxhZ2dlZFtrXS5zb3VyY2UxSWQgPT09IHNvdXJjZTFJZCkgewogICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTFVbk1hdGNoZWQucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLiRzdG9yZS5zdGF0ZS5mbGFnZ2VkW2tdLnNvdXJjZTFOYW1lLAogICAgICAgICAgICAgICAgaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLmZsYWdnZWRba10uc291cmNlMUlkLAogICAgICAgICAgICAgICAgcGFyZW50czogdGhpcy4kc3RvcmUuc3RhdGUuZmxhZ2dlZFtrXS5zb3VyY2UxUGFyZW50cwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMlVuTWF0Y2hlZC5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuJHN0b3JlLnN0YXRlLmZsYWdnZWRba10uc291cmNlMk5hbWUsCiAgICAgICAgICAgICAgICBpZDogdGhpcy4kc3RvcmUuc3RhdGUuZmxhZ2dlZFtrXS5zb3VyY2UySWQsCiAgICAgICAgICAgICAgICBzb3VyY2UySWRIaWVyYXJjaHk6IHRoaXMuJHN0b3JlLnN0YXRlLmZsYWdnZWRba10uc291cmNlMklkSGllcmFyY2h5LAogICAgICAgICAgICAgICAgbWFwcGVkUGFyZW50TmFtZTogdGhpcy4kc3RvcmUuc3RhdGUuZmxhZ2dlZFtrXS5tYXBwZWRQYXJlbnROYW1lLAogICAgICAgICAgICAgICAgcGFyZW50czogdGhpcy4kc3RvcmUuc3RhdGUuZmxhZ2dlZFtrXS5zb3VyY2UyUGFyZW50cwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZmxhZ2dlZC5zcGxpY2UoaywgMSkKICAgICAgICAgICAgICAtLXRoaXMuJHN0b3JlLnN0YXRlLnRvdGFsQWxsRmxhZ2dlZAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmR5bmFtaWNQcm9ncmVzcyA9IGZhbHNlCiAgICAgICAgICB0aGlzLmFsZXJ0ID0gdHJ1ZQogICAgICAgICAgdGhpcy5hbGVydFRpdGxlID0gJ0Vycm9yJwogICAgICAgICAgdGhpcy5hbGVydFRleHQgPSBlcnIucmVzcG9uc2UuZGF0YS5lcnJvcgogICAgICAgICAgdGhpcy5zZWxlY3RlZFNvdXJjZTFJZCA9IG51bGwKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTb3VyY2UxTmFtZSA9IG51bGwKICAgICAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2UKICAgICAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgICB9KQogICAgfSwKICAgIGJyZWFrTm9NYXRjaCAoc291cmNlMUlkLCB0eXBlKSB7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnByb2dyZXNzVGl0bGUgPSAnQnJlYWtpbmcgbm8gbWF0Y2gnCiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmR5bmFtaWNQcm9ncmVzcyA9IHRydWUKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdzb3VyY2UxSWQnLCBzb3VyY2UxSWQpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgncmVjb0xldmVsJywgdGhpcy4kc3RvcmUuc3RhdGUucmVjb0xldmVsKQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3RvdGFsTGV2ZWxzJywgdGhpcy4kc3RvcmUuc3RhdGUudG90YWxTb3VyY2UxTGV2ZWxzKQogICAgICBsZXQgdXNlcklEID0gdGhpcy4kc3RvcmUuc3RhdGUuYWN0aXZlUGFpci51c2VySUQuX2lkCiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoJy9icmVha05vTWF0Y2gvJyArIHR5cGUgKyAnLycgKyB0aGlzLmdldFNvdXJjZTEoKSArICcvJyArIHRoaXMuZ2V0U291cmNlMigpICsgJy8nICsgdXNlcklELCBmb3JtRGF0YSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5keW5hbWljUHJvZ3Jlc3MgPSBmYWxzZQogICAgICAgICAgaWYgKHR5cGUgPT09ICdub21hdGNoJykgewogICAgICAgICAgICBmb3IgKGxldCBrIGluIHRoaXMuJHN0b3JlLnN0YXRlLm5vTWF0Y2hDb250ZW50KSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLm5vTWF0Y2hDb250ZW50W2tdLnNvdXJjZTFJZCA9PT0gc291cmNlMUlkKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zb3VyY2UxVW5NYXRjaGVkLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLiRzdG9yZS5zdGF0ZS5ub01hdGNoQ29udGVudFtrXS5zb3VyY2UxTmFtZSwKICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLm5vTWF0Y2hDb250ZW50W2tdLnNvdXJjZTFJZCwKICAgICAgICAgICAgICAgICAgcGFyZW50czogdGhpcy4kc3RvcmUuc3RhdGUubm9NYXRjaENvbnRlbnRba10ucGFyZW50cwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLm5vTWF0Y2hDb250ZW50LnNwbGljZShrLCAxKQogICAgICAgICAgICAgICAgLS10aGlzLiRzdG9yZS5zdGF0ZS50b3RhbEFsbE5vTWF0Y2gKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2lnbm9yZScpIHsKICAgICAgICAgICAgZm9yIChsZXQgayBpbiB0aGlzLiRzdG9yZS5zdGF0ZS5pZ25vcmVDb250ZW50KSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmlnbm9yZUNvbnRlbnRba10uc291cmNlMUlkID09PSBzb3VyY2UxSWQpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTFVbk1hdGNoZWQucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuJHN0b3JlLnN0YXRlLmlnbm9yZUNvbnRlbnRba10uc291cmNlMU5hbWUsCiAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLiRzdG9yZS5zdGF0ZS5pZ25vcmVDb250ZW50W2tdLnNvdXJjZTFJZCwKICAgICAgICAgICAgICAgICAgcGFyZW50czogdGhpcy4kc3RvcmUuc3RhdGUuaWdub3JlQ29udGVudFtrXS5wYXJlbnRzCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuaWdub3JlQ29udGVudC5zcGxpY2UoaywgMSkKICAgICAgICAgICAgICAgIC0tdGhpcy4kc3RvcmUuc3RhdGUudG90YWxBbGxJZ25vcmUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZHluYW1pY1Byb2dyZXNzID0gZmFsc2UKICAgICAgICAgIHRoaXMuYWxlcnQgPSB0cnVlCiAgICAgICAgICB0aGlzLmFsZXJ0VGl0bGUgPSAnRXJyb3InCiAgICAgICAgICB0aGlzLmFsZXJ0VGV4dCA9IGVyci5yZXNwb25zZS5kYXRhLmVycm9yCiAgICAgICAgICB0aGlzLnNlbGVjdGVkU291cmNlMUlkID0gbnVsbAogICAgICAgICAgdGhpcy5zZWxlY3RlZFNvdXJjZTFOYW1lID0gbnVsbAogICAgICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZQogICAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICAgIH0pCiAgICB9LAogICAgbm9NYXRjaCAodHlwZSkgewogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5wcm9ncmVzc1RpdGxlID0gJ1NhdmluZyBhcyBubyBtYXRjaCcKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZHluYW1pY1Byb2dyZXNzID0gdHJ1ZQogICAgICBsZXQgdXNlcklEID0gdGhpcy4kc3RvcmUuc3RhdGUuYWN0aXZlUGFpci51c2VySUQuX2lkCiAgICAgIGxldCBzb3VyY2VzT3duZXIgPSB0aGlzLmdldERhdGFzb3VyY2VPd25lcigpCiAgICAgIGxldCBzb3VyY2UxT3duZXIgPSBzb3VyY2VzT3duZXIuc291cmNlMU93bmVyCiAgICAgIGxldCBzb3VyY2UyT3duZXIgPSBzb3VyY2VzT3duZXIuc291cmNlMk93bmVyCiAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnc291cmNlMUlkJywgdGhpcy5zZWxlY3RlZFNvdXJjZTFJZCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdyZWNvTGV2ZWwnLCB0aGlzLiRzdG9yZS5zdGF0ZS5yZWNvTGV2ZWwpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgndG90YWxMZXZlbHMnLCB0aGlzLiRzdG9yZS5zdGF0ZS50b3RhbFNvdXJjZTFMZXZlbHMpCgogICAgICBheGlvcwogICAgICAgIC5wb3N0KGAvbm9NYXRjaC8ke3R5cGV9LyR7dGhpcy5nZXRTb3VyY2UxKCl9LyR7dGhpcy5nZXRTb3VyY2UyKCl9LyR7c291cmNlMU93bmVyfS8ke3NvdXJjZTJPd25lcn0vJHt1c2VySUR9YCwgZm9ybURhdGEsIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZHluYW1pY1Byb2dyZXNzID0gZmFsc2UKICAgICAgICAgIC8vIHJlbW92ZSBmcm9tIFNvdXJjZSAxIFVubWF0Y2hlZAogICAgICAgICAgaWYgKHR5cGUgPT09ICdub21hdGNoJykgewogICAgICAgICAgICBmb3IgKGxldCBrIGluIHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTFVbk1hdGNoZWQpIHsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zb3VyY2UxVW5NYXRjaGVkW2tdLmlkID09PQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNvdXJjZTFJZAogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubm9NYXRjaENvbnRlbnQucHVzaCh7CiAgICAgICAgICAgICAgICAgIHNvdXJjZTFOYW1lOiB0aGlzLnNlbGVjdGVkU291cmNlMU5hbWUsCiAgICAgICAgICAgICAgICAgIHNvdXJjZTFJZDogdGhpcy5zZWxlY3RlZFNvdXJjZTFJZCwKICAgICAgICAgICAgICAgICAgcGFyZW50czogdGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMVVuTWF0Y2hlZFtrXS5wYXJlbnRzCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgKyt0aGlzLiRzdG9yZS5zdGF0ZS50b3RhbEFsbE5vTWF0Y2gKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTFVbk1hdGNoZWQuc3BsaWNlKGssIDEpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdpZ25vcmUnKSB7CiAgICAgICAgICAgIGZvciAobGV0IGsgaW4gdGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMVVuTWF0Y2hlZCkgewogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTFVbk1hdGNoZWRba10uaWQgPT09CiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkU291cmNlMUlkCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5pZ25vcmVDb250ZW50LnB1c2goewogICAgICAgICAgICAgICAgICBzb3VyY2UxTmFtZTogdGhpcy5zZWxlY3RlZFNvdXJjZTFOYW1lLAogICAgICAgICAgICAgICAgICBzb3VyY2UxSWQ6IHRoaXMuc2VsZWN0ZWRTb3VyY2UxSWQsCiAgICAgICAgICAgICAgICAgIHBhcmVudHM6IHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTFVbk1hdGNoZWRba10ucGFyZW50cwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICsrdGhpcy4kc3RvcmUuc3RhdGUudG90YWxBbGxJZ25vcmUKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTFVbk1hdGNoZWQuc3BsaWNlKGssIDEpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlCiAgICAgICAgICB0aGlzLnNlbGVjdGVkU291cmNlMUlkID0gbnVsbAogICAgICAgICAgdGhpcy5zZWxlY3RlZFNvdXJjZTFOYW1lID0gbnVsbAogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5keW5hbWljUHJvZ3Jlc3MgPSBmYWxzZQogICAgICAgICAgdGhpcy5hbGVydCA9IHRydWUKICAgICAgICAgIHRoaXMuYWxlcnRUaXRsZSA9ICdFcnJvcicKICAgICAgICAgIHRoaXMuYWxlcnRUZXh0ID0gZXJyLnJlc3BvbnNlLmRhdGEuZXJyb3IKICAgICAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2UKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRTb3VyY2UxSWQgPSBudWxsCiAgICAgICAgICB0aGlzLnNlbGVjdGVkU291cmNlMU5hbWUgPSBudWxsCiAgICAgICAgfSkKICAgIH0sCiAgICBiYWNrICgpIHsKICAgICAgdGhpcy5zZWFyY2hQb3RlbnRpYWwgPSAnJwogICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgbmV4dExldmVsVGV4dDogewogICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy50cmFuc2xhdGVEYXRhSGVhZGVyKCdzb3VyY2UxJywgdGhpcy4kc3RvcmUuc3RhdGUucmVjb0xldmVsKQogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uICgpIHsgfQogICAgfSwKICAgIGN1cnJlbnRMZXZlbFRleHQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNsYXRlRGF0YUhlYWRlcigKICAgICAgICAgICdzb3VyY2UxJywKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnJlY29MZXZlbCAtIDEKICAgICAgICApCiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gKCkgeyB9CiAgICB9LAogICAgbWF0Y2hlZEhlYWRlcnMgKCkgewogICAgICBsZXQgaGVhZGVyID0gWwogICAgICAgIHsgdGV4dDogJ1NvdXJjZTEgTG9jYXRpb24nLCB2YWx1ZTogJ3NvdXJjZTFOYW1lJyB9LAogICAgICAgIHsgdGV4dDogJ1NvdXJjZTEgSUQnLCB2YWx1ZTogJ3NvdXJjZTFJZCcgfSwKICAgICAgICB7IHRleHQ6ICdTb3VyY2UyIExvY2F0aW9uJywgdmFsdWU6ICdzb3VyY2UyTmFtZScgfSwKICAgICAgICB7IHRleHQ6ICdTb3VyY2UyIElEJywgdmFsdWU6ICdzb3VyY2UySWQnIH0sCiAgICAgICAgeyB0ZXh0OiAnTWF0Y2ggQ29tbWVudCcsIHZhbHVlOiAnbWF0Y2hDb21tZW50cycgfQogICAgICBdCiAgICAgIHJldHVybiBoZWFkZXIKICAgIH0sCiAgICBzb3VyY2UxR3JpZEhlYWRlcnMgKCkgewogICAgICBsZXQgaGVhZGVyID0gW3sgdGV4dDogJ0xvY2F0aW9uJywgdmFsdWU6ICduYW1lJyB9XQogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMVVuTWF0Y2hlZC5sZW5ndGggPiAwKSB7CiAgICAgICAgZm9yICgKICAgICAgICAgIGxldCBpID0gdGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMVVuTWF0Y2hlZFswXS5wYXJlbnRzLmxlbmd0aDsKICAgICAgICAgIGkgPiAwOwogICAgICAgICAgaS0tCiAgICAgICAgKSB7CiAgICAgICAgICBoZWFkZXIucHVzaCh7IHRleHQ6ICdMZXZlbCAnICsgaSwgdmFsdWU6ICdsZXZlbCcgKyAoaSArIDEpIH0pCiAgICAgICAgfQogICAgICB9CiAgICAgIGhlYWRlci5zcGxpY2UoMSwgMSkKICAgICAgcmV0dXJuIGhlYWRlcgogICAgfSwKICAgIHBvdGVudGlhbEhlYWRlcnMgKCkgewogICAgICB2YXIgcmVzdWx0cyA9IFtdCiAgICAgIHJlc3VsdHMucHVzaCgKICAgICAgICB7IHNvcnRhYmxlOiBmYWxzZSB9LAogICAgICAgIHsgdGV4dDogJ1NvdXJjZSAyIExvY2F0aW9uJywgdmFsdWU6ICduYW1lJywgc29ydGFibGU6IGZhbHNlIH0sCiAgICAgICAgeyB0ZXh0OiAnSUQnLCB2YWx1ZTogJ2lkJywgc29ydGFibGU6IGZhbHNlIH0sCiAgICAgICAgeyB0ZXh0OiAnUGFyZW50JywgdmFsdWU6ICdzb3VyY2UyUGFyZW50Jywgc29ydGFibGU6IGZhbHNlIH0KICAgICAgKQogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUucmVjb0xldmVsID09PSB0aGlzLiRzdG9yZS5zdGF0ZS50b3RhbFNvdXJjZTFMZXZlbHMpIHsKICAgICAgICByZXN1bHRzLnB1c2goewogICAgICAgICAgdGV4dDogJ0dlbyBEaXN0IChNaWxlcyknLAogICAgICAgICAgdmFsdWU6ICdnZW9kaXN0JywKICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZQogICAgICAgIH0pCiAgICAgIH0KICAgICAgcmVzdWx0cy5wdXNoKHsgdGV4dDogJ1Njb3JlJywgdmFsdWU6ICdzY29yZScgfSkKICAgICAgcmVzdWx0cy5wdXNoKHsgdGV4dDogJ0NvbW1lbnQnLCB2YWx1ZTogJ2NvbW1lbnQnLCBzb3J0YWJsZTogZmFsc2UsfSkKICAgICAgcmV0dXJuIHJlc3VsdHMKICAgIH0sCiAgICBwb3RlbnRpYWxBdmFpbGFibGUgKCkgewogICAgICByZXR1cm4gKAogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTJVbk1hdGNoZWQgIT09IG51bGwgJiYKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zb3VyY2UyVW5NYXRjaGVkLmxlbmd0aCA+IHRoaXMucG90ZW50aWFsTWF0Y2hlcy5sZW5ndGgKICAgICAgKQogICAgfSwKICAgIGFsbFBvdGVudGlhbE1hdGNoZXMgKCkgewogICAgICBpZiAoCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMlVuTWF0Y2hlZCAhPT0gbnVsbCAmJgogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTJVbk1hdGNoZWQubGVuZ3RoID4KICAgICAgICB0aGlzLnBvdGVudGlhbE1hdGNoZXMubGVuZ3RoICYmCiAgICAgICAgdGhpcy5zaG93QWxsUG90ZW50aWFsCiAgICAgICkgewogICAgICAgIGxldCByZXN1bHRzID0gW10KICAgICAgICBmb3IgKGxldCBhZGRJdCBvZiB0aGlzLiRzdG9yZS5zdGF0ZS5zb3VyY2UyVW5NYXRjaGVkKSB7CiAgICAgICAgICBsZXQgbWF0Y2hlZCA9IHRoaXMucG90ZW50aWFsTWF0Y2hlcy5maW5kKG1hdGNoZWQgPT4gewogICAgICAgICAgICByZXR1cm4gbWF0Y2hlZC5pZCA9PT0gYWRkSXQuaWQKICAgICAgICAgIH0pCiAgICAgICAgICBpZiAoIW1hdGNoZWQpIHsKICAgICAgICAgICAgYWRkSXQuc2NvcmUgPSAnTi9BJwogICAgICAgICAgICAvLyBpZiAoIWFkZEl0LnNvdXJjZTJJZEhpZXJhcmNoeSAmJiBhZGRJdC5zb3VyY2UySWRIaWVyYXJjaHkpIHsKICAgICAgICAgICAgLy8gICBhZGRJdC5zb3VyY2UySWRIaWVyYXJjaHkgPSBhZGRJdC5zb3VyY2UySWRIaWVyYXJjaHkKICAgICAgICAgICAgLy8gfQogICAgICAgICAgICByZXN1bHRzLnB1c2goYWRkSXQpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLnBvdGVudGlhbE1hdGNoZXMuY29uY2F0KHJlc3VsdHMpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMucG90ZW50aWFsTWF0Y2hlcwogICAgICB9CiAgICB9LAogICAgc291cmNlMVRyZWUgKCkgewogICAgICB0aGlzLmFkZExpc3RlbmVyKCkKICAgICAgY29uc3QgY3JlYXRlVHJlZSA9IChjdXJyZW50LCByZXN1bHRzKSA9PiB7CiAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBjdXJyZW50KSB7CiAgICAgICAgICBsZXQgYWRkID0geyB0ZXh0OiBuYW1lIH0KICAgICAgICAgIGFkZC5jaGlsZHJlbiA9IFtdCiAgICAgICAgICBjcmVhdGVUcmVlKGN1cnJlbnRbbmFtZV0sIGFkZC5jaGlsZHJlbikKICAgICAgICAgIGlmIChhZGQuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIGRlbGV0ZSBhZGQuY2hpbGRyZW4KICAgICAgICAgIH0KICAgICAgICAgIHJlc3VsdHMucHVzaChhZGQpCiAgICAgICAgfQogICAgICB9CiAgICAgIGxldCByZXN1bHRzID0gW10KICAgICAgaWYgKAogICAgICAgIE9iamVjdC5rZXlzKHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTFQYXJlbnRzKS5sZW5ndGggPT09IDEgJiYKICAgICAgICBPYmplY3Qua2V5cyh0aGlzLiRzdG9yZS5zdGF0ZS5zb3VyY2UxUGFyZW50cylbMF0gPT09ICdudWxsJwogICAgICApIHsKICAgICAgICByZXR1cm4gcmVzdWx0cwogICAgICB9CiAgICAgIGNyZWF0ZVRyZWUodGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMVBhcmVudHMsIHJlc3VsdHMpCiAgICAgIHJldHVybiByZXN1bHRzCiAgICB9LAogICAgc291cmNlMUdyaWQgKCkgewogICAgICBpZiAoCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMVVuTWF0Y2hlZC5sZW5ndGggPiAwICYmCiAgICAgICAgdGhpcy5zb3VyY2UxRmlsdGVyLmxldmVsICE9PSAnJwogICAgICApIHsKICAgICAgICBsZXQgcGFyZW50SWR4ID0KICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTFVbk1hdGNoZWRbMF0ucGFyZW50cy5sZW5ndGggLQogICAgICAgICAgdGhpcy5zb3VyY2UxRmlsdGVyLmxldmVsCiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTFVbk1hdGNoZWQuZmlsdGVyKAogICAgICAgICAgbG9jYXRpb24gPT4gbG9jYXRpb24ucGFyZW50c1twYXJlbnRJZHhdID09PSB0aGlzLnNvdXJjZTFGaWx0ZXIudGV4dAogICAgICAgICkKICAgICAgfQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMVVuTWF0Y2hlZAogICAgfSwKICAgIGdvTmV4dExldmVsICgpIHsKICAgICAgaWYgKAogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnJlY29MZXZlbCA8IHRoaXMuJHN0b3JlLnN0YXRlLnRvdGFsU291cmNlMUxldmVscyAmJgogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTFVbk1hdGNoZWQgIT09IG51bGwgJiYKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zb3VyY2UxVW5NYXRjaGVkLmxlbmd0aCA9PT0gMCAmJgogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmZsYWdnZWQgIT09IG51bGwgJiYKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5mbGFnZ2VkLmxlbmd0aCA9PT0gMCAmJgogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLm1hdGNoZWRDb250ZW50ICE9PSBudWxsICYmCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubWF0Y2hlZENvbnRlbnQubGVuZ3RoICE9PSAwCiAgICAgICkgewogICAgICAgIHJldHVybiAneWVzJwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnbm8nCiAgICAgIH0KICAgIH0sCiAgICBsYXN0TGV2ZWxEb25lICgpIHsKICAgICAgaWYgKAogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnJlY29MZXZlbCA9PT0gdGhpcy4kc3RvcmUuc3RhdGUudG90YWxTb3VyY2UxTGV2ZWxzICYmCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMVVuTWF0Y2hlZCAhPT0gbnVsbCAmJgogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTFVbk1hdGNoZWQubGVuZ3RoID09PSAwICYmCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZmxhZ2dlZCAhPT0gbnVsbCAmJgogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmZsYWdnZWQubGVuZ3RoID09PSAwCiAgICAgICkgewogICAgICAgIHJldHVybiAneWVzJwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnbm8nCiAgICAgIH0KICAgIH0sCiAgICBzb3VyY2UxVG90YWxSZWNvcmRzICgpIHsKICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnNjb3JlUmVzdWx0cykgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zY29yZVJlc3VsdHMubGVuZ3RoCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIDAKICAgICAgfQogICAgfSwKICAgIHNvdXJjZTFUb3RhbE1hdGNoZWQgKCkgewogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUubWF0Y2hlZENvbnRlbnQpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubWF0Y2hlZENvbnRlbnQubGVuZ3RoCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIDAKICAgICAgfQogICAgfSwKICAgIHNvdXJjZTFQZXJjZW50TWF0Y2hlZCAoKSB7CiAgICAgIGlmICh0aGlzLnNvdXJjZTFUb3RhbFJlY29yZHMgPT09IDApIHsKICAgICAgICByZXR1cm4gMAogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBwYXJzZUZsb2F0KAogICAgICAgICAgKCh0aGlzLnNvdXJjZTFUb3RhbE1hdGNoZWQgKiAxMDApIC8gdGhpcy5zb3VyY2UxVG90YWxSZWNvcmRzKS50b0ZpeGVkKAogICAgICAgICAgICAxCiAgICAgICAgICApCiAgICAgICAgKQogICAgICB9CiAgICB9LAogICAgc291cmNlMVRvdGFsVW5NYXRjaGVkICgpIHsKICAgICAgcmV0dXJuIHRoaXMuc291cmNlMVRvdGFsUmVjb3JkcyAtIHRoaXMuc291cmNlMVRvdGFsTWF0Y2hlZAogICAgfSwKICAgIHNvdXJjZTFQZXJjZW50VW5NYXRjaGVkICgpIHsKICAgICAgaWYgKHRoaXMuc291cmNlMVRvdGFsUmVjb3JkcyA9PT0gMCkgewogICAgICAgIHJldHVybiAwCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoCiAgICAgICAgICAoCiAgICAgICAgICAgICh0aGlzLnNvdXJjZTFUb3RhbFVuTWF0Y2hlZCAqIDEwMCkgLwogICAgICAgICAgICB0aGlzLnNvdXJjZTFUb3RhbFJlY29yZHMKICAgICAgICAgICkudG9GaXhlZCgxKQogICAgICAgICkKICAgICAgfQogICAgfSwKICAgIHRvdGFsRmxhZ2dlZCAoKSB7CiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5mbGFnZ2VkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmZsYWdnZWQubGVuZ3RoCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIDAKICAgICAgfQogICAgfSwKICAgIHNvdXJjZTFQZXJjZW50RmxhZ2dlZCAoKSB7CiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5zY29yZVJlc3VsdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIDAKICAgICAgfSBlbHNlIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5mbGFnZ2VkKSB7CiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoCiAgICAgICAgICAoCiAgICAgICAgICAgICh0aGlzLiRzdG9yZS5zdGF0ZS5mbGFnZ2VkLmxlbmd0aCAqIDEwMCkgLwogICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5zY29yZVJlc3VsdHMubGVuZ3RoCiAgICAgICAgICApLnRvRml4ZWQoMSkKICAgICAgICApCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIDAKICAgICAgfQogICAgfSwKICAgIHNvdXJjZTFUb3RhbE5vTWF0Y2ggKCkgewogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUubm9NYXRjaENvbnRlbnQpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubm9NYXRjaENvbnRlbnQubGVuZ3RoCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIDAKICAgICAgfQogICAgfSwKICAgIHNvdXJjZTFUb3RhbElnbm9yZSAoKSB7CiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5pZ25vcmVDb250ZW50KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmlnbm9yZUNvbnRlbnQubGVuZ3RoCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIDAKICAgICAgfQogICAgfSwKICAgIHNvdXJjZTFQZXJjZW50Tm9NYXRjaCAoKSB7CiAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5zY29yZVJlc3VsdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIDAKICAgICAgfSBlbHNlIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5ub01hdGNoQ29udGVudCkgewogICAgICAgIHJldHVybiBwYXJzZUZsb2F0KAogICAgICAgICAgKAogICAgICAgICAgICAodGhpcy4kc3RvcmUuc3RhdGUubm9NYXRjaENvbnRlbnQubGVuZ3RoICogMTAwKSAvCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNjb3JlUmVzdWx0cy5sZW5ndGgKICAgICAgICAgICkudG9GaXhlZCgxKQogICAgICAgICkKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gMAogICAgICB9CiAgICB9LAogICAgc291cmNlMVBlcmNlbnRJZ25vcmUgKCkgewogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuc2NvcmVSZXN1bHRzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiAwCiAgICAgIH0gZWxzZSBpZiAodGhpcy4kc3RvcmUuc3RhdGUuaWdub3JlQ29udGVudCkgewogICAgICAgIHJldHVybiBwYXJzZUZsb2F0KAogICAgICAgICAgKAogICAgICAgICAgICAodGhpcy4kc3RvcmUuc3RhdGUuaWdub3JlQ29udGVudC5sZW5ndGggKiAxMDApIC8KICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuc2NvcmVSZXN1bHRzLmxlbmd0aAogICAgICAgICAgKS50b0ZpeGVkKDEpCiAgICAgICAgKQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAwCiAgICAgIH0KICAgIH0sCiAgICBzb3VyY2UyVG90YWxSZWNvcmRzICgpIHsKICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTJUb3RhbFJlY29yZHMpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMlRvdGFsUmVjb3JkcwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAwCiAgICAgIH0KICAgIH0sCiAgICBzb3VyY2UyVG90YWxVbm1hdGNoZWQgKCkgewogICAgICBpZiAodGhpcy5zb3VyY2UyVG90YWxSZWNvcmRzID4gMCAmJiB0aGlzLiRzdG9yZS5zdGF0ZS5tYXRjaGVkQ29udGVudCkgewogICAgICAgIHJldHVybiAoCiAgICAgICAgICBwYXJzZUludCh0aGlzLnNvdXJjZTJUb3RhbFJlY29yZHMpIC0KICAgICAgICAgIHBhcnNlSW50KHRoaXMuJHN0b3JlLnN0YXRlLm1hdGNoZWRDb250ZW50Lmxlbmd0aCkKICAgICAgICApCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIDAKICAgICAgfQogICAgfSwKICAgIHNvdXJjZTJQZXJjZW50VW5tYXRjaGVkICgpIHsKICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTJUb3RhbFJlY29yZHMgPT09IDApIHsKICAgICAgICByZXR1cm4gMAogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBwYXJzZUZsb2F0KAogICAgICAgICAgKAogICAgICAgICAgICAodGhpcy5zb3VyY2UyVG90YWxVbm1hdGNoZWQgKiAxMDApIC8KICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMlRvdGFsUmVjb3JkcwogICAgICAgICAgKS50b0ZpeGVkKDEpCiAgICAgICAgKQogICAgICB9CiAgICB9LAogICAgc291cmNlMlBlcmNlbnRGbGFnZ2VkICgpIHsKICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTJUb3RhbFJlY29yZHMgPT09IDApIHsKICAgICAgICByZXR1cm4gMAogICAgICB9IGVsc2UgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmZsYWdnZWQpIHsKICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCgKICAgICAgICAgICgKICAgICAgICAgICAgKHRoaXMuJHN0b3JlLnN0YXRlLmZsYWdnZWQubGVuZ3RoICogMTAwKSAvCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnNvdXJjZTJUb3RhbFJlY29yZHMKICAgICAgICAgICkudG9GaXhlZCgxKQogICAgICAgICkKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gMAogICAgICB9CiAgICB9LAogICAgc291cmNlMlRvdGFsTWF0Y2hlZCAoKSB7CiAgICAgIHJldHVybiB0aGlzLnNvdXJjZTFUb3RhbE1hdGNoZWQKICAgIH0sCiAgICBzb3VyY2UyUGVyY2VudE1hdGNoZWQgKCkgewogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMlRvdGFsUmVjb3JkcyA9PT0gMCkgewogICAgICAgIHJldHVybiAwCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoCiAgICAgICAgICAoCiAgICAgICAgICAgICh0aGlzLnNvdXJjZTJUb3RhbE1hdGNoZWQgKiAxMDApIC8KICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuc291cmNlMlRvdGFsUmVjb3JkcwogICAgICAgICAgKS50b0ZpeGVkKDEpCiAgICAgICAgKQogICAgICB9CiAgICB9LAogICAgc291cmNlMk5vdEluU291cmNlMSAoKSB7CiAgICAgIHZhciBtaXNzaW5nID0gdGhpcy5zb3VyY2UyVG90YWxSZWNvcmRzIC0gdGhpcy5zb3VyY2UxVG90YWxSZWNvcmRzCiAgICAgIGlmIChtaXNzaW5nIDwgMCkgewogICAgICAgIHJldHVybiAwCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG1pc3NpbmcKICAgICAgfQogICAgfSwKICAgIHNvdXJjZTJQZXJjZW50Tm90SW5Tb3VyY2UxICgpIHsKICAgICAgaWYgKHRoaXMuc291cmNlMk5vdEluU291cmNlMSA9PT0gMCkgewogICAgICAgIHJldHVybiAwCiAgICAgIH0KICAgICAgdmFyIHBlcmNlbnQgPSBwYXJzZUZsb2F0KAogICAgICAgICgodGhpcy5zb3VyY2UyTm90SW5Tb3VyY2UxICogMTAwKSAvIHRoaXMuc291cmNlMlRvdGFsUmVjb3JkcykudG9GaXhlZCgxKQogICAgICApCiAgICAgIHJldHVybiBwYXJzZUZsb2F0KHBlcmNlbnQpCiAgICB9CiAgfSwKICBjcmVhdGVkICgpIHsKICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5yZWNhbGN1bGF0ZVNjb3JlcykgewogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5yZWNhbGN1bGF0ZVNjb3JlcyA9IGZhbHNlCiAgICAgIHRoaXMuZ2V0U2NvcmVzKGZhbHNlKQogICAgfQogICAgZXZlbnRCdXMuJG9uKCdjaGFuZ2VDU1ZIZWFkZXJOYW1lcycsICgpID0+IHsKICAgICAgbGV0IGxldmVsTmFtZSA9IHRoaXMudHJhbnNsYXRlRGF0YUhlYWRlcigKICAgICAgICAnc291cmNlMScsCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUucmVjb0xldmVsCiAgICAgICkKICAgICAgdGhpcy5uZXh0TGV2ZWxUZXh0ID0gbGV2ZWxOYW1lCiAgICAgIHRoaXMuY3VycmVudExldmVsVGV4dCA9IGxldmVsTmFtZQogICAgfSkKICAgIHRoaXMuYWRkTGlzdGVuZXIoKQogICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnJlY29MZXZlbCA9PT0gdGhpcy4kc3RvcmUuc3RhdGUudG90YWxTb3VyY2UxTGV2ZWxzKSB7CiAgICAgIHRoaXMuZGlhbG9nV2lkdGggPSAnYXV0bycKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuZGlhbG9nV2lkdGggPSAnMTUwMHB4JwogICAgfQogICAgLy8gVGhpcyBpcyBuZWVkZWQgYmVjYXVzZSB0aGUgdHJlZSBkb2Vzbid0IHNob3cgdXAgb24gdGhlIGluaXRpYWwgcGFnZSBsb2FkIHdpdGhvdXQgaXQKICAgIHRoaXMuc291cmNlMVRyZWVVcGRhdGUrKwogIH0sCiAgY29tcG9uZW50czogewogICAgJ2xpcXVvci10cmVlJzogTGlxdW9yVHJlZSwKICAgICdhcHBSZWNvRXhwb3J0JzogUmVjb25jaWxpYXRpb25FeHBvcnQKICB9Cn0K"},{"version":3,"sources":["FacilityReconScores.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0pCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FacilityReconScores.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container fluid>\n    <template v-if='$store.state.uploadRunning'><br><br><br>\n      <v-alert\n        type=\"info\"\n        :value=\"true\"\n      >\n        <b>Wait for upload to finish ...</b>\n        <v-progress-linear\n          indeterminate\n          color=\"white\"\n          class=\"mb-0\"\n        ></v-progress-linear>\n      </v-alert>\n    </template>\n    <v-container\n      fluid\n      grid-list-lg\n      v-if='!$store.state.denyAccess & !$store.state.uploadRunning'\n    >\n      <v-dialog\n        v-model=\"$store.state.scoresProgressData.scoreDialog\"\n        hide-overlay\n        persistent\n        width=\"350\"\n      >\n        <v-card\n          color=\"white\"\n          dark\n        >\n          <v-card-text>\n            <center>\n              <font style=\"color:blue\">{{$store.state.scoresProgressData.scoreProgressTitle}}</font><br>\n              <v-progress-circular\n                :rotate=\"-90\"\n                :size=\"100\"\n                :width=\"15\"\n                :value=\"$store.state.scoresProgressData.scoreProgressPercent\"\n                color=\"primary\"\n                v-if=\"$store.state.scoresProgressData.progressType == 'percent'\"\n              >\n                <v-avatar\n                  color=\"indigo\"\n                  size=\"50px\"\n                >\n                  <span class=\"white--text\">\n                    <b>{{ $store.state.scoresProgressData.scoreProgressPercent }}%</b>\n                  </span>\n                </v-avatar>\n              </v-progress-circular>\n              <v-progress-linear\n                indeterminate\n                color=\"red\"\n                class=\"mb-0\"\n                v-if=\"$store.state.scoresProgressData.progressType == 'indeterminate'\"\n              ></v-progress-linear>\n            </center>\n          </v-card-text>\n        </v-card>\n      </v-dialog>\n      <v-dialog\n        persistent\n        v-model=\"alert\"\n        width=\"500px\"\n      >\n        <v-card>\n          <v-toolbar\n            color=\"primary\"\n            dark\n          >\n            <v-toolbar-title>\n              {{alertTitle}}\n            </v-toolbar-title>\n          </v-toolbar>\n          <v-card-text>\n            {{alertText}}\n          </v-card-text>\n          <v-card-actions>\n            <v-btn\n              color=\"success\"\n              @click='alert = false'\n            >OK</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n      <v-dialog\n        persistent\n        v-model=\"flagCommentDialog\"\n        width=\"500px\"\n      >\n        <v-card>\n          <v-toolbar\n            color=\"primary\"\n            dark\n          >\n            <v-toolbar-title>\n              Add comment for this flag if any\n            </v-toolbar-title>\n          </v-toolbar>\n          <v-card-text>\n            <v-textarea\n              v-model=\"flagComment\"\n              auto-grow\n              box\n              color=\"deep-purple\"\n              label=\"Flag Comment\"\n              rows=\"1\"\n            ></v-textarea>\n          </v-card-text>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"success\"\n              @click='saveMatch'\n            >Continue</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n      <v-dialog\n        persistent\n        transition=\"scale-transition\"\n        v-model=\"dialog\"\n        :width=\"dialogWidth\"\n        height=\"auto\"\n      >\n        <v-card :width='dialogWidth' height=\"auto\">\n          <v-toolbar\n            color=\"primary\"\n            dark\n          >\n            <v-toolbar-title>\n              Matching {{ selectedSource1Name }} {{dialogWidth}}\n            </v-toolbar-title>\n            <v-spacer></v-spacer>\n            <v-text-field\n              v-model=\"searchPotential\"\n              append-icon=\"mdi-magnify\"\n              label=\"Search\"\n              single-line\n              hide-details\n              color=\"yellow\"\n            />\n            <v-btn\n              icon\n              dark\n              @click.native=\"back\"\n            >\n              <v-icon>mdi-close</v-icon>\n            </v-btn>\n          </v-toolbar>\n          <v-card-title>\n            Parents:\n            <b>{{selectedSource1Parents | joinParentsAndReverse}}</b>\n            <v-spacer></v-spacer>\n            <template v-if='$store.state.recoLevel == $store.state.totalSource1Levels'>\n              Latitude:\n              <b>{{selectedSource1Lat}}</b>\n              <v-spacer></v-spacer>\n              Longitude:\n              <b>{{selectedSource1Long}}</b>\n              <v-spacer></v-spacer>\n            </template>\n          </v-card-title>\n          <v-card-text>\n            <v-data-table\n              :headers=\"potentialHeaders\"\n              :items=\"allPotentialMatches\"\n              :search=\"searchPotential\"\n              class=\"elevation-1\"\n            >\n              <template\n                slot=\"headers\"\n              >\n                <tr>\n                  <template v-for='header in potentialHeaders'>\n                    <th\n                      :key='header.text'\n                      align='left'\n                      v-if=\"header.text == 'Score'\"\n                      class=\"column sortable active\"\n                      @click=\"changeSort(header.value)\"\n                    >\n                      <v-icon\n                        small\n                        v-if=\"sort_arrow == 'up'\"\n                      >mdi-arrow-up</v-icon>\n                      <v-icon\n                        small\n                        v-else\n                      >mdi-arrow-down</v-icon>\n                      {{header.text}}\n                      <v-tooltip top>\n                        <template v-slot:activator=\"{ on }\">\n                          <v-btn\n                            v-on=\"on\"\n                            icon\n                          >\n                            <v-icon>mdi-help</v-icon>\n                          </v-btn>\n                        </template>\n                        <span>The lower the score, the better the match</span>\n                      </v-tooltip>\n                    </th>\n                    <th\n                      :key='header.text'\n                      align='left'\n                      v-else\n                    >\n                      {{header.text}}\n                    </th>\n                  </template>\n                </tr>\n              </template>\n              <template\n                v-slot:item=\"{ item }\"\n              >\n                <tr>\n                  <td>\n                    <v-tooltip top>\n                      <template v-slot:activator=\"{ on }\">\n                        <v-btn\n                          color=\"error\"\n                          small\n                          @click.native=\"match('flag', item.id, item.name, item.source2IdHierarchy, item.mappedParentName)\"\n                          v-on=\"on\"\n                        >\n                          <v-icon\n                            dark\n                            left\n                          >mdi-bell</v-icon>Flag\n                        </v-btn>\n                      </template>\n                      <span>Mark the selected item as a match to be reviewed</span>\n                    </v-tooltip>\n                    |\n                    <v-tooltip top>\n                      <template v-slot:activator=\"{ on }\">\n                        <v-btn\n                          color=\"primary\"\n                          small\n                          dark\n                          @click.native=\"match('match', item.id, item.name, item.source2IdHierarchy)\"\n                          v-on=\"on\"\n                        >\n                          <v-icon left>mdi-thumb-up</v-icon>Save Match\n                        </v-btn>\n                      </template>\n                      <span>Save the selected item as a match</span>\n                    </v-tooltip>\n                  </td>\n                  <td>{{item.name}}</td>\n                  <td>{{item.id}}</td>\n                  <td>{{item.parents | joinParentsAndReverse}}</td>\n                  <td v-if='$store.state.recoLevel == $store.state.totalSource1Levels'>{{item.geoDistance}}</td>\n                  <td>{{item.score}}</td>\n                  <td>{{potentialMatchComment(item)}}</td>\n                </tr>\n              </template>\n            </v-data-table>\n          </v-card-text>\n          <v-card-actions style='float: center'>\n            <v-layout\n              row\n              wrap\n            >\n              <v-flex xs2>\n                <v-tooltip top>\n                  <template v-slot:activator=\"{ on }\">\n                    <v-btn\n                      color=\"green\"\n                      dark\n                      @click.native=\"noMatch('nomatch')\"\n                      v-on=\"on\"\n                    >\n                      <v-icon left>mdi-thumb-down</v-icon>No Match\n                    </v-btn>\n                  </template>\n                  <span>Save this Source 1 location as having no match</span>\n                </v-tooltip>\n              </v-flex>\n              <v-flex xs2>\n                <v-tooltip top>\n                  <template v-slot:activator=\"{ on }\">\n                    <v-btn\n                      color=\"error\"\n                      dark\n                      @click.native=\"noMatch('ignore')\"\n                      v-on=\"on\"\n                    >\n                      <v-icon left>mdi-thumb-down</v-icon>Ignore\n                    </v-btn>\n                  </template>\n                  <span>Mark this source 1 location as being ignored</span>\n                </v-tooltip>\n              </v-flex>\n              <v-flex xs2>\n                <v-tooltip top>\n                  <template v-slot:activator=\"{ on }\">\n                    <v-btn\n                      v-if='potentialAvailable'\n                      color=\"teal darken-6\"\n                      style=\"color: white\"\n                      v-on=\"on\"\n                      @click=\"showAllPotential = !showAllPotential\"\n                    >\n                      <template v-if=\"showAllPotential\">Show Scored Suggestions</template>\n                      <template v-else>\n                        <v-icon left>mdi-eye</v-icon>\n                        Show All Suggestions\n                      </template>\n                    </v-btn>\n                  </template>\n                  <span v-if=\"showAllPotential\">Limit to only scored suggestions</span>\n                  <span v-else>See all possible choices ignoring the score</span>\n                </v-tooltip>\n              </v-flex>\n              <v-flex\n                xs6\n                text-sm-right\n              >\n                <v-tooltip top>\n                  <template v-slot:activator=\"{ on }\">\n                    <v-btn\n                      color=\"orange darken-2\"\n                      @click.native=\"back\"\n                      style=\"color: white\"\n                      v-on=\"on\"\n                    >\n                      <v-icon\n                        dark\n                        left\n                      >mdi-arrow-left</v-icon>Back\n                    </v-btn>\n                  </template>\n                  <span>Return without saving</span>\n                </v-tooltip>\n              </v-flex>\n            </v-layout>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n      <v-layout\n        row\n        wrap\n      >\n        <v-flex xs3>\n          <appRecoExport></appRecoExport>\n        </v-flex>\n        <v-spacer></v-spacer>\n        <v-flex xs2>\n          <b>Reconciling {{currentLevelText}}</b>\n        </v-flex>\n        <v-spacer></v-spacer>\n        <v-flex\n          xs1\n          sm2\n          md2\n          right\n        >\n          <v-select\n            :items=\"$store.state.levelArray\"\n            v-model=\"$store.state.recoLevel\"\n            :item-value='$store.state.levelArray.value'\n            :item-name='$store.state.levelArray.text'\n            label=\"Level\"\n            single-line\n            @change=\"levelChanged\"\n          >\n          </v-select>\n        </v-flex>\n        <v-flex xs2>\n          <template v-if='!$store.state.scoreSavingProgressData.savingMatches'>\n            <template>\n              <v-btn\n                color=\"primary\"\n                dark\n                @click=\"getScores(false)\"\n                rounded\n              >\n                <v-icon>mdi-repeat-once</v-icon> Recalculate Scores\n              </v-btn>\n            </template>\n          </template>\n          <template v-else>\n            Saving matches for {{translateDataHeader('source1', $store.state.recoLevel - 1)}}\n            <v-progress-linear\n              v-if='!saveProgressTimedout'\n              color=\"error\"\n              width=\"20\"\n              height=\"20\"\n              :value=\"$store.state.scoreSavingProgressData.percent\"\n            >\n              <center>\n                <span class=\"green--text\"><b>{{$store.state.scoreSavingProgressData.percent}}%</b></span>\n              </center>\n            </v-progress-linear>\n            <v-progress-linear\n              v-else\n              indeterminate\n              color=\"red\"\n            ></v-progress-linear>\n          </template>\n        </v-flex>\n        <v-flex\n          xs1\n          text-xs-right\n        >\n          <v-tooltip top>\n            <template v-slot:activator=\"{ on }\">\n              <v-btn\n                class=\"mx-1\"\n                fab\n                dark\n                x-small\n                color=\"primary\"\n                @click=\"helpDialog = true\"\n                v-on=\"on\"\n              >\n                <v-icon>mdi-help</v-icon>\n              </v-btn>\n            </template>\n            <span>Help</span>\n          </v-tooltip>\n        </v-flex>\n      </v-layout>\n      <v-dialog\n        v-model=\"helpDialog\"\n        scrollable\n        persistent\n        :overlay=\"false\"\n        max-width=\"700px\"\n        transition=\"dialog-transition\"\n      >\n        <v-card>\n          <v-toolbar\n            color=\"primary\"\n            dark\n          >\n            <v-toolbar-title>\n              <v-icon>mdi-information</v-icon> About this page\n            </v-toolbar-title>\n            <v-spacer></v-spacer>\n            <v-btn\n              icon\n              dark\n              @click.native=\"helpDialog = false\"\n            >\n              <v-icon>mdi-close</v-icon>\n            </v-btn>\n          </v-toolbar>\n          <v-card-text>\n            This page let you map source 1 data with those in source2\n            <v-list>\n              1. Source 1 refer to the data source name selected as source 1 under data source pair section\n            </v-list>\n            <v-list>\n              2. Source 2 refer to the data source name selected as source 2 under data source pair section\n            </v-list>\n            <v-list>\n              3. After breaking a match, you will need to recalculate scores for the app to load potential matches of the broken location\n            </v-list>\n            <v-list>\n              4. FLAGGED Locations are the locations that will need to be reviewed before they are saved as matches\n            </v-list>\n            <v-list>\n              5. NO MATCHES - these are locations that do not matches anything from source 2\n            </v-list>\n          </v-card-text>\n        </v-card>\n      </v-dialog>\n      <v-layout\n        row\n        wrap\n      >\n        <v-flex\n          xs2\n          right\n        >\n          <div style=\"border-style: solid;border-color:green; text-align: center;\">\n            <b>Source 1 Reconciliation Status</b>\n\n            <v-layout\n              row\n              wrap\n            >\n              <v-flex xs6>\n                <v-layout column>\n                  <v-flex>\n                    <b>Matched</b>\n                  </v-flex>\n                  <v-flex align-center>\n                    <center>\n                      <b>{{source1TotalMatched}}/{{source1TotalRecords}}</b>\n                    </center>\n                  </v-flex>\n                  <v-flex>\n                    <center>\n                      <v-progress-circular\n                        :rotate=\"-90\"\n                        :size=\"65\"\n                        :width=\"8\"\n                        :value=\"source1PercentMatched\"\n                        color=\"green\"\n                      >\n                        <font color=\"black\">\n                          <b>{{ source1PercentMatched }}%</b>\n                        </font>\n                      </v-progress-circular>\n                    </center>\n                  </v-flex>\n                </v-layout>\n              </v-flex>\n              <v-flex xs6>\n                <v-layout column>\n                  <v-flex align-center>\n                    <b>Unmatched</b>\n                  </v-flex>\n                  <v-flex xs1>\n                    <center>\n                      <b>{{source1TotalUnMatched}}/{{source1TotalRecords}}</b>\n                    </center>\n                  </v-flex>\n                  <v-flex\n                    xs1\n                    align-center\n                  >\n                    <center>\n                      <v-progress-circular\n                        :rotate=\"-90\"\n                        :size=\"65\"\n                        :width=\"8\"\n                        :value=\"source1PercentUnMatched\"\n                        color=\"red\"\n                      >\n                        <font color=\"black\">\n                          <b>{{source1PercentUnMatched}}%</b>\n                        </font>\n                      </v-progress-circular>\n                    </center>\n                  </v-flex>\n                </v-layout>\n              </v-flex>\n            </v-layout>\n            <v-layout\n              row\n              wrap\n            >\n              <v-flex xs6>\n                <v-layout column>\n                  <v-flex align-center>\n                    <b>Flagged</b>\n                  </v-flex>\n                  <v-flex xs1>\n                    <center>\n                      <b>{{totalFlagged}}/{{source1TotalRecords}}</b>\n                    </center>\n                  </v-flex>\n                  <v-flex\n                    xs1\n                    align-center\n                  >\n                    <center>\n                      <v-progress-circular\n                        :rotate=\"-90\"\n                        :size=\"65\"\n                        :width=\"8\"\n                        :value=\"source1PercentFlagged\"\n                        color=\"orange\"\n                      >\n                        <font color=\"black\">\n                          <b>{{source1PercentFlagged}}%</b>\n                        </font>\n                      </v-progress-circular>\n                    </center>\n                  </v-flex>\n                </v-layout>\n              </v-flex>\n              <v-flex xs6>\n                <v-layout column>\n                  <v-flex align-center>\n                    <b>No Match</b>\n                  </v-flex>\n                  <v-flex xs1>\n                    <center>\n                      <b>{{source1TotalNoMatch}}/{{source1TotalRecords}}</b>\n                    </center>\n                  </v-flex>\n                  <v-flex\n                    xs1\n                    align-center\n                  >\n                    <center>\n                      <v-progress-circular\n                        :rotate=\"-90\"\n                        :size=\"65\"\n                        :width=\"8\"\n                        :value=\"source1PercentNoMatch\"\n                        color=\"red\"\n                      >\n                        <font color=\"black\">\n                          <b>{{source1PercentNoMatch}}%</b>\n                        </font>\n                      </v-progress-circular>\n                    </center>\n                  </v-flex>\n                </v-layout>\n              </v-flex>\n            </v-layout>\n          </div>\n        </v-flex>\n        <v-flex\n          xs4\n          child-flex\n        >\n          <v-card color=\"green lighten-2\">\n            <v-card-title primary-title>\n              Source 1 Unmatched\n              <v-spacer></v-spacer>\n              <v-text-field\n                v-model=\"searchUnmatchedSource1\"\n                append-icon=\"mdi-magnify\"\n                label=\"Search\"\n                single-line\n                hide-details\n              ></v-text-field>\n            </v-card-title>\n            <template v-if='!loadingSource1Unmatched'>\n              <liquor-tree\n                :data=\"source1Tree\"\n                ref=\"source1Tree\"\n                :key=\"source1TreeUpdate\"\n              />\n              <v-data-table\n                :headers=\"source1GridHeaders\"\n                :items=\"source1Grid\"\n                :search=\"searchUnmatchedSource1\"\n                light\n                class=\"elevation-1\"\n              >\n                <template\n                  v-slot:item=\"{ item }\"\n                >\n                  <tr>\n                    <td\n                      v-if=\"$store.state.recoStatus === 'Done'\"\n                      :key='item.id'\n                    >{{item.name}}</td>\n                    <td\n                      v-else\n                      @click=\"getPotentialMatch(item.id)\"\n                      style=\"cursor: pointer\"\n                      :key='item.id'\n                    >{{item.name}}</td>\n                    <td\n                      v-for=\"(parent,index) in item.parents\"\n                      :key='item.id+index'\n                    >\n                      <template v-if='index != item.parents.length-1'>\n                        {{parent}}\n                      </template>\n                    </td>\n                  </tr>\n                </template>\n              </v-data-table>\n            </template>\n            <template v-else>\n              <v-progress-linear\n                :size=\"70\"\n                indeterminate\n                color=\"amber\"\n              ></v-progress-linear>\n            </template>\n          </v-card>\n        </v-flex>\n        <v-flex xs4>\n          <v-card\n            color=\"blue lighten-2\"\n            dark\n          >\n            <v-card-title primary-title>\n              Source 2 Unmatched\n              <v-spacer></v-spacer>\n              <v-text-field\n                v-model=\"searchUnmatchedSource2\"\n                append-icon=\"mdi-magnify\"\n                label=\"Search\"\n                single-line\n                hide-details\n              ></v-text-field>\n            </v-card-title>\n            <template v-if='!loadingSource2Unmatched'>\n              <v-data-table\n                :headers=\"source1UnmatchedHeaders\"\n                :items=\"$store.state.source2UnMatched\"\n                :search=\"searchUnmatchedSource2\"\n                light\n                class=\"elevation-1\"\n              >\n                <template\n                  v-slot:item=\"{ item }\"\n                >\n                  <tr>\n                    <td>{{item.name}} <br>&ensp;&ensp;{{item.parents | joinParentsAndReverse}}</td>\n                  </tr>\n                </template>\n              </v-data-table>\n            </template>\n            <template v-else>\n              <v-progress-linear\n                :size=\"70\"\n                indeterminate\n                color=\"amber\"\n              ></v-progress-linear>\n            </template>\n          </v-card>\n        </v-flex>\n\n        <v-flex\n          xs2\n          right\n        >\n          <div style='border-style: solid;border-color: green; text-align: center;'>\n            <b>Source 2 Reconciliation Status</b>\n            <v-layout\n              row\n              wrap\n            >\n              <v-flex xs6>\n                <v-layout column>\n                  <v-flex align-center>\n                    <b>Matched</b>\n                  </v-flex>\n                  <v-flex xs1>\n                    <center>\n                      <b>{{source2TotalMatched}}/{{source2TotalRecords}}</b>\n                    </center>\n                  </v-flex>\n                  <v-flex\n                    xs1\n                    align-center\n                  >\n                    <center>\n                      <v-progress-circular\n                        :rotate=\"-90\"\n                        :size=\"65\"\n                        :width=\"8\"\n                        :value=\"source2PercentMatched\"\n                        color=\"green\"\n                      >\n                        <font color=\"black\">\n                          <b>{{source2PercentMatched}}%</b>\n                        </font>\n                      </v-progress-circular>\n                    </center>\n                  </v-flex>\n                </v-layout>\n              </v-flex>\n              <v-flex xs6>\n                <v-layout column>\n                  <v-flex xs1>\n                    <b>Unmatched</b>\n                  </v-flex>\n                  <v-flex\n                    xs1\n                    align-center\n                  >\n                    <center>\n                      <b>{{source2TotalUnmatched}}/{{source2TotalRecords}}</b>\n                    </center>\n                  </v-flex>\n                  <v-flex xs1>\n                    <center>\n                      <v-progress-circular\n                        :rotate=\"-90\"\n                        :size=\"65\"\n                        :width=\"8\"\n                        :value=\"source2PercentUnmatched\"\n                        color=\"red\"\n                      >\n                        <font color=\"black\">\n                          <b>{{ source2PercentUnmatched }}%</b>\n                        </font>\n                      </v-progress-circular>\n                    </center>\n                  </v-flex>\n                </v-layout>\n              </v-flex>\n            </v-layout>\n            <v-layout\n              row\n              wrap\n            >\n              <v-flex xs6>\n                <v-layout column>\n                  <v-flex align-center>\n                    <b>Flagged</b>\n                  </v-flex>\n                  <v-flex xs1>\n                    <center>\n                      <b>{{totalFlagged}}/{{source2TotalRecords}}</b>\n                    </center>\n                  </v-flex>\n                  <v-flex\n                    xs1\n                    align-center\n                  >\n                    <center>\n                      <v-progress-circular\n                        :rotate=\"-90\"\n                        :size=\"65\"\n                        :width=\"8\"\n                        :value=\"source2PercentFlagged\"\n                        color=\"orange\"\n                      >\n                        <font color=\"black\">\n                          <b>{{source2PercentFlagged}}%</b>\n                        </font>\n                      </v-progress-circular>\n                    </center>\n                  </v-flex>\n                </v-layout>\n              </v-flex>\n              <v-flex xs6>\n                <v-layout column>\n                  <v-flex align-center>\n                    <b>Not in Source 1</b>\n                  </v-flex>\n                  <v-flex xs1>\n                    <center>\n                      <b>{{source2NotInSource1}}</b>\n                    </center>\n                  </v-flex>\n                  <v-flex\n                    xs1\n                    align-center\n                  >\n                    <center>\n                      <v-progress-circular\n                        :rotate=\"-90\"\n                        :size=\"65\"\n                        :width=\"8\"\n                        :value=\"source2PercentNotInSource1\"\n                        color=\"red\"\n                      >\n                        <font color=\"black\">\n                          <b>{{source2PercentNotInSource1}}%</b>\n                        </font>\n                      </v-progress-circular>\n                    </center>\n                  </v-flex>\n                </v-layout>\n              </v-flex>\n            </v-layout>\n          </div>\n        </v-flex>\n      </v-layout>\n      <v-layout\n        column\n        wrap\n      >\n        <v-tabs\n          icons-and-text\n          centered\n          grow\n          dark\n          background-color=\"cyan\"\n        >\n          <v-tabs-slider color=\"red\"></v-tabs-slider>\n          <v-tab key=\"match\">\n            MATCHED ({{source1TotalMatched}})\n            <v-icon\n              color=\"white\"\n              right\n            >mdi-thumb-up</v-icon>\n          </v-tab>\n          <v-tab key=\"nomatch\">\n            NO MATCH ({{source1TotalNoMatch}})\n            <v-icon\n              color=\"white\"\n              right\n            >mdi-thumb-down</v-icon>\n          </v-tab>\n          <v-tab key=\"ignore\">\n            IGNORED ({{source1TotalIgnore}})\n            <v-icon\n              color=\"white\"\n              right\n            >mdi-thumb-down</v-icon>\n          </v-tab>\n          <v-tab key=\"flagged\">\n            FLAGGED ({{totalFlagged}})\n            <v-icon\n              color=\"white\"\n              right\n            >mdi-bell</v-icon>\n          </v-tab>\n          <v-tab-item key=\"match\">\n            <template v-if='$store.state.matchedContent != null'>\n              <v-text-field\n                v-model=\"searchMatched\"\n                append-icon=\"mdi-magnify\"\n                label=\"Search\"\n                single-line\n                hide-details\n              ></v-text-field>\n              <v-data-table\n                :headers=\"matchedHeaders\"\n                :items=\"$store.state.matchedContent\"\n                :search=\"searchMatched\"\n                class=\"elevation-1\"\n              >\n                <template\n                  v-slot:item=\"{ item }\"\n                >\n                  <tr>\n                    <td>{{item.source1Name}}</td>\n                    <td>{{item.source1Id}}</td>\n                    <td>{{item.source2Name}}</td>\n                    <td>\n                      <v-treeview :items=\"item.source2IdHierarchy\" />\n                    </td>\n                    <td v-if='item.matchComments'>{{item.matchComments.join(', ')}}</td>\n                    <td v-else></td>\n                    <td>\n                      <v-btn\n                        v-if=\"$store.state.recoStatus == 'Done'\"\n                        disabled\n                        color=\"error\"\n                        style='text-transform: none'\n                        small\n                        @click='breakMatch(item.source1Id)'\n                      >\n                        <v-icon>mdi-undo</v-icon>Break Match\n                      </v-btn>\n                      <v-btn\n                        v-else\n                        color=\"error\"\n                        style='text-transform: none'\n                        small\n                        @click='breakMatch(item.source1Id)'\n                      >\n                        <v-icon>mdi-undo</v-icon>Break Match\n                      </v-btn>\n                    </td>\n                  </tr>\n                </template>\n              </v-data-table>\n            </template>\n            <template v-else>\n              <v-progress-linear\n                :size=\"70\"\n                indeterminate\n                color=\"amber\"\n              ></v-progress-linear>\n            </template>\n          </v-tab-item>\n          <v-tab-item key=\"nomatch\">\n            <template v-if='$store.state.noMatchContent != null'>\n              <v-text-field\n                v-model=\"searchNotMatched\"\n                append-icon=\"mdi-magnify\"\n                label=\"Search\"\n                single-line\n                hide-details\n              ></v-text-field>\n              <v-data-table\n                :headers=\"noMatchHeaders\"\n                :items=\"$store.state.noMatchContent\"\n                :search=\"searchNotMatched\"\n                class=\"elevation-1\"\n              >\n                <template\n                  v-slot:item=\"{ item }\"\n                >\n                  <tr>\n                    <td>{{item.source1Name}}</td>\n                    <td>{{item.source1Id}}</td>\n                    <td>{{item.parents.join('->')}}</td>\n                    <td>\n                      <v-btn\n                        v-if=\"$store.state.recoStatus == 'Done'\"\n                        disabled\n                        color=\"error\"\n                        style='text-transform: none'\n                        small\n                        @click='breakNoMatch(item.source1Id, \"nomatch\")'\n                      >\n                        <v-icon>mdi-cached</v-icon>Break No Match\n                      </v-btn>\n                      <v-btn\n                        v-else\n                        color=\"error\"\n                        style='text-transform: none'\n                        small\n                        @click='breakNoMatch(item.source1Id, \"nomatch\")'\n                      >\n                        <v-icon>mdi-cached</v-icon>Break No Match\n                      </v-btn>\n                    </td>\n                  </tr>\n                </template>\n              </v-data-table>\n            </template>\n            <template v-else>\n              <v-progress-linear\n                :size=\"70\"\n                indeterminate\n                color=\"amber\"\n              ></v-progress-linear>\n            </template>\n          </v-tab-item>\n          <v-tab-item key=\"ignore\">\n            <template v-if='$store.state.ignoreContent != null'>\n              <v-text-field\n                v-model=\"searchIgnore\"\n                append-icon=\"mdi-magnify\"\n                label=\"Search\"\n                single-line\n                hide-details\n              ></v-text-field>\n              <v-data-table\n                :headers=\"noMatchHeaders\"\n                :items=\"$store.state.ignoreContent\"\n                :search=\"searchIgnore\"\n                class=\"elevation-1\"\n              >\n                <template\n                  v-slot:item=\"{ item }\"\n                >\n                  <td>{{item.source1Name}}</td>\n                  <td>{{item.source1Id}}</td>\n                  <td>{{item.parents.join('->')}}</td>\n                  <td>\n                    <v-btn\n                      v-if=\"$store.state.recoStatus == 'Done'\"\n                      disabled\n                      color=\"error\"\n                      style='text-transform: none'\n                      small\n                      @click='breakNoMatch(item.source1Id, \"ignore\")'\n                    >\n                      <v-icon>mdi-cached</v-icon>Break Ignore\n                    </v-btn>\n                    <v-btn\n                      v-else\n                      color=\"error\"\n                      style='text-transform: none'\n                      small\n                      @click='breakNoMatch(item.source1Id, \"ignore\")'\n                    >\n                      <v-icon>mdi-cached</v-icon>Break Ignore\n                    </v-btn>\n                  </td>\n                </template>\n              </v-data-table>\n            </template>\n            <template v-else>\n              <v-progress-linear\n                :size=\"70\"\n                indeterminate\n                color=\"amber\"\n              ></v-progress-linear>\n            </template>\n          </v-tab-item>\n          <v-tab-item key=\"flagged\">\n            <template v-if='$store.state.flagged != null'>\n              <v-text-field\n                v-model=\"searchFlagged\"\n                append-icon=\"mdi-magnify\"\n                label=\"Search\"\n                single-line\n                hide-details\n              ></v-text-field>\n              <v-data-table\n                :headers=\"flaggedHeaders\"\n                :items=\"$store.state.flagged\"\n                :search=\"searchFlagged\"\n                class=\"elevation-1\"\n              >\n                <template\n                  v-slot:item=\"{ item }\"\n                >\n                  <tr>\n                    <td>{{item.source1Name}}</td>\n                    <td>{{item.source1Id}}</td>\n                    <td>{{item.source2Name}}</td>\n                    <td>\n                      <v-treeview :items=\"item.source2IdHierarchy\" />\n                    </td>\n                    <td>{{item.flagComment}}</td>\n                    <td>\n                      <v-btn\n                        v-if=\"$store.state.recoStatus == 'Done'\"\n                        disabled\n                        color=\"primary\"\n                        style='text-transform: none'\n                        small\n                        @click='acceptFlag(item.source1Id)'\n                      >\n                        <v-icon>mdi-thumb-up</v-icon>Confirm Match\n                      </v-btn>\n                      <v-btn\n                        v-else\n                        color=\"primary\"\n                        style='text-transform: none'\n                        small\n                        @click='acceptFlag(item.source1Id)'\n                      >\n                        <v-icon>mdi-thumb-up</v-icon>Confirm Match\n                      </v-btn>\n                      <v-btn\n                        v-if=\"$store.state.recoStatus == 'Done'\"\n                        disabled\n                        color=\"error\"\n                        style='text-transform: none'\n                        small\n                        @click='unFlag(item.source1Id)'\n                      >\n                        <v-icon>mdi-cached</v-icon>Release\n                      </v-btn>\n                      <v-btn\n                        v-else\n                        color=\"error\"\n                        style='text-transform: none'\n                        small\n                        @click='unFlag(item.source1Id)'\n                      >\n                        <v-icon>mdi-cached</v-icon>Release\n                      </v-btn>\n                    </td>\n                  </tr>\n                </template>\n              </v-data-table>\n            </template>\n            <template v-else>\n              <v-progress-linear\n                :size=\"70\"\n                indeterminate\n                color=\"amber\"\n              />\n            </template>\n          </v-tab-item>\n        </v-tabs>\n      </v-layout>\n      <v-layout>\n        <v-flex\n          xs1\n          sm4\n          md2\n          v-if=\"goNextLevel == 'yes' && !$store.state.scoreSavingProgressData.savingMatches\"\n        >\n          <v-btn\n            color=\"primary\"\n            rounded\n            @click='levelChanged($store.state.recoLevel+1)'\n          >\n            <v-icon>mdi-forward</v-icon>Proceed to {{nextLevelText}}\n          </v-btn>\n        </v-flex>\n        <v-flex\n          xs1\n          sm4\n          md2\n          v-if=\"lastLevelDone == 'yes'\"\n        >\n          <v-btn\n            color=\"primary\"\n            rounded\n            @click='$router.push({name:\"FacilityRecoStatus\"})'\n          >\n            <v-icon>mdi-view-dashboard</v-icon>Reconciliation Status\n          </v-btn>\n        </v-flex>\n      </v-layout>\n    </v-container>\n  </v-container>\n</template>\n<script>\nimport axios from 'axios'\nimport LiquorTree from 'liquor-tree'\nimport { scoresMixin } from '../mixins/scoresMixin'\nimport { generalMixin } from '../mixins/generalMixin'\nimport { eventBus } from '../main'\nimport ReconciliationExport from './ReconciliationExport'\n\nexport default {\n  mixins: [scoresMixin, generalMixin],\n  data () {\n    return {\n      clientId: '',\n      flagCommentDialog: false,\n      flagComment: '',\n      helpDialog: false,\n      type: '',\n      source2Id: '',\n      source2Name: '',\n      sort_arrow: 'up',\n      pagination: { sortBy: 'score' },\n      recoLevel: 0,\n      searchUnmatchedSource2: '',\n      searchUnmatchedSource1: '',\n      searchPotential: '',\n      searchMatched: '',\n      searchNotMatched: '',\n      searchIgnore: '',\n      searchFlagged: '',\n      potentialMatches: [],\n      showAllPotential: false,\n      alertText: '',\n      alertTitle: '',\n      alert: false,\n      saveProgressTimedout: false,\n      source1Parents: {},\n      source1Filter: { text: '', level: '' },\n      source1TreeUpdate: 0,\n      selectedSource1: {},\n      selectedSource1Name: null,\n      selectedSource1Id: null,\n      selectedSource1Lat: null,\n      selectedSource1Long: null,\n      selectedSource1Parents: [],\n      dialog: false,\n      dialogWidth: '',\n      source1UnmatchedHeaders: [{ text: 'Location', value: 'name' }],\n      noMatchHeaders: [\n        { text: 'Source 1 Location', value: 'source1Name' },\n        { text: 'Source 1 ID', value: 'source1Id' },\n        { text: 'Parents', value: 'parents' }\n      ],\n      flaggedHeaders: [\n        { text: 'Source 1 Location', value: 'source1Name' },\n        { text: 'Source 1 ID', value: 'source1Id' },\n        { text: 'Source 2 Location', value: 'source2Name' },\n        { text: 'Source 2 ID', value: 'source2Id' },\n        { text: 'Comment', value: 'flagComment' }\n      ]\n    }\n  },\n  filters: {\n    removeCountry (parents) {\n      var parentsCopy = parents.slice(0)\n      parentsCopy.splice(parentsCopy.length - 1, 1)\n      return parentsCopy\n    },\n    joinParents (parents) {\n      return parents.join('->')\n    },\n    joinParentsAndReverse (parents) {\n      return [...parents].reverse().join('->')\n    }\n  },\n  methods: {\n    changeSort (column) {\n      if (this.pagination.sortBy === column) {\n        this.pagination.descending = !this.pagination.descending\n      } else {\n        this.pagination.sortBy = column\n        this.pagination.descending = false\n      }\n      if (this.pagination.descending) {\n        this.sort_arrow = 'mdi-down'\n      } else {\n        this.sort_arrow = 'mdi-up'\n      }\n    },\n    addListener () {\n      const setListener = () => {\n        if (this.$refs && this.$refs.source1Tree) {\n          this.$refs.source1Tree.$on('node:selected', node => {\n            this.source1Filter.text = node.data.text\n            let level = 1\n            while (node.parent) {\n              node = node.parent\n              level++\n            }\n            this.source1Filter.level = level\n          })\n        } else {\n          setTimeout(function () {\n            setListener()\n          }, 500)\n        }\n      }\n      setListener()\n    },\n    levelChanged (level) {\n      if (this.$store.state.recoLevel === level) {\n        return\n      }\n      this.$store.state.recoLevel = level\n      this.getScores(false)\n      if (\n        this.$store.state.recoLevel === this.$store.state.totalSource1Levels\n      ) {\n        this.dialogWidth = '1440px'\n      } else {\n        this.dialogWidth = '1190px'\n      }\n    },\n    getBuildingPotentialMatches (id) {\n      this.potentialMatches = []\n      let source1 = this.getSource1()\n      let source2 = this.getSource2()\n      let recoLevel = this.$store.state.recoLevel\n      let totalSource1Levels = this.$store.state.totalSource1Levels\n      let totalSource2Levels = this.$store.state.totalSource2Levels\n      if (this.clientId) {\n        let lastChar = this.clientId[this.clientId.length - 1]\n        lastChar = parseInt(lastChar)\n        lastChar += 1\n        this.clientId += lastChar\n      } else {\n        let lastChar = this.$store.state.clientId[this.$store.state.clientId.length - 1]\n        lastChar = parseInt(lastChar)\n        lastChar += 1\n        this.clientId = this.$store.state.clientId + lastChar\n      }\n\n      let sourcesOwner = this.getDatasourceOwner()\n      let userID = this.$store.state.activePair.userID._id\n      let source1Owner = sourcesOwner.source1Owner\n      let source2Owner = sourcesOwner.source2Owner\n      let source1LimitOrgId = this.getLimitOrgIdOnActivePair()\n        .source1LimitOrgId\n      let source2LimitOrgId = this.getLimitOrgIdOnActivePair()\n        .source2LimitOrgId\n      let parentConstraint = JSON.stringify(\n        this.$store.state.config.generalConfig.reconciliation.parentConstraint\n      )\n      let path = `id=${id}&source1=${source1}&source2=${source2}&source1Owner=${source1Owner}&source2Owner=${source2Owner}&source1LimitOrgId=${source1LimitOrgId}&source2LimitOrgId=${source2LimitOrgId}&totalSource1Levels=${totalSource1Levels}&totalSource2Levels=${totalSource2Levels}`\n      path +=\n        `&recoLevel=${recoLevel}&clientId=${this.clientId}&userID=${userID}&parentConstraint=` +\n        parentConstraint +\n        '&getPotential=' +\n        true\n      this.$store.state.dynamicProgress = true\n      this.$store.state.progressTitle = 'Getting potential matches from server'\n      axios\n        .get('/reconcile/?' + path)\n        .then(response => {\n          this.$store.state.dynamicProgress = false\n          if (response.data) {\n            let scores = JSON.parse(response.data).responseData.scoreResults\n            if (scores.length > 0) {\n              let matches = scores[0]\n              const exactMatches = matches.exactMatch\n              if (Object.keys(exactMatches).length > 0) {\n                this.$store.state.dialogError = true\n                this.$store.state.errorDescription =\n                  'This location is already mapped, please recalculate scores to get changes'\n                this.$store.state.errorTitle = 'Info'\n                this.$store.state.errorColor = 'error'\n                return\n              }\n              this.selectedSource1 = matches.source1\n              this.selectedSource1Name = matches.source1.name\n              this.selectedSource1Parents = matches.source1.parents\n              this.selectedSource1Lat = matches.source1.lat\n              this.selectedSource1Long = matches.source1.long\n              this.selectedSource1Id = matches.source1.id\n              for (let score in matches.potentialMatches) {\n                for (let j in matches.potentialMatches[score]) {\n                  let potentials = matches.potentialMatches[score][j]\n                  var matched = this.$store.state.matchedContent.find(\n                    matched => {\n                      return matched.source2Id === potentials.id\n                    }\n                  )\n                  var flagged = this.$store.state.flagged.find(flagged => {\n                    return flagged.source2Id === potentials.id\n                  })\n                  if (matched) {\n                    continue\n                  }\n                  if (flagged) {\n                    continue\n                  }\n                  this.potentialMatches.push({\n                    score: score,\n                    name: potentials.name,\n                    id: potentials.id,\n                    source2IdHierarchy: potentials.source2IdHierarchy,\n                    lat: potentials.lat,\n                    long: potentials.long,\n                    geoDistance: potentials.geoDistance,\n                    parents: potentials.parents,\n                    mappedParentName: potentials.mappedParentName\n                  })\n                }\n              }\n            }\n            this.dialog = true\n          } else {\n            this.dialog = true\n          }\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    },\n    getJurisdictionPotentialMatches (id) {\n      this.potentialMatches = []\n      this.showAllPotential = false\n      for (let scoreResult of this.$store.state.scoreResults) {\n        if (scoreResult.source1.id === id) {\n          this.selectedSource1 = scoreResult.source1\n          this.selectedSource1Name = scoreResult.source1.name\n          this.selectedSource1Parents = scoreResult.source1.parents\n          this.selectedSource1Lat = scoreResult.source1.lat\n          this.selectedSource1Long = scoreResult.source1.long\n          this.selectedSource1Id = scoreResult.source1.id\n          for (let score in scoreResult.potentialMatches) {\n            for (let j in scoreResult.potentialMatches[score]) {\n              let potentials = scoreResult.potentialMatches[score][j]\n              var matched = this.$store.state.matchedContent.find(matched => {\n                return matched.source2Id === potentials.id\n              })\n              var flagged = this.$store.state.flagged.find(flagged => {\n                return flagged.source2Id === potentials.id\n              })\n              if (matched) {\n                continue\n              }\n              if (flagged) {\n                continue\n              }\n              this.potentialMatches.push({\n                score: score,\n                name: potentials.name,\n                id: potentials.id,\n                source2IdHierarchy: potentials.source2IdHierarchy,\n                lat: potentials.lat,\n                long: potentials.long,\n                geoDistance: potentials.geoDistance,\n                parents: potentials.parents,\n                mappedParentName: potentials.mappedParentName\n              })\n            }\n          }\n        }\n      }\n      this.dialog = true\n    },\n    getPotentialMatch (id) {\n      this.getBuildingPotentialMatches(id)\n    },\n    potentialMatchComment (potentialMatch) {\n      let comment = ''\n      // check if ID different\n      if (this.$store.state.recoLevel === this.$store.state.totalSource1Levels) {\n        let source1IDs = []\n        let source2IDs = []\n        if (this.selectedSource1.source1IdHierarchy) {\n          source1IDs.push(this.selectedSource1.source1IdHierarchy[0].id)\n          for (let child of this.selectedSource1.source1IdHierarchy[0].children) {\n            source1IDs.push(child.id)\n          }\n        }\n        if (potentialMatch.source2IdHierarchy) {\n          source2IDs.push(potentialMatch.source2IdHierarchy[0].id)\n          for (let child of potentialMatch.source2IdHierarchy[0].children) {\n            source2IDs.push(child.id)\n          }\n        }\n\n        let exist = source1IDs.some(id1 => source2IDs.indexOf(id1) >= 0)\n        if (!exist) {\n          if (comment) {\n            comment += ', '\n          }\n          comment += 'ID differ'\n        }\n      }\n\n      // check if names are different\n      if (potentialMatch.name.toLowerCase() !== this.selectedSource1.name.toLowerCase()) {\n        if (comment) {\n          comment += ', '\n        }\n        comment += 'Names differ'\n      }\n\n      // check if parents are different\n      const source2Parent = potentialMatch.mappedParentName\n      const source1Parent = this.selectedSource1.parents[0]\n      if (source1Parent !== source2Parent) {\n        if (comment) {\n          comment += ', '\n        }\n        comment += 'Parents differ'\n      }\n\n      return comment\n    },\n    match (type, source2Id, source2Name, source2IdHierarchy, mappedParentName) {\n      this.matchType = type\n      this.source2Id = source2Id\n      this.source2Name = source2Name\n      this.source2IdHierarchy = source2IdHierarchy\n      this.mappedParentName = mappedParentName\n      if (source2Id === null) {\n        this.alert = true\n        this.alertTitle = 'Information'\n        this.alertText = 'Select Source 2 Location to match against Source 1 Location'\n        return\n      }\n      if (type === 'flag') {\n        this.flagCommentDialog = true\n      } else {\n        this.saveMatch()\n      }\n    },\n    saveMatch () {\n      this.flagCommentDialog = false\n      this.$store.state.progressTitle = 'Saving match'\n      this.$store.state.dynamicProgress = true\n      let sourcesOwner = this.getDatasourceOwner()\n      let formData = new FormData()\n      formData.append('source1Id', this.selectedSource1Id)\n      formData.append('source2Id', this.source2Id)\n      formData.append('source1Owner', sourcesOwner.source1Owner)\n      formData.append('source2Owner', sourcesOwner.source2Owner)\n      formData.append('flagComment', this.flagComment)\n      formData.append('source1DB', this.getSource1())\n      formData.append('source2DB', this.getSource2())\n      formData.append('recoLevel', this.$store.state.recoLevel)\n      formData.append('totalLevels', this.$store.state.totalSource1Levels)\n      formData.append('userID', this.$store.state.activePair.userID._id)\n      axios\n        .post('/match/' + this.matchType, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        })\n        .then(response => {\n          this.$store.state.dynamicProgress = false\n          // remove from Source 2 Unmatched\n          let source2Parents = null\n          for (let k in this.$store.state.source2UnMatched) {\n            if (this.$store.state.source2UnMatched[k].id === this.source2Id) {\n              source2Parents = this.$store.state.source2UnMatched[k].parents\n              this.$store.state.source2UnMatched.splice(k, 1)\n            }\n          }\n\n          // Add from a list of Source 1 Matched and remove from list of Source 1 unMatched\n          for (let k in this.$store.state.source1UnMatched) {\n            if (this.$store.state.source1UnMatched[k].id === this.selectedSource1Id) {\n              if (this.matchType === 'match') {\n                ++this.$store.state.totalAllMapped\n                this.$store.state.matchedContent.push({\n                  source1Name: this.selectedSource1Name,\n                  source1Id: this.selectedSource1Id,\n                  source1Parents: this.$store.state.source1UnMatched[k].parents,\n                  source2Name: this.source2Name,\n                  source2Id: this.source2Id,\n                  source2IdHierarchy: this.source2IdHierarchy,\n                  mappedParentName: this.mappedParentName,\n                  source2Parents: source2Parents,\n                  matchComments: response.data.matchComments\n                })\n              } else if (this.matchType === 'flag') {\n                ++this.$store.state.totalAllFlagged\n                this.$store.state.flagged.push({\n                  source1Name: this.selectedSource1Name,\n                  source1Id: this.selectedSource1Id,\n                  source1Parents: this.$store.state.source1UnMatched[k].parents,\n                  source2Name: this.source2Name,\n                  source2Id: this.source2Id,\n                  source2IdHierarchy: this.source2IdHierarchy,\n                  mappedParentName: this.mappedParentName,\n                  source2Parents: source2Parents,\n                  flagComment: this.flagComment\n                })\n              }\n              this.$store.state.source1UnMatched.splice(k, 1)\n            }\n          }\n          this.flagComment = ''\n          this.selectedSource1Id = null\n          this.selectedSource1Name = null\n          this.dialog = false\n        })\n        .catch(err => {\n          this.flagComment = ''\n          this.$store.state.dynamicProgress = false\n          this.alert = true\n          this.alertTitle = 'Error'\n          this.alertText = err.response.data.error\n          this.selectedSource1Id = null\n          this.selectedSource1Name = null\n          this.dialog = false\n        })\n    },\n    acceptFlag (source1Id) {\n      this.$store.state.progressTitle = 'Accepting flag'\n      this.$store.state.dynamicProgress = true\n      let formData = new FormData()\n      formData.append('source1Id', source1Id)\n      let userID = this.$store.state.activePair.userID._id\n      axios\n        .post('/acceptFlag/' + this.getSource1() + '/' + this.getSource2() + '/' + userID, formData, { headers: { 'Content-Type': 'multipart/form-data' } })\n        .then(() => {\n          this.$store.state.dynamicProgress = false\n          // Add from a list of Source 1 Matched and remove from list of Flagged\n          for (let k in this.$store.state.flagged) {\n            if (this.$store.state.flagged[k].source1Id === source1Id) {\n              this.$store.state.matchedContent.push({\n                source1Name: this.$store.state.flagged[k].source1Name,\n                source1Id: this.$store.state.flagged[k].source1Id,\n                source1Parents: this.$store.state.flagged[k].source1Parents,\n                source2Name: this.$store.state.flagged[k].source2Name,\n                source2Id: this.$store.state.flagged[k].source2Id,\n                source2IdHierarchy: this.$store.state.flagged[k].source2IdHierarchy,\n                mappedParentName: this.$store.state.flagged[k].mappedParentName,\n                source2Parents: this.$store.state.flagged[k].source2Parents\n              })\n              this.$store.state.flagged.splice(k, 1)\n              ++this.$store.state.totalAllMapped\n              --this.$store.state.totalAllFlagged\n            }\n          }\n        })\n        .catch(err => {\n          this.$store.state.dynamicProgress = false\n          this.alert = true\n          this.alertTitle = 'Error'\n          this.alertText = err.response.data.error\n          this.selectedSource1Id = null\n          this.selectedSource1Name = null\n          this.dialog = false\n          console.log(err)\n        })\n    },\n    breakMatch (source1Id) {\n      this.$store.state.progressTitle = 'Breaking match'\n      this.$store.state.dynamicProgress = true\n      let formData = new FormData()\n      let userID = this.$store.state.activePair.userID._id\n      let sourcesOwner = this.getDatasourceOwner()\n      formData.append('source1Id', source1Id)\n      axios\n        .post('/breakMatch/' + this.getSource1() + '/' + this.getSource2() + '/' + sourcesOwner.source1Owner + '/' + sourcesOwner.source2Owner + '/' + userID, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        }\n        )\n        .then(() => {\n          this.$store.state.dynamicProgress = false\n          for (let k in this.$store.state.matchedContent) {\n            if (this.$store.state.matchedContent[k].source1Id === source1Id) {\n              this.$store.state.source1UnMatched.push({\n                name: this.$store.state.matchedContent[k].source1Name,\n                id: this.$store.state.matchedContent[k].source1Id,\n                parents: this.$store.state.matchedContent[k].source1Parents\n              })\n              this.$store.state.source2UnMatched.push({\n                name: this.$store.state.matchedContent[k].source2Name,\n                id: this.$store.state.matchedContent[k].source2Id,\n                source2IdHierarchy: this.$store.state.matchedContent[k].source2IdHierarchy,\n                mappedParentName: this.$store.state.matchedContent[k].mappedParentName,\n                parents: this.$store.state.matchedContent[k].source2Parents\n              })\n              this.$store.state.matchedContent.splice(k, 1)\n              --this.$store.state.totalAllMapped\n            }\n          }\n        })\n        .catch(err => {\n          this.$store.state.dynamicProgress = false\n          this.alert = true\n          this.alertTitle = 'Error'\n          this.alertText = err.response.data.error\n          this.selectedSource1Id = null\n          this.selectedSource1Name = null\n          this.dialog = false\n          console.log(err)\n        })\n    },\n    unFlag (source1Id) {\n      this.$store.state.progressTitle = 'Unflagging match'\n      this.$store.state.dynamicProgress = true\n      let formData = new FormData()\n      let userID = this.$store.state.activePair.userID._id\n      let sourcesOwner = this.getDatasourceOwner()\n      formData.append('source1Id', source1Id)\n      axios\n        .post('/breakMatch/' + this.getSource1() + '/' + this.getSource2() + '/' + sourcesOwner.source1Owner + '/' + sourcesOwner.source2Owner + '/' + userID, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        }\n        ).then(() => {\n          this.$store.state.dynamicProgress = false\n          for (let k in this.$store.state.flagged) {\n            if (this.$store.state.flagged[k].source1Id === source1Id) {\n              this.$store.state.source1UnMatched.push({\n                name: this.$store.state.flagged[k].source1Name,\n                id: this.$store.state.flagged[k].source1Id,\n                parents: this.$store.state.flagged[k].source1Parents\n              })\n              this.$store.state.source2UnMatched.push({\n                name: this.$store.state.flagged[k].source2Name,\n                id: this.$store.state.flagged[k].source2Id,\n                source2IdHierarchy: this.$store.state.flagged[k].source2IdHierarchy,\n                mappedParentName: this.$store.state.flagged[k].mappedParentName,\n                parents: this.$store.state.flagged[k].source2Parents\n              })\n              this.$store.state.flagged.splice(k, 1)\n              --this.$store.state.totalAllFlagged\n            }\n          }\n        })\n        .catch(err => {\n          this.$store.state.dynamicProgress = false\n          this.alert = true\n          this.alertTitle = 'Error'\n          this.alertText = err.response.data.error\n          this.selectedSource1Id = null\n          this.selectedSource1Name = null\n          this.dialog = false\n          console.log(err)\n        })\n    },\n    breakNoMatch (source1Id, type) {\n      this.$store.state.progressTitle = 'Breaking no match'\n      this.$store.state.dynamicProgress = true\n      let formData = new FormData()\n      formData.append('source1Id', source1Id)\n      formData.append('recoLevel', this.$store.state.recoLevel)\n      formData.append('totalLevels', this.$store.state.totalSource1Levels)\n      let userID = this.$store.state.activePair.userID._id\n      axios\n        .post('/breakNoMatch/' + type + '/' + this.getSource1() + '/' + this.getSource2() + '/' + userID, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        }\n        )\n        .then(() => {\n          this.$store.state.dynamicProgress = false\n          if (type === 'nomatch') {\n            for (let k in this.$store.state.noMatchContent) {\n              if (this.$store.state.noMatchContent[k].source1Id === source1Id) {\n                this.$store.state.source1UnMatched.push({\n                  name: this.$store.state.noMatchContent[k].source1Name,\n                  id: this.$store.state.noMatchContent[k].source1Id,\n                  parents: this.$store.state.noMatchContent[k].parents\n                })\n                this.$store.state.noMatchContent.splice(k, 1)\n                --this.$store.state.totalAllNoMatch\n              }\n            }\n          } else if (type === 'ignore') {\n            for (let k in this.$store.state.ignoreContent) {\n              if (this.$store.state.ignoreContent[k].source1Id === source1Id) {\n                this.$store.state.source1UnMatched.push({\n                  name: this.$store.state.ignoreContent[k].source1Name,\n                  id: this.$store.state.ignoreContent[k].source1Id,\n                  parents: this.$store.state.ignoreContent[k].parents\n                })\n                this.$store.state.ignoreContent.splice(k, 1)\n                --this.$store.state.totalAllIgnore\n              }\n            }\n          }\n        })\n        .catch(err => {\n          this.$store.state.dynamicProgress = false\n          this.alert = true\n          this.alertTitle = 'Error'\n          this.alertText = err.response.data.error\n          this.selectedSource1Id = null\n          this.selectedSource1Name = null\n          this.dialog = false\n          console.log(err)\n        })\n    },\n    noMatch (type) {\n      this.$store.state.progressTitle = 'Saving as no match'\n      this.$store.state.dynamicProgress = true\n      let userID = this.$store.state.activePair.userID._id\n      let sourcesOwner = this.getDatasourceOwner()\n      let source1Owner = sourcesOwner.source1Owner\n      let source2Owner = sourcesOwner.source2Owner\n      let formData = new FormData()\n      formData.append('source1Id', this.selectedSource1Id)\n      formData.append('recoLevel', this.$store.state.recoLevel)\n      formData.append('totalLevels', this.$store.state.totalSource1Levels)\n\n      axios\n        .post(`/noMatch/${type}/${this.getSource1()}/${this.getSource2()}/${source1Owner}/${source2Owner}/${userID}`, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        }).then(() => {\n          this.$store.state.dynamicProgress = false\n          // remove from Source 1 Unmatched\n          if (type === 'nomatch') {\n            for (let k in this.$store.state.source1UnMatched) {\n              if (\n                this.$store.state.source1UnMatched[k].id ===\n                this.selectedSource1Id\n              ) {\n                this.$store.state.noMatchContent.push({\n                  source1Name: this.selectedSource1Name,\n                  source1Id: this.selectedSource1Id,\n                  parents: this.$store.state.source1UnMatched[k].parents\n                })\n                ++this.$store.state.totalAllNoMatch\n                this.$store.state.source1UnMatched.splice(k, 1)\n              }\n            }\n          } else if (type === 'ignore') {\n            for (let k in this.$store.state.source1UnMatched) {\n              if (\n                this.$store.state.source1UnMatched[k].id ===\n                this.selectedSource1Id\n              ) {\n                this.$store.state.ignoreContent.push({\n                  source1Name: this.selectedSource1Name,\n                  source1Id: this.selectedSource1Id,\n                  parents: this.$store.state.source1UnMatched[k].parents\n                })\n                ++this.$store.state.totalAllIgnore\n                this.$store.state.source1UnMatched.splice(k, 1)\n              }\n            }\n          }\n          this.dialog = false\n          this.selectedSource1Id = null\n          this.selectedSource1Name = null\n        })\n        .catch(err => {\n          this.$store.state.dynamicProgress = false\n          this.alert = true\n          this.alertTitle = 'Error'\n          this.alertText = err.response.data.error\n          this.dialog = false\n          this.selectedSource1Id = null\n          this.selectedSource1Name = null\n        })\n    },\n    back () {\n      this.searchPotential = ''\n      this.dialog = false\n    }\n  },\n  computed: {\n    nextLevelText: {\n      get: function () {\n        return this.translateDataHeader('source1', this.$store.state.recoLevel)\n      },\n      set: function () { }\n    },\n    currentLevelText: {\n      get: function () {\n        return this.translateDataHeader(\n          'source1',\n          this.$store.state.recoLevel - 1\n        )\n      },\n      set: function () { }\n    },\n    matchedHeaders () {\n      let header = [\n        { text: 'Source1 Location', value: 'source1Name' },\n        { text: 'Source1 ID', value: 'source1Id' },\n        { text: 'Source2 Location', value: 'source2Name' },\n        { text: 'Source2 ID', value: 'source2Id' },\n        { text: 'Match Comment', value: 'matchComments' }\n      ]\n      return header\n    },\n    source1GridHeaders () {\n      let header = [{ text: 'Location', value: 'name' }]\n      if (this.$store.state.source1UnMatched.length > 0) {\n        for (\n          let i = this.$store.state.source1UnMatched[0].parents.length;\n          i > 0;\n          i--\n        ) {\n          header.push({ text: 'Level ' + i, value: 'level' + (i + 1) })\n        }\n      }\n      header.splice(1, 1)\n      return header\n    },\n    potentialHeaders () {\n      var results = []\n      results.push(\n        { sortable: false },\n        { text: 'Source 2 Location', value: 'name', sortable: false },\n        { text: 'ID', value: 'id', sortable: false },\n        { text: 'Parent', value: 'source2Parent', sortable: false }\n      )\n      if (this.$store.state.recoLevel === this.$store.state.totalSource1Levels) {\n        results.push({\n          text: 'Geo Dist (Miles)',\n          value: 'geodist',\n          sortable: false\n        })\n      }\n      results.push({ text: 'Score', value: 'score' })\n      results.push({ text: 'Comment', value: 'comment', sortable: false,})\n      return results\n    },\n    potentialAvailable () {\n      return (\n        this.$store.state.source2UnMatched !== null &&\n        this.$store.state.source2UnMatched.length > this.potentialMatches.length\n      )\n    },\n    allPotentialMatches () {\n      if (\n        this.$store.state.source2UnMatched !== null &&\n        this.$store.state.source2UnMatched.length >\n        this.potentialMatches.length &&\n        this.showAllPotential\n      ) {\n        let results = []\n        for (let addIt of this.$store.state.source2UnMatched) {\n          let matched = this.potentialMatches.find(matched => {\n            return matched.id === addIt.id\n          })\n          if (!matched) {\n            addIt.score = 'N/A'\n            // if (!addIt.source2IdHierarchy && addIt.source2IdHierarchy) {\n            //   addIt.source2IdHierarchy = addIt.source2IdHierarchy\n            // }\n            results.push(addIt)\n          }\n        }\n        return this.potentialMatches.concat(results)\n      } else {\n        return this.potentialMatches\n      }\n    },\n    source1Tree () {\n      this.addListener()\n      const createTree = (current, results) => {\n        for (let name in current) {\n          let add = { text: name }\n          add.children = []\n          createTree(current[name], add.children)\n          if (add.children.length === 0) {\n            delete add.children\n          }\n          results.push(add)\n        }\n      }\n      let results = []\n      if (\n        Object.keys(this.$store.state.source1Parents).length === 1 &&\n        Object.keys(this.$store.state.source1Parents)[0] === 'null'\n      ) {\n        return results\n      }\n      createTree(this.$store.state.source1Parents, results)\n      return results\n    },\n    source1Grid () {\n      if (\n        this.$store.state.source1UnMatched.length > 0 &&\n        this.source1Filter.level !== ''\n      ) {\n        let parentIdx =\n          this.$store.state.source1UnMatched[0].parents.length -\n          this.source1Filter.level\n        return this.$store.state.source1UnMatched.filter(\n          location => location.parents[parentIdx] === this.source1Filter.text\n        )\n      }\n      return this.$store.state.source1UnMatched\n    },\n    goNextLevel () {\n      if (\n        this.$store.state.recoLevel < this.$store.state.totalSource1Levels &&\n        this.$store.state.source1UnMatched !== null &&\n        this.$store.state.source1UnMatched.length === 0 &&\n        this.$store.state.flagged !== null &&\n        this.$store.state.flagged.length === 0 &&\n        this.$store.state.matchedContent !== null &&\n        this.$store.state.matchedContent.length !== 0\n      ) {\n        return 'yes'\n      } else {\n        return 'no'\n      }\n    },\n    lastLevelDone () {\n      if (\n        this.$store.state.recoLevel === this.$store.state.totalSource1Levels &&\n        this.$store.state.source1UnMatched !== null &&\n        this.$store.state.source1UnMatched.length === 0 &&\n        this.$store.state.flagged !== null &&\n        this.$store.state.flagged.length === 0\n      ) {\n        return 'yes'\n      } else {\n        return 'no'\n      }\n    },\n    source1TotalRecords () {\n      if (this.$store.state.scoreResults) {\n        return this.$store.state.scoreResults.length\n      } else {\n        return 0\n      }\n    },\n    source1TotalMatched () {\n      if (this.$store.state.matchedContent) {\n        return this.$store.state.matchedContent.length\n      } else {\n        return 0\n      }\n    },\n    source1PercentMatched () {\n      if (this.source1TotalRecords === 0) {\n        return 0\n      } else {\n        return parseFloat(\n          ((this.source1TotalMatched * 100) / this.source1TotalRecords).toFixed(\n            1\n          )\n        )\n      }\n    },\n    source1TotalUnMatched () {\n      return this.source1TotalRecords - this.source1TotalMatched\n    },\n    source1PercentUnMatched () {\n      if (this.source1TotalRecords === 0) {\n        return 0\n      } else {\n        return parseFloat(\n          (\n            (this.source1TotalUnMatched * 100) /\n            this.source1TotalRecords\n          ).toFixed(1)\n        )\n      }\n    },\n    totalFlagged () {\n      if (this.$store.state.flagged) {\n        return this.$store.state.flagged.length\n      } else {\n        return 0\n      }\n    },\n    source1PercentFlagged () {\n      if (this.$store.state.scoreResults.length === 0) {\n        return 0\n      } else if (this.$store.state.flagged) {\n        return parseFloat(\n          (\n            (this.$store.state.flagged.length * 100) /\n            this.$store.state.scoreResults.length\n          ).toFixed(1)\n        )\n      } else {\n        return 0\n      }\n    },\n    source1TotalNoMatch () {\n      if (this.$store.state.noMatchContent) {\n        return this.$store.state.noMatchContent.length\n      } else {\n        return 0\n      }\n    },\n    source1TotalIgnore () {\n      if (this.$store.state.ignoreContent) {\n        return this.$store.state.ignoreContent.length\n      } else {\n        return 0\n      }\n    },\n    source1PercentNoMatch () {\n      if (this.$store.state.scoreResults.length === 0) {\n        return 0\n      } else if (this.$store.state.noMatchContent) {\n        return parseFloat(\n          (\n            (this.$store.state.noMatchContent.length * 100) /\n            this.$store.state.scoreResults.length\n          ).toFixed(1)\n        )\n      } else {\n        return 0\n      }\n    },\n    source1PercentIgnore () {\n      if (this.$store.state.scoreResults.length === 0) {\n        return 0\n      } else if (this.$store.state.ignoreContent) {\n        return parseFloat(\n          (\n            (this.$store.state.ignoreContent.length * 100) /\n            this.$store.state.scoreResults.length\n          ).toFixed(1)\n        )\n      } else {\n        return 0\n      }\n    },\n    source2TotalRecords () {\n      if (this.$store.state.source2TotalRecords) {\n        return this.$store.state.source2TotalRecords\n      } else {\n        return 0\n      }\n    },\n    source2TotalUnmatched () {\n      if (this.source2TotalRecords > 0 && this.$store.state.matchedContent) {\n        return (\n          parseInt(this.source2TotalRecords) -\n          parseInt(this.$store.state.matchedContent.length)\n        )\n      } else {\n        return 0\n      }\n    },\n    source2PercentUnmatched () {\n      if (this.$store.state.source2TotalRecords === 0) {\n        return 0\n      } else {\n        return parseFloat(\n          (\n            (this.source2TotalUnmatched * 100) /\n            this.$store.state.source2TotalRecords\n          ).toFixed(1)\n        )\n      }\n    },\n    source2PercentFlagged () {\n      if (this.$store.state.source2TotalRecords === 0) {\n        return 0\n      } else if (this.$store.state.flagged) {\n        return parseFloat(\n          (\n            (this.$store.state.flagged.length * 100) /\n            this.$store.state.source2TotalRecords\n          ).toFixed(1)\n        )\n      } else {\n        return 0\n      }\n    },\n    source2TotalMatched () {\n      return this.source1TotalMatched\n    },\n    source2PercentMatched () {\n      if (this.$store.state.source2TotalRecords === 0) {\n        return 0\n      } else {\n        return parseFloat(\n          (\n            (this.source2TotalMatched * 100) /\n            this.$store.state.source2TotalRecords\n          ).toFixed(1)\n        )\n      }\n    },\n    source2NotInSource1 () {\n      var missing = this.source2TotalRecords - this.source1TotalRecords\n      if (missing < 0) {\n        return 0\n      } else {\n        return missing\n      }\n    },\n    source2PercentNotInSource1 () {\n      if (this.source2NotInSource1 === 0) {\n        return 0\n      }\n      var percent = parseFloat(\n        ((this.source2NotInSource1 * 100) / this.source2TotalRecords).toFixed(1)\n      )\n      return parseFloat(percent)\n    }\n  },\n  created () {\n    if (this.$store.state.recalculateScores) {\n      this.$store.state.recalculateScores = false\n      this.getScores(false)\n    }\n    eventBus.$on('changeCSVHeaderNames', () => {\n      let levelName = this.translateDataHeader(\n        'source1',\n        this.$store.state.recoLevel\n      )\n      this.nextLevelText = levelName\n      this.currentLevelText = levelName\n    })\n    this.addListener()\n    if (this.$store.state.recoLevel === this.$store.state.totalSource1Levels) {\n      this.dialogWidth = 'auto'\n    } else {\n      this.dialogWidth = '1500px'\n    }\n    // This is needed because the tree doesn't show up on the initial page load without it\n    this.source1TreeUpdate++\n  },\n  components: {\n    'liquor-tree': LiquorTree,\n    'appRecoExport': ReconciliationExport\n  }\n}\n</script>\n<style>\n</style>\n"]}]}