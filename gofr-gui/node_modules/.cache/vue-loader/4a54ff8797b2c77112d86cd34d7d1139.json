{"remainingRequest":"/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr/facility-recon-gui/src/components/fhir/fhir-date.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr/facility-recon-gui/src/components/fhir/fhir-date.vue","mtime":1619258123839},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/babel-loader/lib/index.js","mtime":1619257191453},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js","mtime":1619257191305}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBJaHJpc0VsZW1lbnQgZnJvbSAiLi4vaWhyaXMvaWhyaXMtZWxlbWVudC52dWUiCmltcG9ydCBWRXRoaW9waWFuRGF0ZVBpY2tlciBmcm9tICJ2dWV0aWZ5LWV0aGlvcGlhbi1jYWxlbmRhciIKaW1wb3J0IGV0aGlvcGljIGZyb20gImV0aGlvcGljLWNhbGVuZGFyIgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJmaGlyLWRhdGUiLAogIHByb3BzOiBbImZpZWxkIiwibWluIiwibWF4IiwiYmFzZS1taW4iLCJiYXNlLW1heCIsICJsYWJlbCIsICJzbG90UHJvcHMiLCAicGF0aCIsICJlZGl0Iiwic2xpY2VOYW1lIiwKICAgICJtaW5WYWx1ZURhdGUiLCAibWF4VmFsdWVEYXRlIiwgIm1pblZhbHVlUXVhbnRpdHkiLCAibWF4VmFsdWVRdWFudGl0eSIsICJkaXNwbGF5VHlwZSIsInJlYWRPbmx5SWZTZXQiLCAiY2FsZW5kYXIiLAogICAgImNvbnN0cmFpbnRzIiBdLAogIGNvbXBvbmVudHM6IHsKICAgIElocmlzRWxlbWVudCwKICAgIFZFdGhpb3BpYW5EYXRlUGlja2VyCiAgfSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbHVlOiBudWxsLAogICAgICBldFZhbHVlOiBudWxsLAogICAgICBtZW51OiBmYWxzZSwKICAgICAgc291cmNlOiB7IHBhdGg6ICIiLCBkYXRhOiB7fSB9LAogICAgICBxRmllbGQ6ICJ2YWx1ZURhdGUiLAogICAgICBwaWNrZXJUeXBlOiAiZGF0ZSIsCiAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgc2hvd0dyZWdvcmlhbjogZmFsc2UsCiAgICAgIGVycm9yczogW10sCiAgICAgIGxvY2tXYXRjaDogZmFsc2UKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uKCkgewogICAgLy9jb25zb2xlLmxvZygiQ1JFQVRFIFNUUklORyIsdGhpcy5maWVsZCx0aGlzLnNsb3RQcm9wcykKICAgIHRoaXMuc2V0dXBEYXRhKCkKICB9LAogIGNvbXB1dGVkOiB7CiAgICBkYXRlVmFsdWVNYXg6IGZ1bmN0aW9uKCkgewogICAgICBpZiAoIHRoaXMubWF4VmFsdWVRdWFudGl0eSApIHsKICAgICAgICBsZXQgbWF4RGF0ZSA9IHRoaXMuY29udmVydFF1YW50aXR5KCB0aGlzLm1heFZhbHVlUXVhbnRpdHksICJhZGQiICkKICAgICAgICBpZiAoIG1heERhdGUgKSB7CiAgICAgICAgICByZXR1cm4gbWF4RGF0ZQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIHRoaXMubWF4VmFsdWVEYXRlICkgewogICAgICAgIHJldHVybiB0aGlzLm1heFZhbHVlRGF0ZQogICAgICB9CiAgICAgIHJldHVybiB1bmRlZmluZWQKICAgIH0sCiAgICBkYXRlVmFsdWVNaW46IGZ1bmN0aW9uKCkgewogICAgICBpZiAoIHRoaXMubWluVmFsdWVRdWFudGl0eSApIHsKICAgICAgICBsZXQgbWluRGF0ZSA9IHRoaXMuY29udmVydFF1YW50aXR5KCB0aGlzLm1pblZhbHVlUXVhbnRpdHksICJzdWJ0cmFjdCIgKQogICAgICAgIGlmICggbWluRGF0ZSApIHsKICAgICAgICAgIHJldHVybiBtaW5EYXRlCiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKCB0aGlzLm1pblZhbHVlRGF0ZSApIHsKICAgICAgICByZXR1cm4gdGhpcy5taW5WYWx1ZURhdGUKICAgICAgfQogICAgICByZXR1cm4gdW5kZWZpbmVkCiAgICB9LAogICAgbWluWWVhcjogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmRhdGVWYWx1ZU1pbiA/IHRoaXMuZGF0ZVZhbHVlTWluLnN1YnN0cmluZygwLDQpIDogdW5kZWZpbmVkCiAgICB9LAogICAgbWF4WWVhcjogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmRhdGVWYWx1ZU1heCA/IHRoaXMuZGF0ZVZhbHVlTWF4LnN1YnN0cmluZygwLDQpIDogdW5kZWZpbmVkCiAgICB9LAogICAgbWluWWVhckVUOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMubWluVmFsdWVFVERhdGUgPyB0aGlzLm1pblZhbHVlRVREYXRlLnN1YnN0cmluZygwLDQpIDogdW5kZWZpbmVkCiAgICB9LAogICAgbWF4WWVhckVUOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMubWF4VmFsdWVFVERhdGUgPyB0aGlzLm1heFZhbHVlRVREYXRlLnN1YnN0cmluZygwLDQpIDogdW5kZWZpbmVkCiAgICB9LAogICAgaXNFdGhpb3BpYW46IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5jYWxlbmRhciA9PT0gIkV0aGlvcGlhbiIKICAgIH0sCiAgICBtaW5WYWx1ZUVURGF0ZTogZnVuY3Rpb24oKSB7CiAgICAgIGlmICggdGhpcy5kYXRlVmFsdWVNaW4gKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEdFKCB0aGlzLmRhdGVWYWx1ZU1pbiApCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG51bGwKICAgICAgfQogICAgfSwKICAgIG1heFZhbHVlRVREYXRlOiBmdW5jdGlvbigpIHsKICAgICAgaWYgKCB0aGlzLmRhdGVWYWx1ZU1heCApIHsKICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0R0UoIHRoaXMuZGF0ZVZhbHVlTWF4ICkKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbAogICAgICB9CiAgICB9LAogICAgZGlzcGxheVZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgaWYgKCB0aGlzLmlzRXRoaW9waWFuICkgewogICAgICAgIHJldHVybiB0aGlzLnZhbHVlICYmICJFdGhpb3BpYW46ICIgKyB0aGlzLmV0VmFsdWUgKyAiIEdyZWdvcmlhbjogIiArIHRoaXMudmFsdWUKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy52YWx1ZQogICAgICB9CiAgICB9LAogICAgaW5kZXg6IGZ1bmN0aW9uKCkgewogICAgICBpZiAoIHRoaXMuc2xvdFByb3BzICYmIHRoaXMuc2xvdFByb3BzLmlucHV0ICkgcmV0dXJuIHRoaXMuc2xvdFByb3BzLmlucHV0LmluZGV4CiAgICAgIGVsc2UgcmV0dXJuIHVuZGVmaW5lZAogICAgfSwKICAgIHJlcXVpcmVkOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuICh0aGlzLmluZGV4IHx8IDApIDwgdGhpcy5taW4KICAgIH0sCiAgICBydWxlczogZnVuY3Rpb24oKSB7CiAgICAgIGlmICggdGhpcy5yZXF1aXJlZCApIHsKICAgICAgICByZXR1cm4gWyB2ID0+ICEhdiB8fCB0aGlzLmxhYmVsKyIgaXMgcmVxdWlyZWQiIF0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW10KICAgICAgfQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIG1lbnUgKHZhbCkgewogICAgICBpZiAoIHRoaXMucGlja2VyVHlwZSAhPT0gJ3llYXInICkgewogICAgICAgIGlmICggdGhpcy5pc0V0aGlvcGlhbiApIHsKICAgICAgICAgICF0aGlzLnZhbHVlICYmIHZhbCAmJiBzZXRUaW1lb3V0KCgpID0+ICh0aGlzLiRyZWZzLmV0UGlja2VyLmFjdGl2ZVBpY2tlciA9ICdZRUFSJykpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICF0aGlzLnZhbHVlICYmIHZhbCAmJiBzZXRUaW1lb3V0KCgpID0+ICh0aGlzLiRyZWZzLnBpY2tlci5hY3RpdmVQaWNrZXIgPSAnWUVBUicpKQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHNob3dHcmVnb3JpYW4gKHZhbCkgewogICAgICAhdGhpcy52YWx1ZSAmJiB2YWwgJiYgc2V0VGltZW91dCgoKSA9PiAodGhpcy4kcmVmcy5nUGlja2VyLmFjdGl2ZVBpY2tlciA9ICdZRUFSJykpCiAgICB9LAogICAgc2xvdFByb3BzOiB7CiAgICAgIGhhbmRsZXIoKSB7CiAgICAgICAgLy9jb25zb2xlLmxvZygiV0FUQ0ggU1RSSU5HIix0aGlzLmZpZWxkLHRoaXMucGF0aCx0aGlzLnNsb3RQcm9wcykKICAgICAgICBpZiAoICF0aGlzLmxvY2tXYXRjaCApIHsKICAgICAgICAgIHRoaXMuc2V0dXBEYXRhKCkKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0sCiAgICB2YWx1ZSAodmFsKSB7CiAgICAgIGlmICggIXZhbCApIHsKICAgICAgICB0aGlzLmV0VmFsdWUgPSB2YWwKICAgICAgfSBlbHNlIGlmICggdGhpcy5waWNrZXJUeXBlID09PSAneWVhcicgKSB7CiAgICAgICAgaWYgKCB2YWwubGVuZ3RoID09PSA0ICkgewogICAgICAgICAgdGhpcy5ldFZhbHVlID0gdGhpcy5jb252ZXJ0R0UoIHZhbCApCiAgICAgICAgfQogICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmV0VmFsdWUgPSB0aGlzLmNvbnZlcnRHRSggdmFsICkKICAgICAgfQogICAgICAvKgogICAgICBjb25zdCBbIHllYXIsIG1vbnRoLCBkYXkgXSA9IHZhbC5zcGxpdCgnLScpLm1hcChOdW1iZXIpCiAgICAgIGxldCBldERhdGUgPSBldGhpb3BpYy5nZSggeWVhciwgbW9udGggfHwgMSwgZGF5ICB8fCAxKQogICAgICB0aGlzLmV0VmFsdWUgPSBldERhdGUueWVhci50b1N0cmluZygpLnBhZFN0YXJ0KDQsJzAnKSArICItIiArIGV0RGF0ZS5tb250aC50b1N0cmluZygpLnBhZFN0YXJ0KDIsJzAnKSArICItIiArIGV0RGF0ZS5kYXkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpCiAgICAgICovCiAgICB9LAogICAgZXRWYWx1ZSAodmFsKSB7CiAgICAgIGlmICggIXZhbCApIHsKICAgICAgICB0aGlzLnZhbHVlID0gdmFsCiAgICAgIH0gZWxzZSBpZiAoIHRoaXMucGlja2VyVHlwZSA9PT0gJ3llYXInICkgewogICAgICAgIGlmICggdmFsLmxlbmd0aCA9PT0gNCApIHsKICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmNvbnZlcnRFRyggdmFsICkKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuY29udmVydEVHKCB2YWwgKQogICAgICB9CiAgICAgIC8qCiAgICAgIGNvbnN0IFsgZXRZZWFyLCBldE1vbnRoLCBldERheSBdID0gdmFsLnNwbGl0KCctJykubWFwKE51bWJlcikKICAgICAgbGV0IGdEYXRlID0gZXRoaW9waWMuZWcoIGV0WWVhciwgZXRNb250aCB8fCAxLCBldERheSAgfHwgMSkKICAgICAgdGhpcy52YWx1ZSA9IGdEYXRlLnllYXIudG9TdHJpbmcoKS5wYWRTdGFydCg0LCcwJykgKyAiLSIgKyBnRGF0ZS5tb250aC50b1N0cmluZygpLnBhZFN0YXJ0KDIsJzAnKSArICItIiArIGdEYXRlLmRheS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykKICAgICAgKi8KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNvbnZlcnRRdWFudGl0eSh2YWwsIGRpcmVjdGlvbikgewogICAgICBjb25zdCB1bml0c29mbWVhc3VyZSA9IHsKICAgICAgICAnYSc6ICd5ZWFycycsCiAgICAgICAgJ21vJzogJ21vbnRocycsCiAgICAgICAgJ3drJzogJ3dlZWtzJywKICAgICAgICAnZCc6ICdkYXlzJywKICAgICAgfQogICAgICBjb25zdCBxdWFudCA9IC8oLT9cZCspKFthLXpdezEsM30pLwoKICAgICAgbGV0IG1hdGNoID0gdmFsLm1hdGNoKCBxdWFudCApCiAgICAgIGlmICggbWF0Y2gubGVuZ3RoID09PSAzICkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBsZXQgdmFsdWUgPSBtYXRjaFsxXQogICAgICAgICAgbGV0IHVuaXQgPSB1bml0c29mbWVhc3VyZVsgbWF0Y2hbMl0gXQogICAgICAgICAgaWYgKCBkaXJlY3Rpb24gPT09ICJzdWJ0cmFjdCIgKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRtb21lbnQoIHRoaXMuJG1vbWVudCgpLnN1YnRyYWN0KHZhbHVlLCB1bml0KSApLmZvcm1hdCgnWVlZWS1NTS1ERCcpCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kbW9tZW50KCB0aGlzLiRtb21lbnQoKS5hZGQodmFsdWUsIHVuaXQpICkuZm9ybWF0KCdZWVlZLU1NLUREJykKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiRmFpbGVkIHRvIGdldCBkYXRlIGZyb20gcXVhbnRpdHkiLGUpCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB1bmRlZmluZWQKICAgIH0sCiAgICBjb252ZXJ0R0UodmFsKSB7CiAgICAgIGlmICggIXZhbCApIHJldHVybiB2YWwKICAgICAgY29uc3QgWyB5ZWFyLCBtb250aCwgZGF5IF0gPSB2YWwuc3BsaXQoJy0nKS5tYXAoTnVtYmVyKQogICAgICBpZiAoIHRoaXMucGlja2VyVHlwZSA9PT0gJ3llYXInICkgewogICAgICAgIGxldCBldERhdGUgPSBldGhpb3BpYy5nZSggeWVhciwgbW9udGggfHwgNiwgZGF5IHx8IDEpIC8vIHNvIGl0IHdpbGwgYmUgdGhlIHNhbWUgeWVhciBpbiBib3RoIGRpcmVjdGlvbnMKICAgICAgICByZXR1cm4gZXREYXRlLnllYXIudG9TdHJpbmcoKS5wYWRTdGFydCg0LCcwJykKICAgICAgfSBlbHNlIHsKICAgICAgICBsZXQgZXREYXRlID0gZXRoaW9waWMuZ2UoIHllYXIsIG1vbnRoIHx8IDEsIGRheSB8fCAxKQogICAgICAgIHJldHVybiBldERhdGUueWVhci50b1N0cmluZygpLnBhZFN0YXJ0KDQsJzAnKSArICItIiArIGV0RGF0ZS5tb250aC50b1N0cmluZygpLnBhZFN0YXJ0KDIsJzAnKSArICItIiArIGV0RGF0ZS5kYXkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpCiAgICAgIH0KICAgIH0sCiAgICBjb252ZXJ0RUcodmFsKSB7CiAgICAgIGlmICggIXZhbCApIHJldHVybiB2YWwKICAgICAgY29uc3QgWyBldFllYXIsIGV0TW9udGgsIGV0RGF5IF0gPSB2YWwuc3BsaXQoJy0nKS5tYXAoTnVtYmVyKQogICAgICBpZiAoIHRoaXMucGlja2VyVHlwZSA9PT0gJ3llYXInICkgewogICAgICAgIGxldCBnRGF0ZSA9IGV0aGlvcGljLmVnKCBldFllYXIsIGV0TW9udGh8fCA2LCBldERheSB8fCAxKSAvLyBzbyBpdCB3aWxsIGJlIHRoZSBzYW1lIHllYXIgaW4gYm90aCBkaXJlY3Rpb25zCiAgICAgICAgcmV0dXJuIGdEYXRlLnllYXIudG9TdHJpbmcoKS5wYWRTdGFydCg0LCcwJykKICAgICAgfSBlbHNlIHsKICAgICAgICBsZXQgZ0RhdGUgPSBldGhpb3BpYy5lZyggZXRZZWFyLCBldE1vbnRoIHx8IDEsIGV0RGF5IHx8IDEpCiAgICAgICAgcmV0dXJuIGdEYXRlLnllYXIudG9TdHJpbmcoKS5wYWRTdGFydCg0LCcwJykgKyAiLSIgKyBnRGF0ZS5tb250aC50b1N0cmluZygpLnBhZFN0YXJ0KDIsJzAnKSArICItIiArIGdEYXRlLmRheS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykKICAgICAgfQogICAgfSwKICAgIHNldHVwRGF0YSgpIHsKICAgICAgaWYgKCB0aGlzLmRpc3BsYXlUeXBlICkgewogICAgICAgIHRoaXMucGlja2VyVHlwZSA9IHRoaXMuZGlzcGxheVR5cGUKICAgICAgfQogICAgICBpZiAoIHRoaXMuc2xvdFByb3BzICYmIHRoaXMuc2xvdFByb3BzLnNvdXJjZSApIHsKICAgICAgICB0aGlzLnNvdXJjZSA9IHsgcGF0aDogdGhpcy5zbG90UHJvcHMuc291cmNlLnBhdGgrIi4iK3RoaXMuZmllbGQsIGRhdGE6IHt9IH0KICAgICAgICBpZiAoIHRoaXMuc2xvdFByb3BzLnNvdXJjZS5mcm9tQXJyYXkgKSB7CiAgICAgICAgICB0aGlzLnNvdXJjZS5kYXRhID0gdGhpcy5zbG90UHJvcHMuc291cmNlLmRhdGEKICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnNvdXJjZS5kYXRhCiAgICAgICAgICB0aGlzLmxvY2tXYXRjaCA9IHRydWUKICAgICAgICAgIC8vY29uc29sZS5sb2coIlNFVCB2YWx1ZSB0byAiLCB0aGlzLnNvdXJjZS5kYXRhLCB0aGlzLnNsb3RQcm9wcy5pbnB1dCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGV0IGV4cHJlc3Npb24gPSB0aGlzLiRmaGlydXRpbHMucGF0aEZpZWxkRXhwcmVzc2lvbiggdGhpcy5maWVsZCApCiAgICAgICAgICB0aGlzLnNvdXJjZS5kYXRhID0gdGhpcy4kZmhpcnBhdGguZXZhbHVhdGUoIHRoaXMuc2xvdFByb3BzLnNvdXJjZS5kYXRhLCBleHByZXNzaW9uICkKICAgICAgICAgIC8vY29uc29sZS5sb2coIlNUUiBGSElSUEFUSCIsIHRoaXMuc2xvdFByb3BzLnNvdXJjZS5kYXRhLCB0aGlzLmZpZWxkKQogICAgICAgICAgaWYgKCB0aGlzLnNvdXJjZS5kYXRhLmxlbmd0aCA9PSAxICkgewogICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5zb3VyY2UuZGF0YVswXQogICAgICAgICAgICB0aGlzLmxvY2tXYXRjaCA9IHRydWUKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IHRoaXMucmVhZE9ubHlJZlNldCAmJiAoISF0aGlzLnZhbHVlKQogICAgICAgIC8vY29uc29sZS5sb2codGhpcy5zb3VyY2UpCiAgICAgIH0KICAgIH0sCiAgICBzYXZlIChkYXRlKSB7CiAgICAgIHRoaXMuZXJyb3JzID0gW10KICAgICAgdGhpcy4kcmVmcy5tZW51LnNhdmUoZGF0ZSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["fhir-date.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8JA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"fhir-date.vue","sourceRoot":"src/components/fhir","sourcesContent":["<template>\n  <ihris-element :edit=\"edit\" :loading=\"false\">\n    <template #form>\n      <v-menu\n        ref=\"menu\"\n        v-model=\"menu\"\n        :close-on-content-click=\"false\"\n        transition=\"scale-transition\"\n        offset-y\n        min-width=\"290px\"\n      >\n        <template v-slot:activator=\"{ on }\">\n          <v-text-field\n            v-model=\"displayValue\"\n            :label=\"label\"\n            prepend-inner-icon=\"mdi-calendar\"\n            readonly\n            v-on=\"on\"\n            outlined\n            hide-details=\"auto\"\n            :rules=\"rules\"\n            :error-messages=\"errors\"\n            dense\n          >\n            <template #label>{{label}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n          </v-text-field>\n        </template>\n        <v-container class=\"ma-0 pa-0\" v-if=\"isEthiopian\">\n          <v-row no-gutters>\n            <v-card min-width=\"300px\">\n              <v-card-title class=\"primary white--text\">\n                Ethiopian Calendar<v-spacer/><v-btn\n                  dark\n                  class=\"white--text\"\n                  icon\n                  @click=\"showGregorian = !showGregorian\"\n                  group\n                  small\n                  ><v-icon v-if=\"!showGregorian\" >mdi-calendar-multiple</v-icon><v-icon v-else>mdi-calendar</v-icon></v-btn>\n              </v-card-title>\n              <v-card-text v-if=\"pickerType==='year'\">\n                <br />\n                <v-text-field\n                  v-model=\"etValue\"\n                  clearable\n                  type=\"number\"\n                  :disabled=\"disabled\"\n                  :label=\"label\"\n                  :min=\"minYearET\"\n                  :max=\"maxYearET\"\n                  :rules=\"rules\"\n                  :error-messages=\"errors\"\n                  @change=\"errors = []\"\n                  dense\n                >\n                </v-text-field>\n              </v-card-text>\n              <v-ethiopian-date-picker\n                v-else\n                ref=\"etPicker\"\n                label=\"Ethiopian\"\n                color=\"secondary\"\n                :landscape=\"$vuetify.breakpoint.smAndUp\"\n                v-model=\"etValue\"\n                :max=\"maxValueETDate\"\n                :min=\"minValueETDate\"\n                :type=\"pickerType\"\n                :disabled=\"disabled\"\n                @change=\"save\"\n                locale=\"am\"\n                ></v-ethiopian-date-picker>\n            </v-card>\n            <v-card v-if=\"showGregorian\" min-width=\"300px\">\n              <v-card-title class=\"primary white--text\">\n                Gregorian Calendar<v-spacer/><v-btn\n                  dark\n                  class=\"white--text\"\n                  icon\n                  @click=\"showGregorian = false\"\n                  group\n                  small\n                  ><v-icon>mdi-close</v-icon></v-btn>\n              </v-card-title>\n              <v-card-text v-if=\"pickerType==='year'\">\n                <br />\n                <v-text-field\n                  v-model=\"value\"\n                  clearable\n                  type=\"number\"\n                  :disabled=\"disabled\"\n                  :label=\"label\"\n                  :min=\"minYear\"\n                  :max=\"maxYear\"\n                  :rules=\"rules\"\n                  :error-messages=\"errors\"\n                  @change=\"errors = []\"\n                  dense\n                >\n                </v-text-field>\n              </v-card-text>\n              <v-date-picker\n                v-else\n                ref=\"gPicker\"\n                color=\"secondary\"\n                :landscape=\"$vuetify.breakpoint.smAndUp\"\n                v-model=\"value\"\n                :max=\"dateValueMax\"\n                :min=\"dateValueMin\"\n                :type=\"pickerType\"\n                :disabled=\"disabled\"\n                @change=\"save\"\n                ></v-date-picker>\n            </v-card>\n          </v-row>\n        </v-container>\n        <v-card min-width=\"300px\" v-else-if=\"pickerType==='year'\" >\n          <v-card-text>\n            <br />\n            <v-text-field\n              v-model=\"value\"\n              type=\"number\"\n              :disabled=\"disabled\"\n              :label=\"label\"\n              :min=\"minYear\"\n              :max=\"maxYear\"\n              :rules=\"rules\"\n              :error-messages=\"errors\"\n              @change=\"errors = []\"\n              dense\n            >\n            </v-text-field>\n          </v-card-text>\n        </v-card>\n        <v-date-picker\n          v-else\n          ref=\"picker\"\n          color=\"secondary\"\n          :landscape=\"$vuetify.breakpoint.smAndUp\"\n          v-model=\"value\"\n          :max=\"dateValueMax\"\n          :min=\"dateValueMin\"\n          :type=\"pickerType\"\n          :disabled=\"disabled\"\n          @change=\"save\"\n          ></v-date-picker>\n\n      </v-menu>\n    </template>\n    <template #header>\n      {{label}}\n    </template>\n    <template #value>\n      {{displayValue}}\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport IhrisElement from \"../ihris/ihris-element.vue\"\nimport VEthiopianDatePicker from \"vuetify-ethiopian-calendar\"\nimport ethiopic from \"ethiopic-calendar\"\n\nexport default {\n  name: \"fhir-date\",\n  props: [\"field\",\"min\",\"max\",\"base-min\",\"base-max\", \"label\", \"slotProps\", \"path\", \"edit\",\"sliceName\",\n    \"minValueDate\", \"maxValueDate\", \"minValueQuantity\", \"maxValueQuantity\", \"displayType\",\"readOnlyIfSet\", \"calendar\",\n    \"constraints\" ],\n  components: {\n    IhrisElement,\n    VEthiopianDatePicker\n  },\n  data: function() {\n    return {\n      value: null,\n      etValue: null,\n      menu: false,\n      source: { path: \"\", data: {} },\n      qField: \"valueDate\",\n      pickerType: \"date\",\n      disabled: false,\n      showGregorian: false,\n      errors: [],\n      lockWatch: false\n    }\n  },\n  created: function() {\n    //console.log(\"CREATE STRING\",this.field,this.slotProps)\n    this.setupData()\n  },\n  computed: {\n    dateValueMax: function() {\n      if ( this.maxValueQuantity ) {\n        let maxDate = this.convertQuantity( this.maxValueQuantity, \"add\" )\n        if ( maxDate ) {\n          return maxDate\n        }\n      }\n      if ( this.maxValueDate ) {\n        return this.maxValueDate\n      }\n      return undefined\n    },\n    dateValueMin: function() {\n      if ( this.minValueQuantity ) {\n        let minDate = this.convertQuantity( this.minValueQuantity, \"subtract\" )\n        if ( minDate ) {\n          return minDate\n        }\n      } else if ( this.minValueDate ) {\n        return this.minValueDate\n      }\n      return undefined\n    },\n    minYear: function() {\n      return this.dateValueMin ? this.dateValueMin.substring(0,4) : undefined\n    },\n    maxYear: function() {\n      return this.dateValueMax ? this.dateValueMax.substring(0,4) : undefined\n    },\n    minYearET: function() {\n      return this.minValueETDate ? this.minValueETDate.substring(0,4) : undefined\n    },\n    maxYearET: function() {\n      return this.maxValueETDate ? this.maxValueETDate.substring(0,4) : undefined\n    },\n    isEthiopian: function() {\n      return this.calendar === \"Ethiopian\"\n    },\n    minValueETDate: function() {\n      if ( this.dateValueMin ) {\n        return this.convertGE( this.dateValueMin )\n      } else {\n        return null\n      }\n    },\n    maxValueETDate: function() {\n      if ( this.dateValueMax ) {\n        return this.convertGE( this.dateValueMax )\n      } else {\n        return null\n      }\n    },\n    displayValue: function() {\n      if ( this.isEthiopian ) {\n        return this.value && \"Ethiopian: \" + this.etValue + \" Gregorian: \" + this.value\n      } else {\n        return this.value\n      }\n    },\n    index: function() {\n      if ( this.slotProps && this.slotProps.input ) return this.slotProps.input.index\n      else return undefined\n    },\n    required: function() {\n      return (this.index || 0) < this.min\n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.label+\" is required\" ]\n      } else {\n        return []\n      }\n    }\n  },\n  watch: {\n    menu (val) {\n      if ( this.pickerType !== 'year' ) {\n        if ( this.isEthiopian ) {\n          !this.value && val && setTimeout(() => (this.$refs.etPicker.activePicker = 'YEAR'))\n        } else {\n          !this.value && val && setTimeout(() => (this.$refs.picker.activePicker = 'YEAR'))\n        }\n      }\n    },\n    showGregorian (val) {\n      !this.value && val && setTimeout(() => (this.$refs.gPicker.activePicker = 'YEAR'))\n    },\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH STRING\",this.field,this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    },\n    value (val) {\n      if ( !val ) {\n        this.etValue = val\n      } else if ( this.pickerType === 'year' ) {\n        if ( val.length === 4 ) {\n          this.etValue = this.convertGE( val )\n        }\n       } else {\n        this.etValue = this.convertGE( val )\n      }\n      /*\n      const [ year, month, day ] = val.split('-').map(Number)\n      let etDate = ethiopic.ge( year, month || 1, day  || 1)\n      this.etValue = etDate.year.toString().padStart(4,'0') + \"-\" + etDate.month.toString().padStart(2,'0') + \"-\" + etDate.day.toString().padStart(2, '0')\n      */\n    },\n    etValue (val) {\n      if ( !val ) {\n        this.value = val\n      } else if ( this.pickerType === 'year' ) {\n        if ( val.length === 4 ) {\n          this.value = this.convertEG( val )\n        }\n      } else {\n        this.value = this.convertEG( val )\n      }\n      /*\n      const [ etYear, etMonth, etDay ] = val.split('-').map(Number)\n      let gDate = ethiopic.eg( etYear, etMonth || 1, etDay  || 1)\n      this.value = gDate.year.toString().padStart(4,'0') + \"-\" + gDate.month.toString().padStart(2,'0') + \"-\" + gDate.day.toString().padStart(2, '0')\n      */\n    }\n  },\n  methods: {\n    convertQuantity(val, direction) {\n      const unitsofmeasure = {\n        'a': 'years',\n        'mo': 'months',\n        'wk': 'weeks',\n        'd': 'days',\n      }\n      const quant = /(-?\\d+)([a-z]{1,3})/\n\n      let match = val.match( quant )\n      if ( match.length === 3 ) {\n        try {\n          let value = match[1]\n          let unit = unitsofmeasure[ match[2] ]\n          if ( direction === \"subtract\" ) {\n            return this.$moment( this.$moment().subtract(value, unit) ).format('YYYY-MM-DD')\n          } else {\n            return this.$moment( this.$moment().add(value, unit) ).format('YYYY-MM-DD')\n          }\n        } catch (e) {\n          console.log(\"Failed to get date from quantity\",e)\n        }\n      }\n      return undefined\n    },\n    convertGE(val) {\n      if ( !val ) return val\n      const [ year, month, day ] = val.split('-').map(Number)\n      if ( this.pickerType === 'year' ) {\n        let etDate = ethiopic.ge( year, month || 6, day || 1) // so it will be the same year in both directions\n        return etDate.year.toString().padStart(4,'0')\n      } else {\n        let etDate = ethiopic.ge( year, month || 1, day || 1)\n        return etDate.year.toString().padStart(4,'0') + \"-\" + etDate.month.toString().padStart(2,'0') + \"-\" + etDate.day.toString().padStart(2, '0')\n      }\n    },\n    convertEG(val) {\n      if ( !val ) return val\n      const [ etYear, etMonth, etDay ] = val.split('-').map(Number)\n      if ( this.pickerType === 'year' ) {\n        let gDate = ethiopic.eg( etYear, etMonth|| 6, etDay || 1) // so it will be the same year in both directions\n        return gDate.year.toString().padStart(4,'0')\n      } else {\n        let gDate = ethiopic.eg( etYear, etMonth || 1, etDay || 1)\n        return gDate.year.toString().padStart(4,'0') + \"-\" + gDate.month.toString().padStart(2,'0') + \"-\" + gDate.day.toString().padStart(2, '0')\n      }\n    },\n    setupData() {\n      if ( this.displayType ) {\n        this.pickerType = this.displayType\n      }\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n          this.value = this.source.data\n          this.lockWatch = true\n          //console.log(\"SET value to \", this.source.data, this.slotProps.input)\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          //console.log(\"STR FHIRPATH\", this.slotProps.source.data, this.field)\n          if ( this.source.data.length == 1 ) {\n            this.value = this.source.data[0]\n            this.lockWatch = true\n          }\n        }\n        this.disabled = this.readOnlyIfSet && (!!this.value)\n        //console.log(this.source)\n      }\n    },\n    save (date) {\n      this.errors = []\n      this.$refs.menu.save(date)\n    }\n  }\n}\n</script>\n"]}]}