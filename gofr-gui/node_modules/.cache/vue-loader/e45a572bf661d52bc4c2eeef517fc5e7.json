{"remainingRequest":"/home/ally/gofr/gofr-gui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr/gofr-gui/src/components/fhir/fhir-date-time.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr/gofr-gui/src/components/fhir/fhir-date-time.vue","mtime":1619258123839},{"path":"/home/ally/gofr/gofr-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/gofr-gui/node_modules/babel-loader/lib/index.js","mtime":1619257191453},{"path":"/home/ally/gofr/gofr-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/gofr-gui/node_modules/vue-loader/lib/index.js","mtime":1619257191305}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBJaHJpc0VsZW1lbnQgZnJvbSAiLi4vaWhyaXMvaWhyaXMtZWxlbWVudC52dWUiCmltcG9ydCBWRXRoaW9waWFuRGF0ZVBpY2tlciBmcm9tICJ2dWV0aWZ5LWV0aGlvcGlhbi1jYWxlbmRhciIKaW1wb3J0IGV0aGlvcGljIGZyb20gImV0aGlvcGljLWNhbGVuZGFyIgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJmaGlyLWRhdGUtdGltZSIsCiAgcHJvcHM6IFsiZmllbGQiLCJtaW4iLCJtYXgiLCJiYXNlLW1pbiIsImJhc2UtbWF4IiwgImxhYmVsIiwgInNsb3RQcm9wcyIsICJwYXRoIiwgImVkaXQiLCJzbGljZU5hbWUiLCAKICAgICJtaW5WYWx1ZURhdGVUaW1lIiwgIm1heFZhbHVlRGF0ZVRpbWUiLCAibWluVmFsdWVRdWFudGl0eSIsICJtYXhWYWx1ZVF1YW50aXR5IiwgImRpc3BsYXlUeXBlIiwicmVhZE9ubHlJZlNldCIsICJjYWxlbmRhciIsCiAgICAiY29uc3RyYWludHMiXSwKICBjb21wb25lbnRzOiB7CiAgICBJaHJpc0VsZW1lbnQsCiAgICBWRXRoaW9waWFuRGF0ZVBpY2tlcgogIH0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICB2YWx1ZTogbnVsbCwKICAgICAgZXRWYWx1ZTogbnVsbCwKICAgICAgbWVudTogZmFsc2UsCiAgICAgIHNvdXJjZTogeyBwYXRoOiAiIiwgZGF0YToge30gfSwKICAgICAgcUZpZWxkOiAidmFsdWVEYXRlVGltZSIsCiAgICAgIHBpY2tlclR5cGU6ICJkYXRlIiwKICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICBzaG93R3JlZ29yaWFuOiBmYWxzZSwKICAgICAgZXJyb3JzOiBbXSwKICAgICAgbG9ja1dhdGNoOiBmYWxzZQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24oKSB7CiAgICAvL2NvbnNvbGUubG9nKCJDUkVBVEUgREFURVRJTUUiLHRoaXMuZmllbGQsdGhpcy5zbG90UHJvcHMpCiAgICB0aGlzLnNldHVwRGF0YSgpCiAgfSwKICBjb21wdXRlZDogewogICAgZGF0ZVZhbHVlTWF4OiBmdW5jdGlvbigpIHsKICAgICAgaWYgKCB0aGlzLm1heFZhbHVlUXVhbnRpdHkgKSB7CiAgICAgICAgbGV0IG1heERhdGUgPSB0aGlzLmNvbnZlcnRRdWFudGl0eSggdGhpcy5tYXhWYWx1ZVF1YW50aXR5LCAiYWRkIiApCiAgICAgICAgaWYgKCBtYXhEYXRlICkgewogICAgICAgICAgcmV0dXJuIG1heERhdGUKICAgICAgICB9CiAgICAgIH0gCiAgICAgIGlmICggdGhpcy5tYXhWYWx1ZURhdGUgKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubWF4VmFsdWVEYXRlCiAgICAgIH0KICAgICAgcmV0dXJuIHVuZGVmaW5lZAogICAgfSwKICAgIGRhdGVWYWx1ZU1pbjogZnVuY3Rpb24oKSB7CiAgICAgIGlmICggdGhpcy5taW5WYWx1ZVF1YW50aXR5ICkgewogICAgICAgIGxldCBtaW5EYXRlID0gdGhpcy5jb252ZXJ0UXVhbnRpdHkoIHRoaXMubWluVmFsdWVRdWFudGl0eSwgInN1YnRyYWN0IiApCiAgICAgICAgaWYgKCBtaW5EYXRlICkgewogICAgICAgICAgcmV0dXJuIG1pbkRhdGUKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoIHRoaXMubWluVmFsdWVEYXRlICkgewogICAgICAgIHJldHVybiB0aGlzLm1pblZhbHVlRGF0ZQogICAgICB9CiAgICAgIHJldHVybiB1bmRlZmluZWQKICAgIH0sCiAgICBtaW5ZZWFyOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuZGF0ZVZhbHVlTWluID8gdGhpcy5kYXRlVmFsdWVNaW4uc3Vic3RyaW5nKDAsNCkgOiB1bmRlZmluZWQKICAgIH0sCiAgICBtYXhZZWFyOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuZGF0ZVZhbHVlTWF4ID8gdGhpcy5kYXRlVmFsdWVNYXguc3Vic3RyaW5nKDAsNCkgOiB1bmRlZmluZWQKICAgIH0sCiAgICBtaW5ZZWFyRVQ6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5taW5WYWx1ZUVURGF0ZSA/IHRoaXMubWluVmFsdWVFVERhdGUuc3Vic3RyaW5nKDAsNCkgOiB1bmRlZmluZWQKICAgIH0sCiAgICBtYXhZZWFyRVQ6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5tYXhWYWx1ZUVURGF0ZSA/IHRoaXMubWF4VmFsdWVFVERhdGUuc3Vic3RyaW5nKDAsNCkgOiB1bmRlZmluZWQKICAgIH0sCiAgICBpc0V0aGlvcGlhbjogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmNhbGVuZGFyID09PSAiRXRoaW9waWFuIgogICAgfSwKICAgIG1pblZhbHVlRVREYXRlVGltZTogZnVuY3Rpb24oKSB7CiAgICAgIGlmICggdGhpcy5kYXRlVmFsdWVNaW4gKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEdFKCB0aGlzLmRhdGVWYWx1ZU1pbiApCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG51bGwKICAgICAgfQogICAgfSwKICAgIG1heFZhbHVlRVREYXRlVGltZTogZnVuY3Rpb24oKSB7CiAgICAgIGlmICggdGhpcy5kYXRlVmFsdWVNYXggKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEdFKCB0aGlzLmRhdGVWYWx1ZU1heCApCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG51bGwKICAgICAgfQogICAgfSwKICAgIGRpc3BsYXlWYWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgIGlmICggdGhpcy5pc0V0aGlvcGlhbiApIHsKICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSAmJiAiRXRoaW9waWFuOiAiK3RoaXMuZXRWYWx1ZSArICIgR3JlZ29yaWFuOiAiICsgdGhpcy52YWx1ZSAKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy52YWx1ZQogICAgICB9CiAgICB9LAogICAgaW5kZXg6IGZ1bmN0aW9uKCkgewogICAgICBpZiAoIHRoaXMuc2xvdFByb3BzICYmIHRoaXMuc2xvdFByb3BzLmlucHV0ICkgcmV0dXJuIHRoaXMuc2xvdFByb3BzLmlucHV0LmluZGV4CiAgICAgIGVsc2UgcmV0dXJuIHVuZGVmaW5lZAogICAgfSwKICAgIHJlcXVpcmVkOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuICh0aGlzLmluZGV4IHx8IDApIDwgdGhpcy5taW4KICAgIH0sCiAgICBydWxlczogZnVuY3Rpb24oKSB7CiAgICAgIGlmICggdGhpcy5yZXF1aXJlZCApIHsKICAgICAgICByZXR1cm4gWyB2ID0+ICEhdiB8fCB0aGlzLmxhYmVsKyIgaXMgcmVxdWlyZWQiIF0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW10KICAgICAgfQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIG1lbnUgKHZhbCkgewogICAgICBpZiAoIHRoaXMuaXNFdGhpb3BpYW4gKSB7CiAgICAgICAgIXRoaXMudmFsdWUgJiYgdmFsICYmIHNldFRpbWVvdXQoKCkgPT4gKHRoaXMuJHJlZnMuZXRQaWNrZXIuYWN0aXZlUGlja2VyID0gJ1lFQVInKSkKICAgICAgfSBlbHNlIHsKICAgICAgICAhdGhpcy52YWx1ZSAmJiB2YWwgJiYgc2V0VGltZW91dCgoKSA9PiAodGhpcy4kcmVmcy5waWNrZXIuYWN0aXZlUGlja2VyID0gJ1lFQVInKSkKICAgICAgfQogICAgfSwKICAgIHNob3dHcmVnb3JpYW4gKHZhbCkgewogICAgICAhdGhpcy52YWx1ZSAmJiB2YWwgJiYgc2V0VGltZW91dCgoKSA9PiAodGhpcy4kcmVmcy5nUGlja2VyLmFjdGl2ZVBpY2tlciA9ICdZRUFSJykpCiAgICB9LAogICAgc2xvdFByb3BzOiB7CiAgICAgIGhhbmRsZXIoKSB7CiAgICAgICAgLy9jb25zb2xlLmxvZygiV0FUQ0ggREFURVRJTUUiLHRoaXMuZmllbGQsdGhpcy5wYXRoLHRoaXMuc2xvdFByb3BzKQogICAgICAgIGlmICggIXRoaXMubG9ja1dhdGNoICkgewogICAgICAgICAgdGhpcy5zZXR1cERhdGEoKQogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZQogICAgfSwKICAgIHZhbHVlICh2YWwpIHsKICAgICAgaWYgKCAhdmFsICkgewogICAgICAgIHRoaXMuZXRWYWx1ZSA9IHZhbAogICAgICB9IGVsc2UgaWYgKCB0aGlzLnBpY2tlclR5cGUgPT09ICd5ZWFyJyApIHsKICAgICAgICBpZiAoIHZhbC5sZW5ndGggPT09IDQgKSB7CiAgICAgICAgICB0aGlzLmV0VmFsdWUgPSB0aGlzLmNvbnZlcnRHRSggdmFsICkKICAgICAgICB9CiAgICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZXRWYWx1ZSA9IHRoaXMuY29udmVydEdFKCB2YWwgKQogICAgICB9CiAgICB9LAogICAgZXRWYWx1ZSAodmFsKSB7CiAgICAgIGlmICggIXZhbCApIHsKICAgICAgICB0aGlzLnZhbHVlID0gdmFsCiAgICAgIH0gZWxzZSBpZiAoIHRoaXMucGlja2VyVHlwZSA9PT0gJ3llYXInICkgewogICAgICAgIGlmICggdmFsLmxlbmd0aCA9PT0gNCApIHsKICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmNvbnZlcnRFRyggdmFsICkKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuY29udmVydEVHKCB2YWwgKQogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBjb252ZXJ0UXVhbnRpdHkodmFsLCBkaXJlY3Rpb24pIHsKICAgICAgY29uc3QgdW5pdHNvZm1lYXN1cmUgPSB7CiAgICAgICAgJ2EnOiAneWVhcnMnLAogICAgICAgICdtbyc6ICdtb250aHMnLAogICAgICAgICd3ayc6ICd3ZWVrcycsCiAgICAgICAgJ2QnOiAnZGF5cycsCiAgICAgIH0KICAgICAgY29uc3QgcXVhbnQgPSAvKC0/XGQrKShbYS16XXsxLDN9KS8KCiAgICAgIGxldCBtYXRjaCA9IHZhbC5tYXRjaCggcXVhbnQgKQogICAgICBpZiAoIG1hdGNoLmxlbmd0aCA9PT0gMyApIHsKICAgICAgICB0cnkgewogICAgICAgICAgbGV0IHZhbHVlID0gbWF0Y2hbMV0KICAgICAgICAgIGxldCB1bml0ID0gdW5pdHNvZm1lYXN1cmVbIG1hdGNoWzJdIF0KICAgICAgICAgIGlmICggZGlyZWN0aW9uID09PSAic3VidHJhY3QiICkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kbW9tZW50KCB0aGlzLiRtb21lbnQoKS5zdWJ0cmFjdCh2YWx1ZSwgdW5pdCkgKS5mb3JtYXQoJ1lZWVktTU0tREQnKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1vbWVudCggdGhpcy4kbW9tZW50KCkuYWRkKHZhbHVlLCB1bml0KSApLmZvcm1hdCgnWVlZWS1NTS1ERCcpCiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgY29uc29sZS5sb2coIkZhaWxlZCB0byBnZXQgZGF0ZSBmcm9tIHF1YW50aXR5IixlKQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdW5kZWZpbmVkCiAgICB9LAogICAgY29udmVydEdFKHZhbCkgewogICAgICBpZiAoICF2YWwgKSByZXR1cm4gdmFsCiAgICAgIGNvbnN0IFsgeWVhciwgbW9udGgsIGRheSBdID0gdmFsLnNwbGl0KCctJykubWFwKE51bWJlcikKICAgICAgaWYgKCB0aGlzLnBpY2tlclR5cGUgPT09ICd5ZWFyJyApIHsKICAgICAgICBsZXQgZXREYXRlID0gZXRoaW9waWMuZ2UoIHllYXIsIG1vbnRoIHx8IDYsIGRheSB8fCAxKSAvLyBzbyBpdCB3aWxsIGJlIHRoZSBzYW1lIHllYXIgaW4gYm90aCBkaXJlY3Rpb25zCiAgICAgICAgcmV0dXJuIGV0RGF0ZS55ZWFyLnRvU3RyaW5nKCkucGFkU3RhcnQoNCwnMCcpIAogICAgICB9IGVsc2UgewogICAgICAgIGxldCBldERhdGUgPSBldGhpb3BpYy5nZSggeWVhciwgbW9udGggfHwgMSwgZGF5IHx8IDEpCiAgICAgICAgcmV0dXJuIGV0RGF0ZS55ZWFyLnRvU3RyaW5nKCkucGFkU3RhcnQoNCwnMCcpICsgIi0iICsgZXREYXRlLm1vbnRoLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwnMCcpICsgIi0iICsgZXREYXRlLmRheS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykKICAgICAgfQogICAgfSwKICAgIGNvbnZlcnRFRyh2YWwpIHsKICAgICAgaWYgKCAhdmFsICkgcmV0dXJuIHZhbAogICAgICBjb25zdCBbIGV0WWVhciwgZXRNb250aCwgZXREYXkgXSA9IHZhbC5zcGxpdCgnLScpLm1hcChOdW1iZXIpCiAgICAgIGlmICggdGhpcy5waWNrZXJUeXBlID09PSAneWVhcicgKSB7CiAgICAgICAgbGV0IGdEYXRlID0gZXRoaW9waWMuZWcoIGV0WWVhciwgZXRNb250aHx8IDYsIGV0RGF5IHx8IDEpIC8vIHNvIGl0IHdpbGwgYmUgdGhlIHNhbWUgeWVhciBpbiBib3RoIGRpcmVjdGlvbnMKICAgICAgICByZXR1cm4gZ0RhdGUueWVhci50b1N0cmluZygpLnBhZFN0YXJ0KDQsJzAnKSAKICAgICAgfSBlbHNlIHsKICAgICAgICBsZXQgZ0RhdGUgPSBldGhpb3BpYy5lZyggZXRZZWFyLCBldE1vbnRoIHx8IDEsIGV0RGF5IHx8IDEpCiAgICAgICAgcmV0dXJuIGdEYXRlLnllYXIudG9TdHJpbmcoKS5wYWRTdGFydCg0LCcwJykgKyAiLSIgKyBnRGF0ZS5tb250aC50b1N0cmluZygpLnBhZFN0YXJ0KDIsJzAnKSArICItIiArIGdEYXRlLmRheS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykKICAgICAgfQogICAgfSwKICAgIHNldHVwRGF0YSgpIHsKICAgICAgaWYgKCB0aGlzLmRpc3BsYXlUeXBlICkgewogICAgICAgIHRoaXMucGlja2VyVHlwZSA9IHRoaXMuZGlzcGxheVR5cGUKICAgICAgfQogICAgICBpZiAoIHRoaXMuc2xvdFByb3BzICYmIHRoaXMuc2xvdFByb3BzLnNvdXJjZSApIHsKICAgICAgICB0aGlzLnNvdXJjZSA9IHsgcGF0aDogdGhpcy5zbG90UHJvcHMuc291cmNlLnBhdGgrIi4iK3RoaXMuZmllbGQsIGRhdGE6IHt9IH0KICAgICAgICBpZiAoIHRoaXMuc2xvdFByb3BzLnNvdXJjZS5mcm9tQXJyYXkgKSB7CiAgICAgICAgICB0aGlzLnNvdXJjZS5kYXRhID0gdGhpcy5zbG90UHJvcHMuc291cmNlLmRhdGEKICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnNvdXJjZS5kYXRhCiAgICAgICAgICB0aGlzLmxvY2tXYXRjaCA9IHRydWUKICAgICAgICAgIC8vY29uc29sZS5sb2coIlNFVCB2YWx1ZSB0byAiLCB0aGlzLnNvdXJjZS5kYXRhLCB0aGlzLnNsb3RQcm9wcy5pbnB1dCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGV0IGV4cHJlc3Npb24gPSB0aGlzLiRmaGlydXRpbHMucGF0aEZpZWxkRXhwcmVzc2lvbiggdGhpcy5maWVsZCApCiAgICAgICAgICB0aGlzLnNvdXJjZS5kYXRhID0gdGhpcy4kZmhpcnBhdGguZXZhbHVhdGUoIHRoaXMuc2xvdFByb3BzLnNvdXJjZS5kYXRhLCBleHByZXNzaW9uICkKICAgICAgICAgIC8vY29uc29sZS5sb2coIlNUUiBGSElSUEFUSCIsIHRoaXMuc2xvdFByb3BzLnNvdXJjZS5kYXRhLCB0aGlzLmZpZWxkKQogICAgICAgICAgaWYgKCB0aGlzLnNvdXJjZS5kYXRhLmxlbmd0aCA9PSAxICkgewogICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5zb3VyY2UuZGF0YVswXQogICAgICAgICAgICB0aGlzLmxvY2tXYXRjaCA9IHRydWUKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IHRoaXMucmVhZE9ubHlJZlNldCAmJiAoISF0aGlzLnZhbHVlKQogICAgICAgIC8vY29uc29sZS5sb2codGhpcy5zb3VyY2UpCiAgICAgIH0KICAgIH0sCiAgICBzYXZlIChkYXRlKSB7CiAgICAgIHRoaXMuZXJyb3JzID0gW10KICAgICAgdGhpcy4kcmVmcy5tZW51LnNhdmUoZGF0ZSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["fhir-date-time.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+JA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"fhir-date-time.vue","sourceRoot":"src/components/fhir","sourcesContent":["<template>\n  <ihris-element :edit=\"edit\" :loading=\"false\">\n    <template #form>\n     <v-menu \n        ref=\"menu\" \n        v-model=\"menu\" \n        :close-on-content-click=\"false\" \n        transition=\"scale-transition\" \n        offset-y \n        min-width=\"290px\"\n      >\n        <template v-slot:activator=\"{ on }\">\n          <v-text-field\n            v-model=\"displayValue\"\n            :label=\"label\"\n            prepend-inner-icon=\"mdi-calendar\"\n            readonly\n            v-on=\"on\"\n            outlined\n            hide-details=\"auto\"\n            :rules=\"rules\"\n            :error-messages=\"errors\"\n            dense\n          >\n            <template #label>{{label}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n          </v-text-field>\n        </template>\n\n        <v-container class=\"ma-0 pa-0\" v-if=\"isEthiopian\">\n          <v-row no-gutters>\n            <v-card min-width=\"300px\">\n              <v-card-title class=\"primary white--text\">\n                Ethiopian Calendar<v-spacer/><v-btn\n                  dark\n                  class=\"white--text\"\n                  icon\n                  @click=\"showGregorian = !showGregorian\"\n                  group\n                  small\n                  ><v-icon v-if=\"!showGregorian\" >mdi-calendar-multiple</v-icon><v-icon v-else>mdi-calendar</v-icon></v-btn>\n              </v-card-title>\n              <v-card-text v-if=\"pickerType==='year'\">\n                <br />\n                <v-text-field \n                  v-model=\"etValue\" \n                  clearable\n                  type=\"number\" \n                  :disabled=\"disabled\" \n                  :label=\"label\" \n                  :min=\"minYear\" \n                  :max=\"maxYear\" \n                  :rules=\"rules\" \n                  :error-messages=\"errors\"\n                  @change=\"errors = []\"\n                  dense\n                >\n                </v-text-field>\n              </v-card-text>\n              <v-ethiopian-date-picker\n                v-else\n                ref=\"etPicker\"\n                label=\"Ethiopian\"\n                color=\"secondary\"\n                :landscape=\"$vuetify.breakpoint.smAndUp\"\n                v-model=\"etValue\"\n                :max=\"maxValueETDateTime\"\n                :min=\"minValueETDateTime\"\n                :type=\"pickerType\"\n                :disabled=\"disabled\"\n                @change=\"save\"\n                locale=\"am\"\n                ></v-ethiopian-date-picker>\n            </v-card>\n            <v-card v-if=\"showGregorian\" min-width=\"300px\">\n              <v-card-title class=\"primary white--text\">\n                Gregorian Calendar<v-spacer/><v-btn\n                  dark\n                  class=\"white--text\"\n                  icon\n                  @click=\"showGregorian = false\"\n                  group\n                  small\n                  ><v-icon>mdi-close</v-icon></v-btn>\n              </v-card-title>\n              <v-card-text v-if=\"pickerType==='year'\">\n                <br />\n                <v-text-field \n                  v-model=\"value\" \n                  clearable\n                  type=\"number\" \n                  :disabled=\"disabled\" \n                  :label=\"label\" \n                  :min=\"minYear\" \n                  :max=\"maxYear\" \n                  :rules=\"rules\" \n                  :error-messages=\"errors\"\n                  @change=\"errors = []\"\n                  dense\n                >\n                </v-text-field>\n              </v-card-text>\n              <v-date-picker\n                v-else\n                ref=\"gPicker\"\n                color=\"secondary\"\n                :landscape=\"$vuetify.breakpoint.smAndUp\"\n                v-model=\"value\"\n                :max=\"dateValueMax\"\n                :min=\"dateValueMin\"\n                :type=\"pickerType\"\n                :disabled=\"disabled\"\n                @change=\"save\"\n                ></v-date-picker>\n            </v-card>\n          </v-row>\n        </v-container>\n        <v-card min-width=\"300px\" v-else-if=\"pickerType==='year'\" >\n          <v-card-text>\n            <br />\n            <v-text-field \n              v-model=\"value\" \n              type=\"number\" \n              :disabled=\"disabled\" \n              :label=\"label\" \n              :min=\"minYear\" \n              :max=\"maxYear\" \n              :rules=\"rules\" \n              :error-messages=\"errors\"\n              @change=\"errors = []\"\n              dense\n            >\n            </v-text-field>\n          </v-card-text>\n        </v-card>\n        <v-date-picker\n          v-else\n          ref=\"picker\"\n          color=\"secondary\"\n          :landscape=\"$vuetify.breakpoint.smAndUp\"\n          v-model=\"value\"\n          :max=\"dateValueMax\"\n          :min=\"dateValueMin\"\n          :type=\"pickerType\"\n          :disabled=\"disabled\"\n          @change=\"save\"\n        ></v-date-picker>\n\n      </v-menu>\n    </template>\n    <template #header>\n      {{label}}\n    </template>\n    <template #value>\n      {{displayValue}}\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport IhrisElement from \"../ihris/ihris-element.vue\"\nimport VEthiopianDatePicker from \"vuetify-ethiopian-calendar\"\nimport ethiopic from \"ethiopic-calendar\"\n\nexport default {\n  name: \"fhir-date-time\",\n  props: [\"field\",\"min\",\"max\",\"base-min\",\"base-max\", \"label\", \"slotProps\", \"path\", \"edit\",\"sliceName\", \n    \"minValueDateTime\", \"maxValueDateTime\", \"minValueQuantity\", \"maxValueQuantity\", \"displayType\",\"readOnlyIfSet\", \"calendar\",\n    \"constraints\"],\n  components: {\n    IhrisElement,\n    VEthiopianDatePicker\n  },\n  data: function() {\n    return {\n      value: null,\n      etValue: null,\n      menu: false,\n      source: { path: \"\", data: {} },\n      qField: \"valueDateTime\",\n      pickerType: \"date\",\n      disabled: false,\n      showGregorian: false,\n      errors: [],\n      lockWatch: false\n    }\n  },\n  created: function() {\n    //console.log(\"CREATE DATETIME\",this.field,this.slotProps)\n    this.setupData()\n  },\n  computed: {\n    dateValueMax: function() {\n      if ( this.maxValueQuantity ) {\n        let maxDate = this.convertQuantity( this.maxValueQuantity, \"add\" )\n        if ( maxDate ) {\n          return maxDate\n        }\n      } \n      if ( this.maxValueDate ) {\n        return this.maxValueDate\n      }\n      return undefined\n    },\n    dateValueMin: function() {\n      if ( this.minValueQuantity ) {\n        let minDate = this.convertQuantity( this.minValueQuantity, \"subtract\" )\n        if ( minDate ) {\n          return minDate\n        }\n      } else if ( this.minValueDate ) {\n        return this.minValueDate\n      }\n      return undefined\n    },\n    minYear: function() {\n      return this.dateValueMin ? this.dateValueMin.substring(0,4) : undefined\n    },\n    maxYear: function() {\n      return this.dateValueMax ? this.dateValueMax.substring(0,4) : undefined\n    },\n    minYearET: function() {\n      return this.minValueETDate ? this.minValueETDate.substring(0,4) : undefined\n    },\n    maxYearET: function() {\n      return this.maxValueETDate ? this.maxValueETDate.substring(0,4) : undefined\n    },\n    isEthiopian: function() {\n      return this.calendar === \"Ethiopian\"\n    },\n    minValueETDateTime: function() {\n      if ( this.dateValueMin ) {\n        return this.convertGE( this.dateValueMin )\n      } else {\n        return null\n      }\n    },\n    maxValueETDateTime: function() {\n      if ( this.dateValueMax ) {\n        return this.convertGE( this.dateValueMax )\n      } else {\n        return null\n      }\n    },\n    displayValue: function() {\n      if ( this.isEthiopian ) {\n        return this.value && \"Ethiopian: \"+this.etValue + \" Gregorian: \" + this.value \n      } else {\n        return this.value\n      }\n    },\n    index: function() {\n      if ( this.slotProps && this.slotProps.input ) return this.slotProps.input.index\n      else return undefined\n    },\n    required: function() {\n      return (this.index || 0) < this.min\n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.label+\" is required\" ]\n      } else {\n        return []\n      }\n    }\n  },\n  watch: {\n    menu (val) {\n      if ( this.isEthiopian ) {\n        !this.value && val && setTimeout(() => (this.$refs.etPicker.activePicker = 'YEAR'))\n      } else {\n        !this.value && val && setTimeout(() => (this.$refs.picker.activePicker = 'YEAR'))\n      }\n    },\n    showGregorian (val) {\n      !this.value && val && setTimeout(() => (this.$refs.gPicker.activePicker = 'YEAR'))\n    },\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH DATETIME\",this.field,this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    },\n    value (val) {\n      if ( !val ) {\n        this.etValue = val\n      } else if ( this.pickerType === 'year' ) {\n        if ( val.length === 4 ) {\n          this.etValue = this.convertGE( val )\n        }\n       } else {\n        this.etValue = this.convertGE( val )\n      }\n    },\n    etValue (val) {\n      if ( !val ) {\n        this.value = val\n      } else if ( this.pickerType === 'year' ) {\n        if ( val.length === 4 ) {\n          this.value = this.convertEG( val )\n        }\n      } else {\n        this.value = this.convertEG( val )\n      }\n    }\n  },\n  methods: {\n    convertQuantity(val, direction) {\n      const unitsofmeasure = {\n        'a': 'years',\n        'mo': 'months',\n        'wk': 'weeks',\n        'd': 'days',\n      }\n      const quant = /(-?\\d+)([a-z]{1,3})/\n\n      let match = val.match( quant )\n      if ( match.length === 3 ) {\n        try {\n          let value = match[1]\n          let unit = unitsofmeasure[ match[2] ]\n          if ( direction === \"subtract\" ) {\n            return this.$moment( this.$moment().subtract(value, unit) ).format('YYYY-MM-DD')\n          } else {\n            return this.$moment( this.$moment().add(value, unit) ).format('YYYY-MM-DD')\n          }\n        } catch (e) {\n          console.log(\"Failed to get date from quantity\",e)\n        }\n      }\n      return undefined\n    },\n    convertGE(val) {\n      if ( !val ) return val\n      const [ year, month, day ] = val.split('-').map(Number)\n      if ( this.pickerType === 'year' ) {\n        let etDate = ethiopic.ge( year, month || 6, day || 1) // so it will be the same year in both directions\n        return etDate.year.toString().padStart(4,'0') \n      } else {\n        let etDate = ethiopic.ge( year, month || 1, day || 1)\n        return etDate.year.toString().padStart(4,'0') + \"-\" + etDate.month.toString().padStart(2,'0') + \"-\" + etDate.day.toString().padStart(2, '0')\n      }\n    },\n    convertEG(val) {\n      if ( !val ) return val\n      const [ etYear, etMonth, etDay ] = val.split('-').map(Number)\n      if ( this.pickerType === 'year' ) {\n        let gDate = ethiopic.eg( etYear, etMonth|| 6, etDay || 1) // so it will be the same year in both directions\n        return gDate.year.toString().padStart(4,'0') \n      } else {\n        let gDate = ethiopic.eg( etYear, etMonth || 1, etDay || 1)\n        return gDate.year.toString().padStart(4,'0') + \"-\" + gDate.month.toString().padStart(2,'0') + \"-\" + gDate.day.toString().padStart(2, '0')\n      }\n    },\n    setupData() {\n      if ( this.displayType ) {\n        this.pickerType = this.displayType\n      }\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n          this.value = this.source.data\n          this.lockWatch = true\n          //console.log(\"SET value to \", this.source.data, this.slotProps.input)\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          //console.log(\"STR FHIRPATH\", this.slotProps.source.data, this.field)\n          if ( this.source.data.length == 1 ) {\n            this.value = this.source.data[0]\n            this.lockWatch = true\n          }\n        }\n        this.disabled = this.readOnlyIfSet && (!!this.value)\n        //console.log(this.source)\n      }\n    },\n    save (date) {\n      this.errors = []\n      this.$refs.menu.save(date)\n    }\n  }\n}\n</script>\n"]}]}