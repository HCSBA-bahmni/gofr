{"remainingRequest":"/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr/facility-recon-gui/src/components/fhir/fhir-time.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr/facility-recon-gui/src/components/fhir/fhir-time.vue","mtime":1619428444495},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/babel-loader/lib/index.js","mtime":1619257191453},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js","mtime":1619257191305}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBJaHJpc0VsZW1lbnQgZnJvbSAiLi4vaWhyaXMvaWhyaXMtZWxlbWVudC52dWUiCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImZoaXItZGF0ZS10aW1lIiwKICBwcm9wczogWyJmaWVsZCIsIm1pbiIsIm1heCIsImJhc2UtbWluIiwiYmFzZS1tYXgiLCAibGFiZWwiLCAic2xvdFByb3BzIiwgInBhdGgiLCAiZWRpdCIsInNsaWNlTmFtZSIsCiAgICAibWluVmFsdWVEYXRlVGltZSIsICJtYXhWYWx1ZURhdGVUaW1lIiwgIm1pblZhbHVlUXVhbnRpdHkiLCAibWF4VmFsdWVRdWFudGl0eSIsICJkaXNwbGF5VHlwZSIsInJlYWRPbmx5SWZTZXQiLCAiY2FsZW5kYXIiLAogICAgImNvbnN0cmFpbnRzIl0sCiAgY29tcG9uZW50czogewogICAgSWhyaXNFbGVtZW50CiAgfSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbHVlOiBudWxsLAogICAgICBldFZhbHVlOiBudWxsLAogICAgICBtZW51OiBmYWxzZSwKICAgICAgc291cmNlOiB7IHBhdGg6ICIiLCBkYXRhOiB7fSB9LAogICAgICBxRmllbGQ6ICJ2YWx1ZURhdGVUaW1lIiwKICAgICAgcGlja2VyVHlwZTogImRhdGUiLAogICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgIGVycm9yczogW10sCiAgICAgIGxvY2tXYXRjaDogZmFsc2UsCiAgICAgIGRpc3BsYXlWYWx1ZTogJycKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uKCkgewogICAgLy9jb25zb2xlLmxvZygiQ1JFQVRFIERBVEVUSU1FIix0aGlzLmZpZWxkLHRoaXMuc2xvdFByb3BzKQogICAgdGhpcy5zZXR1cERhdGEoKQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGluZGV4OiBmdW5jdGlvbigpIHsKICAgICAgaWYgKCB0aGlzLnNsb3RQcm9wcyAmJiB0aGlzLnNsb3RQcm9wcy5pbnB1dCApIHJldHVybiB0aGlzLnNsb3RQcm9wcy5pbnB1dC5pbmRleAogICAgICBlbHNlIHJldHVybiB1bmRlZmluZWQKICAgIH0sCiAgICByZXF1aXJlZDogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiAodGhpcy5pbmRleCB8fCAwKSA8IHRoaXMubWluCiAgICB9LAogICAgcnVsZXM6IGZ1bmN0aW9uKCkgewogICAgICBpZiAoIHRoaXMucmVxdWlyZWQgKSB7CiAgICAgICAgcmV0dXJuIFsgdiA9PiAhIXYgfHwgdGhpcy5sYWJlbCsiIGlzIHJlcXVpcmVkIiBdCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtdCiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBzbG90UHJvcHM6IHsKICAgICAgaGFuZGxlcigpIHsKICAgICAgICAvL2NvbnNvbGUubG9nKCJXQVRDSCBEQVRFVElNRSIsdGhpcy5maWVsZCx0aGlzLnBhdGgsdGhpcy5zbG90UHJvcHMpCiAgICAgICAgaWYgKCAhdGhpcy5sb2NrV2F0Y2ggKSB7CiAgICAgICAgICB0aGlzLnNldHVwRGF0YSgpCiAgICAgICAgfQogICAgICB9LAogICAgICBkZWVwOiB0cnVlCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXR1cERhdGEoKSB7CiAgICAgIGlmICggdGhpcy5zbG90UHJvcHMgJiYgdGhpcy5zbG90UHJvcHMuc291cmNlICkgewogICAgICAgIHRoaXMuc291cmNlID0geyBwYXRoOiB0aGlzLnNsb3RQcm9wcy5zb3VyY2UucGF0aCsiLiIrdGhpcy5maWVsZCwgZGF0YToge30gfQogICAgICAgIGlmICggdGhpcy5zbG90UHJvcHMuc291cmNlLmZyb21BcnJheSApIHsKICAgICAgICAgIHRoaXMuc291cmNlLmRhdGEgPSB0aGlzLnNsb3RQcm9wcy5zb3VyY2UuZGF0YQogICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc291cmNlLmRhdGEKICAgICAgICAgIHRoaXMubG9ja1dhdGNoID0gdHJ1ZQogICAgICAgICAgLy9jb25zb2xlLmxvZygiU0VUIHZhbHVlIHRvICIsIHRoaXMuc291cmNlLmRhdGEsIHRoaXMuc2xvdFByb3BzLmlucHV0KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsZXQgZXhwcmVzc2lvbiA9IHRoaXMuJGZoaXJ1dGlscy5wYXRoRmllbGRFeHByZXNzaW9uKCB0aGlzLmZpZWxkICkKICAgICAgICAgIHRoaXMuc291cmNlLmRhdGEgPSB0aGlzLiRmaGlycGF0aC5ldmFsdWF0ZSggdGhpcy5zbG90UHJvcHMuc291cmNlLmRhdGEsIGV4cHJlc3Npb24gKQogICAgICAgICAgLy9jb25zb2xlLmxvZygiU1RSIEZISVJQQVRIIiwgdGhpcy5zbG90UHJvcHMuc291cmNlLmRhdGEsIHRoaXMuZmllbGQpCiAgICAgICAgICBpZiAoIHRoaXMuc291cmNlLmRhdGEubGVuZ3RoID09IDEgKSB7CiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnNvdXJjZS5kYXRhWzBdCiAgICAgICAgICAgIHRoaXMubG9ja1dhdGNoID0gdHJ1ZQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmRpc2FibGVkID0gdGhpcy5yZWFkT25seUlmU2V0ICYmICghIXRoaXMudmFsdWUpCiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnNvdXJjZSkKICAgICAgfQogICAgfSwKICAgIHNhdmUgKGRhdGUpIHsKICAgICAgdGhpcy5lcnJvcnMgPSBbXQogICAgICB0aGlzLiRyZWZzLm1lbnUuc2F2ZShkYXRlKQogICAgfQogIH0KfQo="},{"version":3,"sources":["fhir-time.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"fhir-time.vue","sourceRoot":"src/components/fhir","sourcesContent":["<template>\n  <ihris-element :edit=\"edit\" :loading=\"false\">\n    <template #form>\n     <v-menu\n        ref=\"menu\"\n        v-model=\"menu\"\n        :close-on-content-click=\"false\"\n        transition=\"scale-transition\"\n        offset-y\n        min-width=\"290px\"\n      >\n        <template v-slot:activator=\"{ on }\">\n          <v-text-field\n            v-model=\"displayValue\"\n            :label=\"label\"\n            prepend-inner-icon=\"mdi-calendar\"\n            readonly\n            v-on=\"on\"\n            outlined\n            hide-details=\"auto\"\n            :rules=\"rules\"\n            :error-messages=\"errors\"\n            dense\n          >\n            <template #label>{{label}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n          </v-text-field>\n        </template>\n        <v-time-picker\n          ref=\"picker\"\n          color=\"secondary\"\n          format=\"24hr\"\n          :landscape=\"$vuetify.breakpoint.smAndUp\"\n          v-model=\"displayValue\"\n          :disabled=\"disabled\"\n          @change=\"save\"\n        ></v-time-picker>\n\n      </v-menu>\n    </template>\n    <template #header>\n      {{label}}\n    </template>\n    <template #value>\n      {{displayValue}}\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport IhrisElement from \"../ihris/ihris-element.vue\"\n\nexport default {\n  name: \"fhir-date-time\",\n  props: [\"field\",\"min\",\"max\",\"base-min\",\"base-max\", \"label\", \"slotProps\", \"path\", \"edit\",\"sliceName\",\n    \"minValueDateTime\", \"maxValueDateTime\", \"minValueQuantity\", \"maxValueQuantity\", \"displayType\",\"readOnlyIfSet\", \"calendar\",\n    \"constraints\"],\n  components: {\n    IhrisElement\n  },\n  data: function() {\n    return {\n      value: null,\n      etValue: null,\n      menu: false,\n      source: { path: \"\", data: {} },\n      qField: \"valueDateTime\",\n      pickerType: \"date\",\n      disabled: false,\n      errors: [],\n      lockWatch: false,\n      displayValue: ''\n    }\n  },\n  created: function() {\n    //console.log(\"CREATE DATETIME\",this.field,this.slotProps)\n    this.setupData()\n  },\n  computed: {\n    index: function() {\n      if ( this.slotProps && this.slotProps.input ) return this.slotProps.input.index\n      else return undefined\n    },\n    required: function() {\n      return (this.index || 0) < this.min\n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.label+\" is required\" ]\n      } else {\n        return []\n      }\n    }\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH DATETIME\",this.field,this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    setupData() {\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n          this.value = this.source.data\n          this.lockWatch = true\n          //console.log(\"SET value to \", this.source.data, this.slotProps.input)\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          //console.log(\"STR FHIRPATH\", this.slotProps.source.data, this.field)\n          if ( this.source.data.length == 1 ) {\n            this.value = this.source.data[0]\n            this.lockWatch = true\n          }\n        }\n        this.disabled = this.readOnlyIfSet && (!!this.value)\n        //console.log(this.source)\n      }\n    },\n    save (date) {\n      this.errors = []\n      this.$refs.menu.save(date)\n    }\n  }\n}\n</script>\n"]}]}