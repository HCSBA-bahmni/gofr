{"remainingRequest":"/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr/facility-recon-gui/src/components/fhir/fhir-boolean.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr/facility-recon-gui/src/components/fhir/fhir-boolean.vue","mtime":1619258142803},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/babel-loader/lib/index.js","mtime":1619257191453},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js","mtime":1619257191305}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBJaHJpc0VsZW1lbnQgZnJvbSAiLi4vaWhyaXMvaWhyaXMtZWxlbWVudC52dWUiCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImZoaXItYm9vbGVhbiIsCiAgcHJvcHM6IFsiZmllbGQiLCAibGFiZWwiLCAibWluIiwgIm1heCIsICJpZCIsICJwYXRoIiwgInNsb3RQcm9wcyIsICJzbGljZU5hbWUiLCJiYXNlLW1pbiIsImJhc2UtbWF4IiwgImVkaXQiLCAicmVhZE9ubHlJZlNldCIsCiAgICAiY29uc3RyYWludHMiXSwKICBjb21wb25lbnRzOiB7CiAgICBJaHJpc0VsZW1lbnQKICB9LAogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgc291cmNlOiB7IHBhdGg6ICIiLCBkYXRhOiB7fSB9LAogICAgICB2YWx1ZTogdHJ1ZSwKICAgICAgcUZpZWxkOiAidmFsdWVCb29sZWFuIiwKICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICBlcnJvcnM6IFtdLAogICAgICBsb2NrV2F0Y2g6IGZhbHNlCiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbigpIHsKICAgIC8vY29uc29sZS5sb2coIkNSRUFURSBTVFJJTkciLHRoaXMuZmllbGQsdGhpcy5zbG90UHJvcHMpCiAgICB0aGlzLnNldHVwRGF0YSgpCiAgfSwKICB3YXRjaDogewogICAgc2xvdFByb3BzOiB7CiAgICAgIGhhbmRsZXIoKSB7CiAgICAgICAgLy9jb25zb2xlLmxvZygiV0FUQ0ggU1RSSU5HIix0aGlzLmZpZWxkLHRoaXMucGF0aCx0aGlzLnNsb3RQcm9wcykKICAgICAgICBpZiAoICF0aGlzLmxvY2tXYXRjaCApIHsKICAgICAgICAgIHRoaXMuc2V0dXBEYXRhKCkKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNldHVwRGF0YSgpIHsKICAgICAgaWYgKCB0aGlzLnNsb3RQcm9wcyAmJiB0aGlzLnNsb3RQcm9wcy5zb3VyY2UgKSB7CiAgICAgICAgdGhpcy5zb3VyY2UgPSB7IHBhdGg6IHRoaXMuc2xvdFByb3BzLnNvdXJjZS5wYXRoKyIuIit0aGlzLmZpZWxkLCBkYXRhOiB7fSB9CiAgICAgICAgaWYgKCB0aGlzLnNsb3RQcm9wcy5zb3VyY2UuZnJvbUFycmF5ICkgewogICAgICAgICAgdGhpcy5zb3VyY2UuZGF0YSA9IHRoaXMuc2xvdFByb3BzLnNvdXJjZS5kYXRhCiAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5zb3VyY2UuZGF0YQogICAgICAgICAgdGhpcy5sb2NrV2F0Y2ggPSB0cnVlCiAgICAgICAgICAvL2NvbnNvbGUubG9nKCJTRVQgdmFsdWUgdG8gIiwgdGhpcy5zb3VyY2UuZGF0YSwgdGhpcy5zbG90UHJvcHMuaW5wdXQpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxldCBleHByZXNzaW9uID0gdGhpcy4kZmhpcnV0aWxzLnBhdGhGaWVsZEV4cHJlc3Npb24oIHRoaXMuZmllbGQgKQogICAgICAgICAgdGhpcy5zb3VyY2UuZGF0YSA9IHRoaXMuJGZoaXJwYXRoLmV2YWx1YXRlKCB0aGlzLnNsb3RQcm9wcy5zb3VyY2UuZGF0YSwgZXhwcmVzc2lvbiApCiAgICAgICAgICAvL2NvbnNvbGUubG9nKCJTVFIgRkhJUlBBVEgiLCB0aGlzLnNsb3RQcm9wcy5zb3VyY2UuZGF0YSwgdGhpcy5maWVsZCkKICAgICAgICAgIGlmICggdGhpcy5zb3VyY2UuZGF0YS5sZW5ndGggPT0gMSApIHsKICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc291cmNlLmRhdGFbMF0KICAgICAgICAgICAgdGhpcy5sb2NrV2F0Y2ggPSB0cnVlCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMuZGlzYWJsZWQgPSB0aGlzLnJlYWRPbmx5SWZTZXQgJiYgKCEhdGhpcy52YWx1ZSkKICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuc291cmNlKQogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgaW5kZXg6IGZ1bmN0aW9uKCkgewogICAgICBpZiAoIHRoaXMuc2xvdFByb3BzICYmIHRoaXMuc2xvdFByb3BzLmlucHV0ICkgcmV0dXJuIHRoaXMuc2xvdFByb3BzLmlucHV0LmluZGV4CiAgICAgIGVsc2UgcmV0dXJuIHVuZGVmaW5lZAogICAgfSwKICAgIGRpc3BsYXk6IGZ1bmN0aW9uKCkgewogICAgICBpZiAoIHRoaXMuc2xvdFByb3BzICYmIHRoaXMuc2xvdFByb3BzLmlucHV0KSByZXR1cm4gdGhpcy5zbG90UHJvcHMuaW5wdXQubGFiZWwKICAgICAgZWxzZSByZXR1cm4gdGhpcy5sYWJlbAogICAgfSwKICAgIHJlcXVpcmVkOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuICh0aGlzLmluZGV4IHx8IDApIDwgdGhpcy5taW4KICAgIH0sCiAgICBydWxlczogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBbXQogICAgICAvKiBmb3IgYm9vbGVhbiBmYWxzZSBpcyBvayBzbyBubyB2YWxpZGF0aW9uIHJlcXVpcmVkCiAgICAgIGlmICggdGhpcy5yZXF1aXJlZCApIHsKICAgICAgICByZXR1cm4gWyB2ID0+ICEhdiB8fCB0aGlzLmRpc3BsYXkrIiBpcyByZXF1aXJlZCIgXQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbXQogICAgICB9CiAgICAgICovCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["fhir-boolean.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"fhir-boolean.vue","sourceRoot":"src/components/fhir","sourcesContent":["<template>\n  <ihris-element :edit=\"edit\" :loading=\"false\">\n    <template #form>\n      <v-switch\n        v-model=\"value\"\n        :label=\"display+`: ${value.toString()}`\"\n        :disabled=\"disabled\"\n        :rules=\"rules\"\n        dense\n        :error-messages=\"errors\"\n        @change=\"errors = []\"\n      >\n      <template #label>{{display}}: {{value.toString()}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n      </v-switch>\n    </template>\n    <template #header>\n      {{display}}\n    </template>\n    <template #value>\n      {{value}}\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport IhrisElement from \"../ihris/ihris-element.vue\"\n\nexport default {\n  name: \"fhir-boolean\",\n  props: [\"field\", \"label\", \"min\", \"max\", \"id\", \"path\", \"slotProps\", \"sliceName\",\"base-min\",\"base-max\", \"edit\", \"readOnlyIfSet\",\n    \"constraints\"],\n  components: {\n    IhrisElement\n  },\n  data: function() {\n    return {\n      source: { path: \"\", data: {} },\n      value: true,\n      qField: \"valueBoolean\",\n      disabled: false,\n      errors: [],\n      lockWatch: false\n    }\n  },\n  created: function() {\n    //console.log(\"CREATE STRING\",this.field,this.slotProps)\n    this.setupData()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH STRING\",this.field,this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    setupData() {\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n          this.value = this.source.data\n          this.lockWatch = true\n          //console.log(\"SET value to \", this.source.data, this.slotProps.input)\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          //console.log(\"STR FHIRPATH\", this.slotProps.source.data, this.field)\n          if ( this.source.data.length == 1 ) {\n            this.value = this.source.data[0]\n            this.lockWatch = true\n          }\n        }\n        this.disabled = this.readOnlyIfSet && (!!this.value)\n        //console.log(this.source)\n      }\n    }\n  },\n  computed: {\n    index: function() {\n      if ( this.slotProps && this.slotProps.input ) return this.slotProps.input.index\n      else return undefined\n    },\n    display: function() {\n      if ( this.slotProps && this.slotProps.input) return this.slotProps.input.label\n      else return this.label\n    },\n    required: function() {\n      return (this.index || 0) < this.min\n    },\n    rules: function() {\n      return []\n      /* for boolean false is ok so no validation required\n      if ( this.required ) {\n        return [ v => !!v || this.display+\" is required\" ]\n      } else {\n        return []\n      }\n      */\n    }\n  }\n}\n</script>\n"]}]}