{"remainingRequest":"/home/ally/gofr/gofr-gui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr/gofr-gui/src/components/RolesManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr/gofr-gui/src/components/RolesManagement.vue","mtime":1619257194369},{"path":"/home/ally/gofr/gofr-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/gofr-gui/node_modules/babel-loader/lib/index.js","mtime":1619257191453},{"path":"/home/ally/gofr/gofr-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/gofr-gui/node_modules/vue-loader/lib/index.js","mtime":1619257191305}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHsgZ2VuZXJhbE1peGluIH0gZnJvbSAnLi4vbWl4aW5zL2dlbmVyYWxNaXhpbicKCmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtnZW5lcmFsTWl4aW5dLAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgcm9sZToge30sCiAgICAgIHRhc2s6ICcnCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICByb2xlU2VsZWN0ZWQgKGlkKSB7CiAgICAgIHRoaXMucm9sZSA9IHRoaXMucm9sZXMuZmluZCgocm9sZSkgPT4gewogICAgICAgIHJldHVybiByb2xlLnZhbHVlID09PSBpZAogICAgICB9KQogICAgfSwKICAgIHNhdmVSb2xlICgpIHsKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUucHJvZ3Jlc3NUaXRsZSA9ICdVcGRhdGluZyByb2xlJwogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5keW5hbWljUHJvZ3Jlc3MgPSB0cnVlCiAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgncm9sZScsIEpTT04uc3RyaW5naWZ5KHRoaXMucm9sZSkpCiAgICAgIGF4aW9zLnBvc3QoJy91cGRhdGVSb2xlJywgZm9ybURhdGEsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgICAgfQogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5keW5hbWljUHJvZ3Jlc3MgPSBmYWxzZQogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmRpYWxvZ0Vycm9yID0gdHJ1ZQogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmVycm9yVGl0bGUgPSAnSW5mbycKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5lcnJvckNvbG9yID0gJ3ByaW1hcnknCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZXJyb3JEZXNjcmlwdGlvbiA9IGBSb2xlICR7dGhpcy5yb2xlLnRleHR9IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5YAogICAgICAgIHRoaXMuZ2V0Um9sZXMoKQogICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5keW5hbWljUHJvZ3Jlc3MgPSBmYWxzZQogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmRpYWxvZ0Vycm9yID0gdHJ1ZQogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmVycm9yVGl0bGUgPSAnRXJyb3InCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZXJyb3JDb2xvciA9ICdlcnJvcicKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5lcnJvckRlc2NyaXB0aW9uID0gYEFuIGVycm9yIGhhcyBvY2N1cmVkIHdoaWxlIHVwZGF0aW5nIHJvbGUgJHt0aGlzLnJvbGUudGV4dH1gCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgIH0pCiAgICB9CiAgfSwKICBjcmVhdGVkICgpIHsKICAgIHRoaXMuZ2V0Um9sZXMoKQogICAgdGhpcy5nZXRUYXNrcygpCiAgfQp9Cg=="},{"version":3,"sources":["RolesManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RolesManagement.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container>\n    Select role to edit tasks\n    <v-select\n      required\n      :items=\"roles\"\n      @change=\"roleSelected\"\n      single-line\n      filled\n      label=\"Select Role\"\n    ></v-select>\n    <v-card v-if=\"role.value\">\n      <v-card-title primary-title>\n        Tasks assigned to role {{role.text}}\n      </v-card-title>\n      <v-card-text>\n        <v-data-table\n          :items=\"tasks\"\n          height=\"10px\"\n          hide-default-footer\n        >\n          <template v-slot:item=\"{ item }\">\n            <tr>\n              <td>\n                <v-checkbox\n                  :value=\"item._id\"\n                  v-model=\"role.tasks\"\n                >\n                </v-checkbox>\n              </td>\n              <td>{{item.display}}</td>\n            </tr>\n          </template>\n        </v-data-table>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn\n          color=\"primary\"\n          @click=\"saveRole\"\n        >\n          <v-icon left>mdi-content-save</v-icon> Save\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-container>\n</template>\n<script>\nimport axios from 'axios'\nimport { generalMixin } from '../mixins/generalMixin'\n\nexport default {\n  mixins: [generalMixin],\n  data () {\n    return {\n      role: {},\n      task: ''\n    }\n  },\n  methods: {\n    roleSelected (id) {\n      this.role = this.roles.find((role) => {\n        return role.value === id\n      })\n    },\n    saveRole () {\n      this.$store.state.progressTitle = 'Updating role'\n      this.$store.state.dynamicProgress = true\n      let formData = new FormData()\n      formData.append('role', JSON.stringify(this.role))\n      axios.post('/updateRole', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(() => {\n        this.$store.state.dynamicProgress = false\n        this.$store.state.dialogError = true\n        this.$store.state.errorTitle = 'Info'\n        this.$store.state.errorColor = 'primary'\n        this.$store.state.errorDescription = `Role ${this.role.text} updated successfully`\n        this.getRoles()\n      }).catch((error) => {\n        this.$store.state.dynamicProgress = false\n        this.$store.state.dialogError = true\n        this.$store.state.errorTitle = 'Error'\n        this.$store.state.errorColor = 'error'\n        this.$store.state.errorDescription = `An error has occured while updating role ${this.role.text}`\n        console.log(error)\n      })\n    }\n  },\n  created () {\n    this.getRoles()\n    this.getTasks()\n  }\n}\n</script>\n\n"]}]}