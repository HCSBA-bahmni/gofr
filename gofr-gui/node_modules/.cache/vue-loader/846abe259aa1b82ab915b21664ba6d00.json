{"remainingRequest":"/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr/facility-recon-gui/src/components/ChangePassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr/facility-recon-gui/src/components/ChangePassword.vue","mtime":1619257194369},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/babel-loader/lib/index.js","mtime":1619257191453},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js","mtime":1619257191305}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHsgcmVxdWlyZWQgfSBmcm9tICd2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMnCgpleHBvcnQgZGVmYXVsdCB7CiAgdmFsaWRhdGlvbnM6IHsKICAgIHJldHlwZV9wYXNzd29yZDogeyByZXF1aXJlZCB9LAogICAgcGFzc3dvcmQ6IHsgcmVxdWlyZWQgfSwKICAgIG9sZFBhc3N3b3JkOiB7IHJlcXVpcmVkIH0KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgb2xkUGFzc3dvcmQ6ICcnLAogICAgICBwYXNzd29yZDogJycsCiAgICAgIHJldHlwZV9wYXNzd29yZDogJycKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNoYW5nZVBhc3N3b3JkICgpIHsKICAgICAgaWYgKHRoaXMucGFzc3dvcmQgIT09IHRoaXMucmV0eXBlX3Bhc3N3b3JkKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZGlhbG9nRXJyb3IgPSB0cnVlCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZXJyb3JUaXRsZSA9ICdFcnJvcicKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5lcnJvckRlc2NyaXB0aW9uID0gJ1Bhc3N3b3JkIG1pc21hdGNoJwogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmR5bmFtaWNQcm9ncmVzcyA9IHRydWUKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUucHJvZ3Jlc3NUaXRsZSA9ICdDaGFuZ2luZyBQYXNzd29yZCcKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCdwYXNzd29yZCcsIHRoaXMucGFzc3dvcmQpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnaWQnLCB0aGlzLiRzdG9yZS5zdGF0ZS5hdXRoLnVzZXJJRCkKICAgICAgYXhpb3MucG9zdCgnL2NoYW5nZVBhc3N3b3JkLycsIGZvcm1EYXRhLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgIH0KICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuYWxlcnQuc2hvdyA9IHRydWUKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5hbGVydC53aWR0aCA9ICc1MDBweCcKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5hbGVydC5tc2cgPSAnUGFzc3dvcmQgY2hhbmdlZCBzdWNjZXNzZnVsbHkhJwogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmFsZXJ0LnR5cGUgPSAnc3VjY2VzcycKICAgICAgICAvLyBpbmNyZW1lbnQgY29tcG9uZW50IGtleSB0byBmb3JjZSBjb21wb25lbnQgcmVsb2FkCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuYmFzZVJvdXRlclZpZXdLZXkgKz0gMQogICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuYWxlcnQuc2hvdyA9IHRydWUKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5hbGVydC53aWR0aCA9ICc1MDBweCcKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5hbGVydC5tc2cgPSAnUGFzc3dvcmQgY2hhbmdlIGZhaWxlZCEnCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuYWxlcnQudHlwZSA9ICdlcnJvcicKICAgICAgICAvLyBpbmNyZW1lbnQgY29tcG9uZW50IGtleSB0byBmb3JjZSBjb21wb25lbnQgcmVsb2FkCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuYmFzZVJvdXRlclZpZXdLZXkgKz0gMQogICAgICAgIGNvbnNvbGUubG9nKGVyci5yZXNwb25zZS5kYXRhLmVycm9yKQogICAgICB9KQogICAgfSwKICAgIHZlcmlmeVBhc3N3b3JkICgpIHsKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9ybURhdGEuYXBwZW5kKCd1c2VybmFtZScsIHRoaXMuJHN0b3JlLnN0YXRlLmF1dGgudXNlcm5hbWUpCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgncGFzc3dvcmQnLCB0aGlzLm9sZFBhc3N3b3JkKQogICAgICBheGlvcy5wb3N0KCcvYXV0aGVudGljYXRlLycsIGZvcm1EYXRhLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgIH0KICAgICAgfSkudGhlbigoYXV0aFJlc3ApID0+IHsKICAgICAgICBpZiAoYXV0aFJlc3AuZGF0YS50b2tlbikgewogICAgICAgICAgdGhpcy5jaGFuZ2VQYXNzd29yZCgpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYWxlcnRGYWlsID0gdHJ1ZQogICAgICAgICAgdGhpcy5hbGVydE1zZyA9ICdXcm9uZyBPbGQgUGFzc3dvcmQnCiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZXJyKSkKICAgICAgfSkKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBvbGRQYXNzd29yZEVycm9ycyAoKSB7CiAgICAgIGNvbnN0IGVycm9ycyA9IFtdCiAgICAgIGlmICghdGhpcy4kdi5vbGRQYXNzd29yZC4kZGlydHkpIHJldHVybiBlcnJvcnMKICAgICAgIXRoaXMuJHYub2xkUGFzc3dvcmQucmVxdWlyZWQgJiYgZXJyb3JzLnB1c2goJ09sZCBQYXNzd29yZCBpcyByZXF1aXJlZCcpCiAgICAgIHJldHVybiBlcnJvcnMKICAgIH0sCiAgICBwYXNzd29yZEVycm9ycyAoKSB7CiAgICAgIGNvbnN0IGVycm9ycyA9IFtdCiAgICAgIGlmICghdGhpcy4kdi5wYXNzd29yZC4kZGlydHkpIHJldHVybiBlcnJvcnMKICAgICAgIXRoaXMuJHYucGFzc3dvcmQucmVxdWlyZWQgJiYgZXJyb3JzLnB1c2goJ1Bhc3N3b3JkIGlzIHJlcXVpcmVkJykKICAgICAgcmV0dXJuIGVycm9ycwogICAgfSwKICAgIHJldHlwZV9wYXNzd29yZEVycm9ycyAoKSB7CiAgICAgIGNvbnN0IGVycm9ycyA9IFtdCiAgICAgIGlmICghdGhpcy4kdi5yZXR5cGVfcGFzc3dvcmQuJGRpcnR5KSByZXR1cm4gZXJyb3JzCiAgICAgICF0aGlzLiR2LnJldHlwZV9wYXNzd29yZC5yZXF1aXJlZCAmJiBlcnJvcnMucHVzaCgnUmUtdHlwZSBQYXNzd29yZCcpCiAgICAgIHJldHVybiBlcnJvcnMKICAgIH0KICB9Cn0K"},{"version":3,"sources":["ChangePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChangePassword.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container>\n    <v-layout\n      row\n      wrap\n    >\n      <v-spacer />\n      <v-flex xs6>\n        <v-card\n          class=\"mx-auto\"\n          style=\"max-width: 500px;\"\n        >\n          <v-system-bar\n            color=\"deep-purple darken-4\"\n            dark\n          />\n          <v-toolbar\n            color=\"deep-purple accent-4\"\n            cards\n            dark\n            filled\n          >\n            <v-card-title class=\"title font-weight-regular\">Change Password</v-card-title>\n          </v-toolbar>\n          <v-form\n            ref=\"form\"\n            class=\"pa-3 pt-4\"\n          >\n            <v-text-field\n              required\n              @blur=\"$v.oldPassword.$touch()\"\n              @change=\"$v.oldPassword.$touch()\"\n              :error-messages=\"oldPasswordErrors\"\n              v-model=\"oldPassword\"\n              type=\"password\"\n              filled\n              color=\"deep-purple\"\n              label=\"Old Password\"\n            />\n            <v-text-field\n              required\n              @blur=\"$v.password.$touch()\"\n              @change=\"$v.password.$touch()\"\n              :error-messages=\"passwordErrors\"\n              v-model=\"password\"\n              type=\"password\"\n              filled\n              color=\"deep-purple\"\n              label=\"Password\"\n            />\n            <v-text-field\n              required\n              @blur=\"$v.retype_password.$touch()\"\n              @change=\"$v.retype_password.$touch()\"\n              :error-messages=\"retype_passwordErrors\"\n              v-model=\"retype_password\"\n              type=\"password\"\n              filled\n              color=\"deep-purple\"\n              label=\"Re-type Password\"\n            />\n          </v-form>\n          <v-divider />\n          <v-card-actions>\n            <v-btn\n              filled\n              @click=\"$store.state.baseRouterViewKey++\"\n            >\n              <v-icon>mdi-close</v-icon>Clear\n            </v-btn>\n            <v-spacer />\n            <v-btn\n              @click=\"verifyPassword()\"\n              :disabled=\"$v.$invalid\"\n              class=\"white--text\"\n              color=\"deep-purple accent-4\"\n              depressed\n            >\n              <v-icon left>mdi-find-replace</v-icon>Change\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-flex>\n      <v-spacer />\n    </v-layout>\n  </v-container>\n</template>\n<script>\nimport axios from 'axios'\nimport { required } from 'vuelidate/lib/validators'\n\nexport default {\n  validations: {\n    retype_password: { required },\n    password: { required },\n    oldPassword: { required }\n  },\n  data () {\n    return {\n      oldPassword: '',\n      password: '',\n      retype_password: ''\n    }\n  },\n  methods: {\n    changePassword () {\n      if (this.password !== this.retype_password) {\n        this.$store.state.dialogError = true\n        this.$store.state.errorTitle = 'Error'\n        this.$store.state.errorDescription = 'Password mismatch'\n        return\n      }\n      this.$store.state.dynamicProgress = true\n      this.$store.state.progressTitle = 'Changing Password'\n      let formData = new FormData()\n      formData.append('password', this.password)\n      formData.append('id', this.$store.state.auth.userID)\n      axios.post('/changePassword/', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(() => {\n        this.$store.state.alert.show = true\n        this.$store.state.alert.width = '500px'\n        this.$store.state.alert.msg = 'Password changed successfully!'\n        this.$store.state.alert.type = 'success'\n        // increment component key to force component reload\n        this.$store.state.baseRouterViewKey += 1\n      }).catch((err) => {\n        this.$store.state.alert.show = true\n        this.$store.state.alert.width = '500px'\n        this.$store.state.alert.msg = 'Password change failed!'\n        this.$store.state.alert.type = 'error'\n        // increment component key to force component reload\n        this.$store.state.baseRouterViewKey += 1\n        console.log(err.response.data.error)\n      })\n    },\n    verifyPassword () {\n      let formData = new FormData()\n      formData.append('username', this.$store.state.auth.username)\n      formData.append('password', this.oldPassword)\n      axios.post('/authenticate/', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then((authResp) => {\n        if (authResp.data.token) {\n          this.changePassword()\n        } else {\n          this.alertFail = true\n          this.alertMsg = 'Wrong Old Password'\n        }\n      }).catch((err) => {\n        console.log(JSON.stringify(err))\n      })\n    }\n  },\n  computed: {\n    oldPasswordErrors () {\n      const errors = []\n      if (!this.$v.oldPassword.$dirty) return errors\n      !this.$v.oldPassword.required && errors.push('Old Password is required')\n      return errors\n    },\n    passwordErrors () {\n      const errors = []\n      if (!this.$v.password.$dirty) return errors\n      !this.$v.password.required && errors.push('Password is required')\n      return errors\n    },\n    retype_passwordErrors () {\n      const errors = []\n      if (!this.$v.retype_password.$dirty) return errors\n      !this.$v.retype_password.required && errors.push('Re-type Password')\n      return errors\n    }\n  }\n}\n</script>\n"]}]}