{"remainingRequest":"/home/ally/gofr2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr2/src/components/DataSourcesPair/FacilityReconDataSourcePair.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr2/src/components/DataSourcesPair/FacilityReconDataSourcePair.vue","mtime":1619097605609},{"path":"/home/ally/gofr2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ally/gofr2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ally/gofr2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ally/gofr2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHsgZXZlbnRCdXMgfSBmcm9tICdAL21haW4nCmltcG9ydCB7IGdlbmVyYWxNaXhpbiB9IGZyb20gJ0AvbWl4aW5zL2dlbmVyYWxNaXhpbicKaW1wb3J0IHsgZGF0YVNvdXJjZVBhaXJNaXhpbiB9IGZyb20gJy4vZGF0YVNvdXJjZVBhaXJNaXhpbicKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW2dlbmVyYWxNaXhpbiwgZGF0YVNvdXJjZVBhaXJNaXhpbl0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBjb25maXJtUGFpckRlbGV0ZURpYWxvZzogZmFsc2UsCiAgICAgIGhlbHBEaWFsb2c6IGZhbHNlLAogICAgICBhbGVydFN1Y2Nlc3M6IGZhbHNlLAogICAgICBhbGVydEVycm9yOiBmYWxzZSwKICAgICAgYWxlcnRNc2c6ICcnLAogICAgICBwYWlyTGltaXRXYXJuOiBmYWxzZSwKICAgICAgc2hhcmVEaWFsb2c6IGZhbHNlLAogICAgICBtYXBTb3VyY2VQYWlyTGV2ZWxzOiBmYWxzZSwKICAgICAgcGFpckxldmVsc01hcHBpbmc6IHt9LAogICAgICBzaGFyZVBhaXI6IHt9LAogICAgICBzb3VyY2UxOiB7fSwKICAgICAgc291cmNlMjoge30sCiAgICAgIHNlYXJjaFBhaXJzOiAnJywKICAgICAgc2VhcmNoU291cmNlczogJycsCiAgICAgIHNlYXJjaFVzZXJzOiAnJywKICAgICAgdXNlcnM6IFtdLAogICAgICBzaGFyZWRVc2VyczogW10sCiAgICAgIGFjdGl2ZURhdGFTb3VyY2VQYWlyOiB7fSwKICAgICAgcGFpckxldmVsc01hcHBpbmdIZWFkZXI6IFsKICAgICAgICB7IHRleHQ6ICdTb3VyY2UgMSBMZXZlbHMnLCB2YWx1ZTogJ2hlYWRlclNvdXJjZTFMZXZlbHMnLCBzb3J0YWJsZTogZmFsc2UgfSwKICAgICAgICB7IHRleHQ6ICdTb3VyY2UgMiBMZXZlbHMnLCB2YWx1ZTogJ2hlYWRlclNvdXJjZTFMZXZlbHMnLCBzb3J0YWJsZTogZmFsc2UgfQogICAgICBdLAogICAgICBzb3VyY2UxSGVhZGVyczogWwogICAgICAgIHsgc29ydGFibGU6IGZhbHNlIH0sCiAgICAgICAgeyB0ZXh0OiAnU291cmNlIDEnLCB2YWx1ZTogJ2hlYWRlclNvdXJjZTEnLCBzb3J0YWJsZTogZmFsc2UgfQogICAgICBdLAogICAgICBzb3VyY2UySGVhZGVyczogWwogICAgICAgIHsgc29ydGFibGU6IGZhbHNlIH0sCiAgICAgICAgeyB0ZXh0OiAnU291cmNlIDInLCB2YWx1ZTogJ2hlYWRlclNvdXJjZTInLCBzb3J0YWJsZTogZmFsc2UgfQogICAgICBdLAogICAgICBzb3VyY2VQYWlySGVhZGVyczogWwogICAgICAgIHsgdGV4dDogJ1BhaXInLCB2YWx1ZTogJ3BhaXInIH0sCiAgICAgICAgeyB0ZXh0OiAnT3duZXInLCB2YWx1ZTogJ293bmVyJywgc29ydGFibGU6IGZhbHNlIH0sCiAgICAgICAgeyB0ZXh0OiAnQWN0aXZlJywgdmFsdWU6ICdhY3RpdmUnIH0sCiAgICAgICAgeyB0ZXh0OiAnU2hhcmVkIFRvJywgdmFsdWU6ICdzaGFyZVN0YXR1cycgfQogICAgICBdLAogICAgICB1c2Vyc0hlYWRlcjogWwogICAgICAgIHsgdGV4dDogJ1VzZXJuYW1lJywgdmFsdWU6ICd1c2VybmFtZScsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyB0ZXh0OiAnRmlyc3RuYW1lJywgdmFsdWU6ICdmbmFtZScsIHNvcnRhYmxlOiB0cnVlIH0sCiAgICAgICAgeyB0ZXh0OiAnU3VybmFtZScsIHZhbHVlOiAnc25hbWUnLCBzb3J0YWJsZTogdHJ1ZSB9CiAgICAgIF0sCiAgICAgIHNvdXJjZTFMZXZlbHM6IFtdLAogICAgICBzb3VyY2UyTGV2ZWxzOiBbXQogICAgfQogIH0sCiAgZmlsdGVyczogewogICAgbWVyZ2VVc2VycyAodXNlcnMpIHsKICAgICAgaWYgKCF1c2VycyB8fCB1c2Vycy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gJycKICAgICAgfQogICAgICBsZXQgdXNlck5hbWVzID0gJycKICAgICAgZm9yIChsZXQgdXNlciBvZiB1c2VycykgewogICAgICAgIGlmICghdXNlck5hbWVzKSB7CiAgICAgICAgICB1c2VyTmFtZXMgPSB1c2VyLnVzZXJOYW1lCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHVzZXJOYW1lcyA9ICcsJyArIHVzZXIudXNlck5hbWUKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHVzZXJOYW1lcwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgY29uZmlybURlbGV0ZVBhaXIgKCkgewogICAgICB0aGlzLmNvbmZpcm1QYWlyRGVsZXRlRGlhbG9nID0gdHJ1ZQogICAgfSwKICAgIGRlbGV0ZVBhaXIgKCkgewogICAgICB0aGlzLmNvbmZpcm1QYWlyRGVsZXRlRGlhbG9nID0gZmFsc2UKICAgICAgbGV0IHF1ZXJ5ID0gYHBhaXJJZD0ke3RoaXMuYWN0aXZlRGF0YVNvdXJjZVBhaXIuX2lkfSZ1c2VySUQ9JHt0aGlzLmFjdGl2ZURhdGFTb3VyY2VQYWlyLm93bmVyLmlkfSZzb3VyY2UxTmFtZT0ke3RoaXMuYWN0aXZlRGF0YVNvdXJjZVBhaXIuc291cmNlMS5uYW1lfSZzb3VyY2UyTmFtZT0ke3RoaXMuYWN0aXZlRGF0YVNvdXJjZVBhaXIuc291cmNlMi5uYW1lfWAKICAgICAgYXhpb3MuZGVsZXRlKCcvZGVsZXRlU291cmNlUGFpcj8nICsgcXVlcnkpLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmVycm9yVGl0bGUgPSAnUGFpciBEZWxldGlvbicKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5lcnJvckRlc2NyaXB0aW9uID0gJ1BhaXIgZGVsZXRlZCBzdWNjZXNzZnVsbHknCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZGlhbG9nRXJyb3IgPSB0cnVlCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICBldmVudEJ1cy4kZW1pdCgnZ2V0RGF0YVNvdXJjZVBhaXInKQogICAgICAgIH0sIDUwMCkKICAgICAgfSkuY2F0Y2goKGVycikgPT4gewogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmVycm9yVGl0bGUgPSAnUGFpciBEZWxldGlvbicKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5lcnJvckRlc2NyaXB0aW9uID0gJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgZGVsZXRpbmcgcGFpciwgcGxlYXNlIHJldHJ5JwogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmVycm9yQ29sb3IgPSAnZXJyb3InCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZGlhbG9nRXJyb3IgPSB0cnVlCiAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZXJyKSkKICAgICAgfSkKICAgIH0sCiAgICByZXNldCAoKSB7CiAgICAgIHRoaXMuc291cmNlMSA9IHt9CiAgICAgIHRoaXMuc291cmNlMiA9IHt9CiAgICAgIHRoaXMuYWN0aXZlRGF0YVNvdXJjZVBhaXIgPSB7fQogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5keW5hbWljUHJvZ3Jlc3MgPSB0cnVlCiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnByb2dyZXNzVGl0bGUgPSAnUmVzZXRpbmcgRGF0YSBTb3VyY2UgUGFpcnMnCiAgICAgIGxldCB1c2VySUQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5hdXRoLnVzZXJJRAogICAgICBheGlvcy5nZXQoJy9yZXNldERhdGFTb3VyY2VQYWlyLycgKyB1c2VySUQpLnRoZW4oKCkgPT4gewogICAgICAgIGV2ZW50QnVzLiRlbWl0KCdnZXREYXRhU291cmNlUGFpcicpCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZHluYW1pY1Byb2dyZXNzID0gZmFsc2UKICAgICAgICB0aGlzLmFsZXJ0U3VjY2VzcyA9IHRydWUKICAgICAgICB0aGlzLmFsZXJ0TXNnID0gJ0RhdGEgU291cmNlIFBhaXIgUmVzZXRlZCBTdWNjZXNzZnVsbHknCiAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgIHRoaXMuYWxlcnRFcnJvciA9IHRydWUKICAgICAgICB0aGlzLmFsZXJ0TXNnID0gJ1NvbWV0aGluZyB3ZW50IHdyb25nIHdoaWxlIHJlc2V0aW5nIGRhdGEgc291cmNlIHBhaXJzJwogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICB9KQogICAgfSwKICAgIGNoZWNrTGV2ZWxzICgpIHsKICAgICAgdGhpcy5wYWlyTGV2ZWxzTWFwcGluZyA9IHt9CiAgICAgIGxldCBzb3VyY2UxID0gdGhpcy5zb3VyY2UxLm5hbWUKICAgICAgbGV0IHNvdXJjZTIgPSB0aGlzLnNvdXJjZTIubmFtZQogICAgICBzb3VyY2UxID0gdGhpcy50b1RpdGxlQ2FzZShzb3VyY2UxKQogICAgICBzb3VyY2UyID0gdGhpcy50b1RpdGxlQ2FzZShzb3VyY2UyKQogICAgICBsZXQgc291cmNlc0xpbWl0T3JnSWQgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgc291cmNlMUxpbWl0T3JnSWQ6IHRoaXMuZ2V0TGltaXRPcmdJZE9uRGF0YVNvdXJjZSh0aGlzLnNvdXJjZTEpLAogICAgICAgIHNvdXJjZTJMaW1pdE9yZ0lkOiB0aGlzLmdldExpbWl0T3JnSWRPbkRhdGFTb3VyY2UodGhpcy5zb3VyY2UyKQogICAgICB9KQogICAgICBsZXQgc291cmNlc093bmVyID0gSlNPTi5zdHJpbmdpZnkoewogICAgICAgIHNvdXJjZTFPd25lcjogdGhpcy5zb3VyY2UxLnVzZXJJRC5faWQsCiAgICAgICAgc291cmNlMk93bmVyOiB0aGlzLnNvdXJjZTIudXNlcklELl9pZAogICAgICB9KQogICAgICBheGlvcwogICAgICAgIC5nZXQoJy9jb3VudExldmVscy8nICsgc291cmNlMSArICcvJyArIHNvdXJjZTIgKyAnLycgKyBzb3VyY2VzT3duZXIgKyAnLycgKyBzb3VyY2VzTGltaXRPcmdJZCkKICAgICAgICAudGhlbihsZXZlbHMgPT4gewogICAgICAgICAgaWYgKGxldmVscy5kYXRhLnRvdGFsU291cmNlMUxldmVscyA9PT0gMSkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5lcnJvclRpdGxlID0gJ05vIGRhdGEgZm9yIHlvdScKICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZXJyb3JEZXNjcmlwdGlvbiA9ICdDYW50IGNyZWF0ZSB0aGlzIHBhaXIsICcgKyB0aGlzLnNvdXJjZTEubmFtZSArICcgaGFzIG5vIGRhdGEgZm9yIHlvdScKICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZGlhbG9nRXJyb3IgPSB0cnVlCiAgICAgICAgICAgIHJldHVybgogICAgICAgICAgfQogICAgICAgICAgaWYgKGxldmVscy5kYXRhLnRvdGFsU291cmNlMkxldmVscyA9PT0gMSkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5lcnJvclRpdGxlID0gJ05vIGRhdGEgZm9yIHlvdScKICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZXJyb3JEZXNjcmlwdGlvbiA9ICdDYW50IGNyZWF0ZSB0aGlzIHBhaXIsICcgKyB0aGlzLnNvdXJjZTIubmFtZSArICcgaGFzIG5vIGRhdGEgZm9yIHlvdScKICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZGlhbG9nRXJyb3IgPSB0cnVlCiAgICAgICAgICAgIHJldHVybgogICAgICAgICAgfQogICAgICAgICAgaWYgKGxldmVscy5kYXRhLnRvdGFsU291cmNlMUxldmVscyA+IGxldmVscy5kYXRhLnRvdGFsU291cmNlMkxldmVscykgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5lcnJvclRpdGxlID0gJ0xldmVscyBtaXNtYXRjaCcKICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZXJyb3JEZXNjcmlwdGlvbiA9ICdNYWtlIHN1cmUgc291cmNlMSBoYXMgdGhlIHNhbWUgb3IgbGVzcyBsZXZlbHMgYXMgc291cmNlMicKICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZGlhbG9nRXJyb3IgPSB0cnVlCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmNyZWF0ZURhdGFzb3VyY2VQYWlyKHRoaXMuc291cmNlMSwgdGhpcy5zb3VyY2UyKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICB9LAogICAgbWFwcGluZ1NlbGVjdGVkIChzZWxlY3RlZExldmVsKSB7CiAgICAgIHRoaXMuc291cmNlMkxldmVscyA9IHRoaXMuc291cmNlMkxldmVscy5maWx0ZXIoKHNyYzJMdmwpID0+IHsKICAgICAgICByZXR1cm4gc3JjMkx2bC52YWx1ZSAhPT0gdGhpcy5wYWlyTGV2ZWxzTWFwcGluZ1tzZWxlY3RlZExldmVsXQogICAgICB9KQogICAgfSwKICAgIGNsZWFyTWFwcGluZ1NlbGVjdGlvbiAoc2VsZWN0ZWRMZXZlbCkgewogICAgICB0aGlzLnNvdXJjZTJMZXZlbHMucHVzaCh7CiAgICAgICAgdGV4dDogdGhpcy4kc3RvcmUuc3RhdGUubGV2ZWxNYXBwaW5nLnNvdXJjZTJbdGhpcy5wYWlyTGV2ZWxzTWFwcGluZ1tzZWxlY3RlZExldmVsXV0sCiAgICAgICAgdmFsdWU6IHRoaXMucGFpckxldmVsc01hcHBpbmdbc2VsZWN0ZWRMZXZlbF0KICAgICAgfSkKICAgICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLnBhaXJMZXZlbHNNYXBwaW5nKQogICAgICBsZXQgbmV3S2V5cyA9IGtleXMuZmlsdGVyKChrZXkpID0+IHsKICAgICAgICByZXR1cm4ga2V5ICE9PSBzZWxlY3RlZExldmVsCiAgICAgIH0pCiAgICAgIGxldCBuZXdPYmogPSB7fQogICAgICBmb3IgKGxldCBrZXkgb2YgbmV3S2V5cykgewogICAgICAgIG5ld09ialtrZXldID0gdGhpcy5wYWlyTGV2ZWxzTWFwcGluZ1trZXldCiAgICAgIH0KICAgICAgdGhpcy5wYWlyTGV2ZWxzTWFwcGluZyA9IG5ld09iagogICAgfSwKICAgIGNsb3NlTGV2ZWxNYXBwaW5nRGlhbG9nICgpIHsKICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMucGFpckxldmVsc01hcHBpbmcpIHsKICAgICAgICB0aGlzLnNvdXJjZTJMZXZlbHMucHVzaCh7CiAgICAgICAgICB0ZXh0OiB0aGlzLiRzdG9yZS5zdGF0ZS5sZXZlbE1hcHBpbmcuc291cmNlMlt0aGlzLnBhaXJMZXZlbHNNYXBwaW5nW2tleV1dLAogICAgICAgICAgdmFsdWU6IHRoaXMucGFpckxldmVsc01hcHBpbmdba2V5XQogICAgICAgIH0pCiAgICAgIH0KICAgICAgdGhpcy5tYXBTb3VyY2VQYWlyTGV2ZWxzID0gZmFsc2UKICAgIH0sCiAgICBzaGFyZSAocGFpciwgYWN0aW9uKSB7CiAgICAgIGlmIChhY3Rpb24gPT09ICdzaG93RGlhbG9nJykgewogICAgICAgIHRoaXMuc2hhcmVkVXNlcnMgPSBbXQogICAgICAgIHRoaXMuc2hhcmVQYWlyID0gcGFpcgogICAgICAgIGlmIChwYWlyLmhhc093blByb3BlcnR5KCdzaGFyZWQnKSAmJiBwYWlyLnNoYXJlZC51c2Vycy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBwYWlyLnNoYXJlZC51c2Vycy5mb3JFYWNoKChzaGFyZWRVc2VycykgPT4gewogICAgICAgICAgICB0aGlzLnNoYXJlZFVzZXJzLnB1c2goc2hhcmVkVXNlcnMuX2lkKQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgdGhpcy5zaGFyZURpYWxvZyA9IHRydWUKICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09ICdzYXZlU2hhcmUnKSB7CiAgICAgICAgaWYgKHRoaXMuc2hhcmVkVXNlcnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5kaWFsb2dFcnJvciA9IHRydWUKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmVycm9yVGl0bGUgPSAnSW5mbycKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmVycm9yRGVzY3JpcHRpb24gPSAnUGxlYXNlIHNlbGVjdCBhdGxlYXN0IG9uZSB1c2VyJwogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdzaGFyZVBhaXInLCB0aGlzLnNoYXJlUGFpci5faWQpCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd1c2VycycsIEpTT04uc3RyaW5naWZ5KHRoaXMuc2hhcmVkVXNlcnMpKQogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgndXNlcklEJywgdGhpcy4kc3RvcmUuc3RhdGUuYXV0aC51c2VySUQpCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdvcmdJZCcsIHRoaXMuJHN0b3JlLnN0YXRlLmRoaXMudXNlci5vcmdJZCkKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5sb2FkaW5nU2VydmVycyA9IHRydWUKICAgICAgICB0aGlzLnNoYXJlRGlhbG9nID0gZmFsc2UKICAgICAgICBheGlvcy5wb3N0KCcvc2hhcmVTb3VyY2VQYWlyJywgZm9ybURhdGEsIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5sb2FkaW5nU2VydmVycyA9IGZhbHNlCiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5kYXRhU291cmNlUGFpcnMgPSByZXNwb25zZS5kYXRhCiAgICAgICAgfSkuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubG9hZGluZ1NlcnZlcnMgPSBmYWxzZQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICBnZXRVc2VycyAoKSB7CiAgICAgIGF4aW9zLmdldCgnL2dldFVzZXJzJykudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLnVzZXJzID0gcmVzcG9uc2UuZGF0YQogICAgICB9KQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGRhdGFTb3VyY2VzMiAoKSB7CiAgICAgIGlmICghdGhpcy4kc3RvcmUuc3RhdGUuY29uZmlnLmdlbmVyYWxDb25maWcucmVjb25jaWxpYXRpb24uZml4U291cmNlMikgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5kYXRhU291cmNlcwogICAgICB9IGVsc2UgewogICAgICAgIGxldCBkdFNyYyA9ICcnCiAgICAgICAgZm9yIChsZXQgc291cmNlIG9mIHRoaXMuJHN0b3JlLnN0YXRlLmRhdGFTb3VyY2VzKSB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHNvdXJjZS5faWQgPT09CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmNvbmZpZy5nZW5lcmFsQ29uZmlnLnJlY29uY2lsaWF0aW9uLmZpeFNvdXJjZTJUbwogICAgICAgICAgKSB7CiAgICAgICAgICAgIGR0U3JjID0gc291cmNlCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBbZHRTcmNdCiAgICAgIH0KICAgIH0sCiAgICBjYW5DcmVhdGVQYWlyICgpIHsKICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmRoaXMudXNlci5vcmdJZCAmJiB0aGlzLiRzdG9yZS5zdGF0ZS5jb25maWcuZ2VuZXJhbENvbmZpZy5yZWNvbmNpbGlhdGlvbi5zaW5nbGVQYWlyKSB7CiAgICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmRhdGFTb3VyY2VQYWlycy5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICB9LAogICAgY2FuRGVsZXRlUGFpciAoKSB7CiAgICAgIGlmIChKU09OLnN0cmluZ2lmeSh0aGlzLmFjdGl2ZURhdGFTb3VyY2VQYWlyKSA9PT0gJ3t9JykgewogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICAgIGlmICh0aGlzLmFjdGl2ZURhdGFTb3VyY2VQYWlyLm93bmVyLmlkID09PSB0aGlzLiRzdG9yZS5zdGF0ZS5hdXRoLnVzZXJJRCkgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgaWYgKCF0aGlzLmNhbkNyZWF0ZVBhaXIpIHsKICAgICAgdGhpcy5wYWlyTGltaXRXYXJuID0gdHJ1ZQogICAgfQogICAgdGhpcy5nZXRVc2VycygpCiAgICB0aGlzLnNvdXJjZTEgPSB0aGlzLiRzdG9yZS5zdGF0ZS5kYXRhU291cmNlcy5maW5kKChkYXRhU291cmNlKSA9PiB7CiAgICAgIHJldHVybiBkYXRhU291cmNlLl9pZCA9PT0gdGhpcy4kc3RvcmUuc3RhdGUuYWN0aXZlUGFpci5zb3VyY2UxLmlkCiAgICB9KQogICAgdGhpcy5zb3VyY2UyID0gdGhpcy4kc3RvcmUuc3RhdGUuZGF0YVNvdXJjZXMuZmluZCgoZGF0YVNvdXJjZSkgPT4gewogICAgICByZXR1cm4gZGF0YVNvdXJjZS5faWQgPT09IHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2ZVBhaXIuc291cmNlMi5pZAogICAgfSkKICAgIHRoaXMuYWN0aXZlRGF0YVNvdXJjZVBhaXIgPSB0aGlzLmdldEFjdGl2ZURhdGFTb3VyY2VQYWlyKCkKICAgIGlmICghdGhpcy5zb3VyY2UxKSB7CiAgICAgIHRoaXMuc291cmNlMSA9IHt9CiAgICB9CiAgICBpZiAoIXRoaXMuc291cmNlMikgewogICAgICB0aGlzLnNvdXJjZTIgPSB7fQogICAgfQoKICAgIGZvciAobGV0IGxldmVsIGluIHRoaXMuJHN0b3JlLnN0YXRlLmxldmVsTWFwcGluZy5zb3VyY2UyKSB7CiAgICAgIGlmIChsZXZlbCAhPT0gJ2NvZGUnKSB7CiAgICAgICAgdGhpcy5zb3VyY2UyTGV2ZWxzLnB1c2goewogICAgICAgICAgdGV4dDogdGhpcy4kc3RvcmUuc3RhdGUubGV2ZWxNYXBwaW5nLnNvdXJjZTJbbGV2ZWxdLAogICAgICAgICAgdmFsdWU6IGxldmVsCiAgICAgICAgfSkKICAgICAgfQogICAgfQoKICAgIGZvciAobGV0IGxldmVsIGluIHRoaXMuJHN0b3JlLnN0YXRlLmxldmVsTWFwcGluZy5zb3VyY2UxKSB7CiAgICAgIGlmIChsZXZlbCAhPT0gJ2NvZGUnKSB7CiAgICAgICAgdGhpcy5zb3VyY2UxTGV2ZWxzLnB1c2goewogICAgICAgICAgdGV4dDogdGhpcy4kc3RvcmUuc3RhdGUubGV2ZWxNYXBwaW5nLnNvdXJjZTFbbGV2ZWxdLAogICAgICAgICAgdmFsdWU6IGxldmVsCiAgICAgICAgfSkKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["FacilityReconDataSourcePair.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6eA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FacilityReconDataSourcePair.vue","sourceRoot":"src/components/DataSourcesPair","sourcesContent":["<template>\n  <v-container fluid>\n    <center>\n      <v-dialog\n        persistent\n        v-model=\"confirmPairDeleteDialog\"\n        max-width=\"500px\"\n      >\n        <v-card>\n          <v-toolbar\n            color=\"error\"\n            dark\n          >\n            <v-toolbar-title>\n              Confirm deleting\n            </v-toolbar-title>\n            <v-spacer></v-spacer>\n            <v-btn\n              icon\n              dark\n              @click.native=\"confirmPairDeleteDialog = false\"\n            >\n              <v-icon>mdi-close</v-icon>\n            </v-btn>\n          </v-toolbar>\n          <v-card-text>\n            Are you sure you want to delete this data source pair\n          </v-card-text>\n          <v-card-actions>\n            <v-btn\n              color=\"primary\"\n              @click.native=\"confirmPairDeleteDialog = false\"\n            >Cancel</v-btn>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"error\"\n              @click.native=\"deletePair\"\n            >Ok</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n      <v-alert\n        style=\"width: 1000px\"\n        v-model=\"alertSuccess\"\n        type=\"success\"\n        dismissible\n        transition=\"scale-transition\"\n      >\n        {{alertMsg}}\n      </v-alert>\n      <v-alert\n        style=\"width: 1000px\"\n        v-model=\"alertError\"\n        type=\"error\"\n        dismissible\n        transition=\"scale-transition\"\n      >\n        {{alertMsg}}\n      </v-alert>\n      <v-dialog\n        v-model=\"pairLimitWarn\"\n        scrollable\n        persistent\n        :overlay=\"false\"\n        max-width=\"770px\"\n        transition=\"dialog-transition\"\n      >\n        <v-card>\n          <v-toolbar\n            color=\"error\"\n            dark\n          >\n            <v-toolbar-title>\n              <v-icon>mdi-information</v-icon> Pair creation limit\n            </v-toolbar-title>\n            <v-spacer></v-spacer>\n            <v-btn\n              icon\n              dark\n              @click.native=\"pairLimitWarn = false\"\n            >\n              <v-icon>mdi-close</v-icon>\n            </v-btn>\n          </v-toolbar>\n          <v-card-text>\n            You cant create more pairs as this account is limited to one pair only at a time.\n          </v-card-text>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"primary\"\n              @click.native=\"pairLimitWarn = false\"\n            >Ok</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n      <v-dialog\n        v-model=\"mapSourcePairLevels\"\n        scrollable\n        persistent\n        :overlay=\"false\"\n        max-width=\"770px\"\n        transition=\"dialog-transition\"\n      >\n        <v-card>\n          <v-toolbar\n            color=\"primary\"\n            dark\n          >\n            <v-toolbar-title>\n              <v-icon>mdi-information</v-icon> Data sources has different level counts, please map Levels to proceed\n            </v-toolbar-title>\n            <v-spacer></v-spacer>\n            <v-btn\n              icon\n              dark\n              @click.native=\"closeLevelMappingDialog\"\n            >\n              <v-icon>mdi-close</v-icon>\n            </v-btn>\n          </v-toolbar>\n          <v-card-text>\n            <v-data-table\n              :headers=\"pairLevelsMappingHeader\"\n              :items=\"source1Levels\"\n            >\n              <template\n                v-slot:item=\"{ item }\"\n              >\n                <tr>\n                  <td>{{item.text}}</td>\n                  <td>\n                    <template v-if='pairLevelsMapping[item.value]'>\n                      {{$store.state.levelMapping.source2[pairLevelsMapping[item.value]]}}\n                      <v-icon\n                        small\n                        @click=\"clearMappingSelection(item.value)\"\n                      >mdi-close</v-icon>\n                    </template>\n                    <v-select\n                      v-else\n                      :items=\"source2Levels\"\n                      clearable\n                      v-model=\"pairLevelsMapping[item.value]\"\n                      @change=\"mappingSelected(item.value)\"\n                    ></v-select>\n                  </td>\n                </tr>\n              </template>\n            </v-data-table>\n          </v-card-text>\n          <v-card-actions>\n            <v-btn\n              color=\"error\"\n              rounded\n              @click=\"closeLevelMappingDialog\"\n            >\n              <v-icon left>mdi-cancel</v-icon> Cancel\n            </v-btn>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"primary\"\n              rounded\n            >\n              <v-icon left>mdi-content-save</v-icon>Save Mapping\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n      <v-dialog\n        v-model=\"helpDialog\"\n        scrollable\n        persistent\n        :overlay=\"false\"\n        max-width=\"700px\"\n        transition=\"dialog-transition\"\n      >\n        <v-card>\n          <v-toolbar\n            color=\"primary\"\n            dark\n          >\n            <v-toolbar-title>\n              <v-icon>mdi-information</v-icon> About this page\n            </v-toolbar-title>\n            <v-spacer></v-spacer>\n            <v-btn\n              icon\n              dark\n              @click.native=\"helpDialog = false\"\n            >\n              <v-icon>mdi-close</v-icon>\n            </v-btn>\n          </v-toolbar>\n          <v-card-text>\n            This page let you choose a pair of data sources to use for reconciliation\n            <v-list>1. Source 1 is the source while source 2 is the target</v-list>\n          </v-card-text>\n        </v-card>\n      </v-dialog>\n      <v-dialog\n        persistent\n        v-model=\"shareDialog\"\n        width=\"530px\"\n      >\n        <v-card width='530px'>\n          <v-toolbar\n            color=\"primary\"\n            dark\n          >\n            <v-toolbar-title>\n              Sharing <template v-if=\"sharePair.hasOwnProperty('source1')\">{{sharePair.source1.name}} - {{sharePair.source2.name}}</template>\n            </v-toolbar-title>\n            <v-spacer></v-spacer>\n            <v-btn\n              icon\n              dark\n              @click.native=\"shareDialog = false\"\n            >\n              <v-icon>mdi-close</v-icon>\n            </v-btn>\n          </v-toolbar>\n          <v-card-text>\n            <v-text-field\n              v-model=\"searchUsers\"\n              append-icon=\"mdi-magnify\"\n              label=\"Search\"\n              single-line\n              hide-details\n            ></v-text-field>\n            <v-data-table\n              :headers=\"usersHeader\"\n              :items=\"users\"\n              :search=\"searchUsers\"\n              class=\"elevation-1\"\n            >\n              <template\n                v-slot:item=\"{ item }\"\n              >\n                <tr v-if=\"item.userName !== $store.state.auth.username\">\n                  <td>\n                    <v-checkbox\n                      v-model=\"sharedUsers\"\n                      :value=\"item._id\"\n                    ></v-checkbox>\n                  <td>{{item.userName}}</td>\n                  <td>{{item.firstName}}</td>\n                  <td>{{item.surname}}</td>\n                </tr>\n              </template>\n            </v-data-table>\n          </v-card-text>\n          <v-card-actions style='float: center'>\n            <v-btn\n              color=\"error\"\n              @click.native=\"shareDialog = false\"\n              style=\"color: white\"\n            >\n              <v-icon\n                dark\n                left\n              >mdi-cancel</v-icon>Cancel\n            </v-btn>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"primary\"\n              dark\n              @click.native=\"share('', 'saveShare')\"\n            >\n              <v-icon left>mdi-share-variant-outline</v-icon>Share\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n      <v-layout row>\n        <v-flex xs11>\n          Create/Choose a pair of data sources to use for reconciliation. Source 1 is the source while source 2 is the target\n        </v-flex>\n        <v-flex\n          xs1\n          text-xs-right\n        >\n          <v-tooltip top>\n            <template v-slot:activator=\"{ on }\">\n              <v-btn\n                class=\"mx-1\"\n                fab\n                dark\n                x-small\n                color=\"primary\"\n                @click=\"helpDialog = true\"\n                v-on=\"on\"\n              >\n                <v-icon>mdi-help</v-icon>\n              </v-btn>\n            </template>\n            <span>Help</span>\n          </v-tooltip>\n        </v-flex>\n      </v-layout>\n      <v-layout column>\n        <v-flex>\n          <v-card\n            style=\"width: 1000px\"\n            color='cyan lighten-5'\n          >\n            <v-card-title primary-title>\n              <v-toolbar\n                color=\"white lighten-2\"\n                style=\"font-weight: bold; font-size: 18px;\"\n              >\n                Choose Data Source Pair\n              </v-toolbar>\n            </v-card-title>\n            <v-card-text style=\"float: center\">\n              <v-row>\n                <v-col>\n                  <v-data-table\n                    :headers=\"source1Headers\"\n                    :items=\"$store.state.dataSources\"\n                    :loading=\"$store.state.loadingServers\"\n                    dark\n                  >\n                    <v-progress-linear\n                      slot=\"progress\"\n                      color=\"blue\"\n                      indeterminate\n                    ></v-progress-linear>\n                    <template\n                      v-slot:item=\"{ item }\"\n                    >\n                      <tr>\n                        <v-radio-group\n                          v-model='source1'\n                          style=\"height: 5px\"\n                        >\n                          <td>\n                            <v-radio\n                              :value=\"item\"\n                              color=\"blue\"\n                            ></v-radio>\n                          </td>\n                        </v-radio-group>\n                        <td>{{item.name}}</td>\n                      </tr>\n                    </template>\n                  </v-data-table>\n                </v-col>\n                <v-col>\n                  <v-data-table\n                    :headers=\"source2Headers\"\n                    :items=\"dataSources2\"\n                    item-key=\"id\"\n                    :loading=\"$store.state.loadingServers\"\n                  >\n                    <v-progress-linear\n                      slot=\"progress\"\n                      color=\"blue\"\n                      indeterminate\n                    ></v-progress-linear>\n                    <template\n                      v-slot:item=\"{ item }\"\n                    >\n                      <tr>\n                        <v-radio-group\n                          v-model='source2'\n                          style=\"height: 5px\"\n                        >\n                          <td>\n                            <v-radio\n                              :value=\"item\"\n                              color=\"blue\"\n                            ></v-radio>\n                          </td>\n                        </v-radio-group>\n                        <td>{{item.name}}</td>\n                      </tr>\n                    </template>\n                  </v-data-table>\n                </v-col>\n              </v-row>\n            </v-card-text>\n            <v-card-actions>\n              <v-btn\n                color=\"error\"\n                rounded\n                @click=\"reset\"\n              >\n                <v-icon left>mdi-refresh</v-icon> Reset\n              </v-btn>\n              <v-spacer></v-spacer>\n              <v-btn\n                :disabled='!canCreatePair'\n                color=\"primary\"\n                rounded\n                @click=\"checkLevels\"\n              >\n                <v-icon left>mdi-content-save</v-icon> Save\n              </v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-flex>\n        <v-flex>\n          <v-card\n            style=\"width: 1000px\"\n            color='cyan lighten-4'\n          >\n            <v-card-title primary-title>\n              <v-toolbar\n                color=\"white lighten-2\"\n                style=\"font-weight: bold; font-size: 18px;\"\n              >\n                Existing Data Source Pairs\n                <v-spacer></v-spacer>\n                <v-text-field\n                  v-model=\"searchPairs\"\n                  append-icon=\"mdi-magnify\"\n                  label=\"Search\"\n                  single-line\n                  hide-details\n                ></v-text-field>\n              </v-toolbar>\n            </v-card-title>\n            <v-card-text style=\"float: center\">\n              <v-data-table\n                :headers=\"sourcePairHeaders\"\n                :items=\"$store.state.dataSourcePairs\"\n                :search=\"searchPairs\"\n                :loading=\"$store.state.loadingServers\"\n              >\n                <v-progress-linear\n                  slot=\"progress\"\n                  color=\"blue\"\n                  indeterminate\n                ></v-progress-linear>\n                <template\n                  v-slot:item=\"{ item }\"\n                >\n                  <tr>\n                    <td>{{item.source1.name}} - {{item.source2.name}}</td>\n                    <td>{{item.userID.userName}}</td>\n                    <v-radio-group\n                      v-model='activeDataSourcePair'\n                      style=\"height: 5px\"\n                    >\n                      <td>\n                        <v-radio\n                          :value=\"item\"\n                          color=\"blue\"\n                        ></v-radio>\n                      </td>\n                    </v-radio-group>\n                    <td>\n                      {{item.shared.users | mergeUsers}}\n                    </td>\n                    <td v-if='item.userID._id === $store.state.auth.userID'>\n                      <v-btn\n                        text\n                        color=\"primary\"\n                        @click=\"share(item, 'showDialog')\"\n                      >\n                        <v-icon>mdi-share-variant-outline</v-icon>Share\n                      </v-btn>\n                    </td>\n                  </tr>\n                </template>\n              </v-data-table>\n            </v-card-text>\n            <v-card-actions>\n              <v-btn\n                :disabled=\"!canDeletePair\"\n                color=\"error\"\n                rounded\n                @click=\"confirmDeletePair\"\n              >\n                <v-icon left>mdi-delete</v-icon>Delete Pair\n              </v-btn>\n              <v-spacer></v-spacer>\n              <v-btn\n                color=\"primary\"\n                rounded\n                @click=\"activatePair\"\n              >\n                <v-icon left>mdi-content-save</v-icon>Activate Pair\n              </v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-flex>\n      </v-layout>\n    </center>\n  </v-container>\n</template>\n<script>\nimport axios from 'axios'\nimport { eventBus } from '@/main'\nimport { generalMixin } from '@/mixins/generalMixin'\nimport { dataSourcePairMixin } from './dataSourcePairMixin'\nexport default {\n  mixins: [generalMixin, dataSourcePairMixin],\n  data () {\n    return {\n      confirmPairDeleteDialog: false,\n      helpDialog: false,\n      alertSuccess: false,\n      alertError: false,\n      alertMsg: '',\n      pairLimitWarn: false,\n      shareDialog: false,\n      mapSourcePairLevels: false,\n      pairLevelsMapping: {},\n      sharePair: {},\n      source1: {},\n      source2: {},\n      searchPairs: '',\n      searchSources: '',\n      searchUsers: '',\n      users: [],\n      sharedUsers: [],\n      activeDataSourcePair: {},\n      pairLevelsMappingHeader: [\n        { text: 'Source 1 Levels', value: 'headerSource1Levels', sortable: false },\n        { text: 'Source 2 Levels', value: 'headerSource1Levels', sortable: false }\n      ],\n      source1Headers: [\n        { sortable: false },\n        { text: 'Source 1', value: 'headerSource1', sortable: false }\n      ],\n      source2Headers: [\n        { sortable: false },\n        { text: 'Source 2', value: 'headerSource2', sortable: false }\n      ],\n      sourcePairHeaders: [\n        { text: 'Pair', value: 'pair' },\n        { text: 'Owner', value: 'owner', sortable: false },\n        { text: 'Active', value: 'active' },\n        { text: 'Shared To', value: 'shareStatus' }\n      ],\n      usersHeader: [\n        { text: 'Username', value: 'username', sortable: true },\n        { text: 'Firstname', value: 'fname', sortable: true },\n        { text: 'Surname', value: 'sname', sortable: true }\n      ],\n      source1Levels: [],\n      source2Levels: []\n    }\n  },\n  filters: {\n    mergeUsers (users) {\n      if (!users || users.length === 0) {\n        return ''\n      }\n      let userNames = ''\n      for (let user of users) {\n        if (!userNames) {\n          userNames = user.userName\n        } else {\n          userNames = ',' + user.userName\n        }\n      }\n      return userNames\n    }\n  },\n  methods: {\n    confirmDeletePair () {\n      this.confirmPairDeleteDialog = true\n    },\n    deletePair () {\n      this.confirmPairDeleteDialog = false\n      let query = `pairId=${this.activeDataSourcePair._id}&userID=${this.activeDataSourcePair.owner.id}&source1Name=${this.activeDataSourcePair.source1.name}&source2Name=${this.activeDataSourcePair.source2.name}`\n      axios.delete('/deleteSourcePair?' + query).then(() => {\n        this.$store.state.errorTitle = 'Pair Deletion'\n        this.$store.state.errorDescription = 'Pair deleted successfully'\n        this.$store.state.dialogError = true\n        setTimeout(() => {\n          eventBus.$emit('getDataSourcePair')\n        }, 500)\n      }).catch((err) => {\n        this.$store.state.errorTitle = 'Pair Deletion'\n        this.$store.state.errorDescription = 'An error occured while deleting pair, please retry'\n        this.$store.state.errorColor = 'error'\n        this.$store.state.dialogError = true\n        console.log(JSON.stringify(err))\n      })\n    },\n    reset () {\n      this.source1 = {}\n      this.source2 = {}\n      this.activeDataSourcePair = {}\n      this.$store.state.dynamicProgress = true\n      this.$store.state.progressTitle = 'Reseting Data Source Pairs'\n      let userID = this.$store.state.auth.userID\n      axios.get('/resetDataSourcePair/' + userID).then(() => {\n        eventBus.$emit('getDataSourcePair')\n        this.$store.state.dynamicProgress = false\n        this.alertSuccess = true\n        this.alertMsg = 'Data Source Pair Reseted Successfully'\n      }).catch((error) => {\n        this.alertError = true\n        this.alertMsg = 'Something went wrong while reseting data source pairs'\n        console.log(error)\n      })\n    },\n    checkLevels () {\n      this.pairLevelsMapping = {}\n      let source1 = this.source1.name\n      let source2 = this.source2.name\n      source1 = this.toTitleCase(source1)\n      source2 = this.toTitleCase(source2)\n      let sourcesLimitOrgId = JSON.stringify({\n        source1LimitOrgId: this.getLimitOrgIdOnDataSource(this.source1),\n        source2LimitOrgId: this.getLimitOrgIdOnDataSource(this.source2)\n      })\n      let sourcesOwner = JSON.stringify({\n        source1Owner: this.source1.userID._id,\n        source2Owner: this.source2.userID._id\n      })\n      axios\n        .get('/countLevels/' + source1 + '/' + source2 + '/' + sourcesOwner + '/' + sourcesLimitOrgId)\n        .then(levels => {\n          if (levels.data.totalSource1Levels === 1) {\n            this.$store.state.errorTitle = 'No data for you'\n            this.$store.state.errorDescription = 'Cant create this pair, ' + this.source1.name + ' has no data for you'\n            this.$store.state.dialogError = true\n            return\n          }\n          if (levels.data.totalSource2Levels === 1) {\n            this.$store.state.errorTitle = 'No data for you'\n            this.$store.state.errorDescription = 'Cant create this pair, ' + this.source2.name + ' has no data for you'\n            this.$store.state.dialogError = true\n            return\n          }\n          if (levels.data.totalSource1Levels > levels.data.totalSource2Levels) {\n            this.$store.state.errorTitle = 'Levels mismatch'\n            this.$store.state.errorDescription = 'Make sure source1 has the same or less levels as source2'\n            this.$store.state.dialogError = true\n          } else {\n            this.createDatasourcePair(this.source1, this.source2)\n          }\n        })\n    },\n    mappingSelected (selectedLevel) {\n      this.source2Levels = this.source2Levels.filter((src2Lvl) => {\n        return src2Lvl.value !== this.pairLevelsMapping[selectedLevel]\n      })\n    },\n    clearMappingSelection (selectedLevel) {\n      this.source2Levels.push({\n        text: this.$store.state.levelMapping.source2[this.pairLevelsMapping[selectedLevel]],\n        value: this.pairLevelsMapping[selectedLevel]\n      })\n      let keys = Object.keys(this.pairLevelsMapping)\n      let newKeys = keys.filter((key) => {\n        return key !== selectedLevel\n      })\n      let newObj = {}\n      for (let key of newKeys) {\n        newObj[key] = this.pairLevelsMapping[key]\n      }\n      this.pairLevelsMapping = newObj\n    },\n    closeLevelMappingDialog () {\n      for (let key in this.pairLevelsMapping) {\n        this.source2Levels.push({\n          text: this.$store.state.levelMapping.source2[this.pairLevelsMapping[key]],\n          value: this.pairLevelsMapping[key]\n        })\n      }\n      this.mapSourcePairLevels = false\n    },\n    share (pair, action) {\n      if (action === 'showDialog') {\n        this.sharedUsers = []\n        this.sharePair = pair\n        if (pair.hasOwnProperty('shared') && pair.shared.users.length > 0) {\n          pair.shared.users.forEach((sharedUsers) => {\n            this.sharedUsers.push(sharedUsers._id)\n          })\n        }\n        this.shareDialog = true\n      } else if (action === 'saveShare') {\n        if (this.sharedUsers.length === 0) {\n          this.$store.state.dialogError = true\n          this.$store.state.errorTitle = 'Info'\n          this.$store.state.errorDescription = 'Please select atleast one user'\n          return\n        }\n        let formData = new FormData()\n        formData.append('sharePair', this.sharePair._id)\n        formData.append('users', JSON.stringify(this.sharedUsers))\n        formData.append('userID', this.$store.state.auth.userID)\n        formData.append('orgId', this.$store.state.dhis.user.orgId)\n        this.$store.state.loadingServers = true\n        this.shareDialog = false\n        axios.post('/shareSourcePair', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        }).then((response) => {\n          this.$store.state.loadingServers = false\n          this.$store.state.dataSourcePairs = response.data\n        }).catch((err) => {\n          console.log(err)\n          this.$store.state.loadingServers = false\n        })\n      }\n    },\n    getUsers () {\n      axios.get('/getUsers').then((response) => {\n        this.users = response.data\n      })\n    }\n  },\n  computed: {\n    dataSources2 () {\n      if (!this.$store.state.config.generalConfig.reconciliation.fixSource2) {\n        return this.$store.state.dataSources\n      } else {\n        let dtSrc = ''\n        for (let source of this.$store.state.dataSources) {\n          if (\n            source._id ===\n            this.$store.state.config.generalConfig.reconciliation.fixSource2To\n          ) {\n            dtSrc = source\n          }\n        }\n        return [dtSrc]\n      }\n    },\n    canCreatePair () {\n      if (this.$store.state.dhis.user.orgId && this.$store.state.config.generalConfig.reconciliation.singlePair) {\n        if (this.$store.state.dataSourcePairs.length === 0) {\n          return true\n        } else {\n          return false\n        }\n      } else {\n        return true\n      }\n    },\n    canDeletePair () {\n      if (JSON.stringify(this.activeDataSourcePair) === '{}') {\n        return false\n      }\n      if (this.activeDataSourcePair.owner.id === this.$store.state.auth.userID) {\n        return true\n      } else {\n        return false\n      }\n    }\n  },\n  created () {\n    if (!this.canCreatePair) {\n      this.pairLimitWarn = true\n    }\n    this.getUsers()\n    this.source1 = this.$store.state.dataSources.find((dataSource) => {\n      return dataSource._id === this.$store.state.activePair.source1.id\n    })\n    this.source2 = this.$store.state.dataSources.find((dataSource) => {\n      return dataSource._id === this.$store.state.activePair.source2.id\n    })\n    this.activeDataSourcePair = this.getActiveDataSourcePair()\n    if (!this.source1) {\n      this.source1 = {}\n    }\n    if (!this.source2) {\n      this.source2 = {}\n    }\n\n    for (let level in this.$store.state.levelMapping.source2) {\n      if (level !== 'code') {\n        this.source2Levels.push({\n          text: this.$store.state.levelMapping.source2[level],\n          value: level\n        })\n      }\n    }\n\n    for (let level in this.$store.state.levelMapping.source1) {\n      if (level !== 'code') {\n        this.source1Levels.push({\n          text: this.$store.state.levelMapping.source1[level],\n          value: level\n        })\n      }\n    }\n  }\n}\n</script>\n"]}]}