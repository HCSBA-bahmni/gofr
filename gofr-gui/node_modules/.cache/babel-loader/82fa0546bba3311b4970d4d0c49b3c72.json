{"remainingRequest":"/home/ally/gofr2/node_modules/babel-loader/lib/index.js!/home/ally/gofr2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ally/gofr2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr2/src/components/DataSources/FacilityReconRemoteSources.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr2/src/components/DataSources/FacilityReconRemoteSources.vue","mtime":1619080790043},{"path":"/home/ally/gofr2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ally/gofr2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ally/gofr2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ally/gofr2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2FsbHkvZ29mcjIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgcmVxdWlyZWQgfSBmcm9tICd2dWVsaWRhdGUvbGliL3ZhbGlkYXRvcnMnOwppbXBvcnQgeyBkYXRhU291cmNlc01peGluIH0gZnJvbSAnLi9kYXRhU291cmNlc01peGluJzsKaW1wb3J0IHsgZ2VuZXJhbE1peGluIH0gZnJvbSAnLi4vLi4vbWl4aW5zL2dlbmVyYWxNaXhpbic7CmltcG9ydCB7IGV2ZW50QnVzIH0gZnJvbSAnLi4vLi4vbWFpbic7CmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtkYXRhU291cmNlc01peGluLCBnZW5lcmFsTWl4aW5dLAogIHZhbGlkYXRpb25zOiB7CiAgICBob3N0OiB7CiAgICAgIHJlcXVpcmVkOiByZXF1aXJlZAogICAgfSwKICAgIG5hbWU6IHsKICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkCiAgICB9LAogICAgc291cmNlVHlwZTogewogICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhc2V0TGltaXRXYXJuOiBmYWxzZSwKICAgICAgbmFtZUVycm9yczogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIGV2ZW50QnVzLiRlbWl0KCdkYXRhU291cmNlU2F2ZWQnKTsKICAgIH0sCiAgICBwZXJmb3JtRXh0cmFDaGVjazogZnVuY3Rpb24gcGVyZm9ybUV4dHJhQ2hlY2soKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyByZWxvYWQgZ2VuZXJhbCBjb25maWcgYW5kIHNlZSBpZiBzdGlsbCBhbGxvd2VkIHRvIHVwbG9hZCBtb3JlIGRhdGEgc291cmNlcwogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5keW5hbWljUHJvZ3Jlc3MgPSB0cnVlOwogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5wcm9ncmVzc1RpdGxlID0gJ1BlcmZvcm1pbmcgZXh0cmEgdmFsaWRhdGlvbnMnOwogICAgICB0aGlzLmdldEdlbmVyYWxDb25maWcoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmRhdGFzZXRMaW1pdFdhcm4gPSBmYWxzZTsKICAgICAgICBfdGhpcy4kc3RvcmUuc3RhdGUuZHluYW1pY1Byb2dyZXNzID0gZmFsc2U7CgogICAgICAgIGlmIChfdGhpcy5jYW5BZGREYXRhc2V0KSB7CiAgICAgICAgICBfdGhpcy5hZGREYXRhU291cmNlKCdzeW5jU2VydmVyJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLmRhdGFzZXRMaW1pdFdhcm4gPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZW5zdXJlTmFtZVVuaXF1ZTogZnVuY3Rpb24gZW5zdXJlTmFtZVVuaXF1ZSgpIHsKICAgICAgdGhpcy5uYW1lRXJyb3JzID0gW107CgogICAgICBpZiAodGhpcy5uYW1lID09PSAnJykgewogICAgICAgIHJldHVybiB0aGlzLm5hbWVFcnJvcnMucHVzaCgnTmFtZSBpcyByZXF1aXJlZCcpOwogICAgICB9CgogICAgICBpZiAodGhpcy5uYW1lLmxlbmd0aCA+IDM1KSB7CiAgICAgICAgcmV0dXJuIHRoaXMubmFtZUVycm9ycy5wdXNoKCdOYW1lIG11c3Qgbm90IGV4Y2VlZCAzNSBjaGFyYWN0ZXJzJyk7CiAgICAgIH0KCiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmludmFsaWRDaGFyYWN0ZXJzKSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGludmFsaWRDaGFyID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgaWYgKHRoaXMubmFtZS5pbmRleE9mKGludmFsaWRDaGFyKSAhPT0gLTEpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMubmFtZUVycm9ycy5wdXNoKCdOYW1lIGlzIGludmFsaWQnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQoKICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLiRzdG9yZS5zdGF0ZS5kYXRhU291cmNlcyksCiAgICAgICAgICBfc3RlcDI7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgZHRTcmMgPSBfc3RlcDIudmFsdWU7CgogICAgICAgICAgaWYgKGR0U3JjLm5hbWUgPT09IHRoaXMubmFtZSkgewogICAgICAgICAgICB0aGlzLm5hbWVFcnJvcnMucHVzaCgnVGhpcyBOYW1lIEV4aXN0cycpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["FacilityReconRemoteSources.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoIA,SAAA,QAAA,QAAA,0BAAA;AACA,SAAA,gBAAA,QAAA,oBAAA;AACA,SAAA,YAAA,QAAA,2BAAA;AACA,SAAA,QAAA,QAAA,YAAA;AACA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,gBAAA,EAAA,YAAA,CADA;AAEA,EAAA,WAAA,EAAA;AACA,IAAA,IAAA,EAAA;AAAA,MAAA,QAAA,EAAA;AAAA,KADA;AAEA,IAAA,IAAA,EAAA;AAAA,MAAA,QAAA,EAAA;AAAA,KAFA;AAGA,IAAA,UAAA,EAAA;AAAA,MAAA,QAAA,EAAA;AAAA;AAHA,GAFA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,gBAAA,EAAA,KADA;AAEA,MAAA,UAAA,EAAA;AAFA,KAAA;AAIA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AACA,MAAA,QAAA,CAAA,KAAA,CAAA,iBAAA;AACA,KAHA;AAIA,IAAA,iBAJA,+BAIA;AAAA;;AACA;AACA,WAAA,MAAA,CAAA,KAAA,CAAA,eAAA,GAAA,IAAA;AACA,WAAA,MAAA,CAAA,KAAA,CAAA,aAAA,GAAA,8BAAA;AACA,WAAA,gBAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,gBAAA,GAAA,KAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,eAAA,GAAA,KAAA;;AACA,YAAA,KAAA,CAAA,aAAA,EAAA;AACA,UAAA,KAAA,CAAA,aAAA,CAAA,YAAA;AACA,SAFA,MAEA;AACA,UAAA,KAAA,CAAA,gBAAA,GAAA,IAAA;AACA;AACA,OARA;AASA,KAjBA;AAkBA,IAAA,gBAlBA,8BAkBA;AACA,WAAA,UAAA,GAAA,EAAA;;AACA,UAAA,KAAA,IAAA,KAAA,EAAA,EAAA;AACA,eAAA,KAAA,UAAA,CAAA,IAAA,CAAA,kBAAA,CAAA;AACA;;AACA,UAAA,KAAA,IAAA,CAAA,MAAA,GAAA,EAAA,EAAA;AACA,eAAA,KAAA,UAAA,CAAA,IAAA,CAAA,oCAAA,CAAA;AACA;;AAPA,iDAQA,KAAA,iBARA;AAAA;;AAAA;AAQA,4DAAA;AAAA,cAAA,WAAA;;AACA,cAAA,KAAA,IAAA,CAAA,OAAA,CAAA,WAAA,MAAA,CAAA,CAAA,EAAA;AACA,mBAAA,KAAA,UAAA,CAAA,IAAA,CAAA,iBAAA,CAAA;AACA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;;AAAA,kDAaA,KAAA,MAAA,CAAA,KAAA,CAAA,WAbA;AAAA;;AAAA;AAaA,+DAAA;AAAA,cAAA,KAAA;;AACA,cAAA,KAAA,CAAA,IAAA,KAAA,KAAA,IAAA,EAAA;AACA,iBAAA,UAAA,CAAA,IAAA,CAAA,kBAAA;AACA,mBAAA,KAAA;AACA;AACA;AAlBA;AAAA;AAAA;AAAA;AAAA;AAmBA;AArCA;AAbA,CAAA","sourcesContent":["<template>\n  <v-container>\n    <v-layout\n      row\n      wrap\n    >\n      <v-spacer></v-spacer>\n      <v-flex xs6>\n        <v-card\n          class=\"mx-auto\"\n          style=\"max-width: 500px;\"\n        >\n          <v-system-bar\n            color=\"deep-purple darken-4\"\n            dark\n          >\n\n          </v-system-bar>\n          <v-toolbar\n            color=\"deep-purple accent-4\"\n            cards\n            dark\n            text\n          >\n            <v-card-title class=\"title font-weight-regular\">Add New Remote Source</v-card-title>\n            <v-spacer></v-spacer>\n            <v-btn\n              icon\n              dark\n              @click.native=\"close()\"\n            >\n              <v-icon>mdi-close</v-icon>\n            </v-btn>\n          </v-toolbar>\n          <v-form\n            ref=\"form\"\n            class=\"pa-3 pt-4\"\n          >\n            <v-select\n              :items=\"$store.state.remoteDataSources\"\n              v-model=\"sourceType\"\n              required\n              label=\"Source Type\"\n            ></v-select>\n            <v-text-field\n              v-model=\"name\"\n              filled\n              required\n              @blur=\"ensureNameUnique\"\n              @input=\"ensureNameUnique\"\n              :error-messages=\"nameErrors\"\n              color=\"deep-purple\"\n              label=\"Source Name\"\n            ></v-text-field>\n            <v-text-field\n              v-model=\"host\"\n              filled\n              required\n              color=\"deep-purple\"\n              label=\"Base URL\"\n            ></v-text-field>\n            <v-text-field\n              v-model=\"username\"\n              filled\n              color=\"deep-purple\"\n              label=\"Username\"\n            ></v-text-field>\n            <v-text-field\n              v-model=\"password\"\n              filled\n              color=\"deep-purple\"\n              label=\"Password\"\n              style=\"min-height: 96px\"\n              type=\"password\"\n            ></v-text-field>\n            <template>\n              <v-tooltip top>\n                <v-checkbox\n                  v-if=\"$store.state.dhis.user.orgId\"\n                  :disabled=\"shareWithAll\"\n                  slot=\"activator\"\n                  color=\"primary\"\n                  label=\"Share with other users of the same org unit as yours\"\n                  v-model=\"shareToSameOrgid\"\n                ></v-checkbox>\n                <span>\n                  Share this dataset with all other users that are on the same org unit as you\n                </span>\n              </v-tooltip>\n              <v-checkbox\n                v-if='$store.state.config.generalConfig.allowShareToAllForNonAdmin || $store.state.auth.role === \"Admin\"'\n                @change=\"sharingOptions\"\n                color=\"primary\"\n                label=\"Share with all other users\"\n                v-model=\"shareWithAll\"\n              >\n              </v-checkbox>\n              <v-tooltip top>\n                <v-checkbox\n                  v-if=\"shareWithAll && $store.state.dhis.user.orgId\"\n                  slot=\"activator\"\n                  color=\"primary\"\n                  label=\"Limit orgs sharing by user orgid\"\n                  v-model=\"limitShareByOrgId\"\n                >\n                </v-checkbox>\n                <span>\n                  if activated, other users will see locations (including location children) that has the same location id as their location id\n                </span>\n              </v-tooltip>\n            </template>\n          </v-form>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              @click=\"performExtraCheck\"\n              :disabled=\"$v.$invalid\"\n              class=\"white--text\"\n              color=\"deep-purple accent-4\"\n              depressed\n            >\n              Add\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-flex>\n      <v-spacer></v-spacer>\n    </v-layout>\n  </v-container>\n</template>\n<script>\nimport { required } from 'vuelidate/lib/validators'\nimport { dataSourcesMixin } from './dataSourcesMixin'\nimport { generalMixin } from '../../mixins/generalMixin'\nimport { eventBus } from '../../main'\nexport default {\n  mixins: [dataSourcesMixin, generalMixin],\n  validations: {\n    host: { required },\n    name: { required },\n    sourceType: { required }\n  },\n  data () {\n    return {\n      datasetLimitWarn: false,\n      nameErrors: []\n    }\n  },\n  methods: {\n    close () {\n      eventBus.$emit('dataSourceSaved')\n    },\n    performExtraCheck () {\n      // reload general config and see if still allowed to upload more data sources\n      this.$store.state.dynamicProgress = true\n      this.$store.state.progressTitle = 'Performing extra validations'\n      this.getGeneralConfig(() => {\n        this.datasetLimitWarn = false\n        this.$store.state.dynamicProgress = false\n        if (this.canAddDataset) {\n          this.addDataSource('syncServer')\n        } else {\n          this.datasetLimitWarn = true\n        }\n      })\n    },\n    ensureNameUnique () {\n      this.nameErrors = []\n      if (this.name === '') {\n        return this.nameErrors.push('Name is required')\n      }\n      if (this.name.length > 35) {\n        return this.nameErrors.push('Name must not exceed 35 characters')\n      }\n      for (let invalidChar of this.invalidCharacters) {\n        if (this.name.indexOf(invalidChar) !== -1) {\n          return this.nameErrors.push('Name is invalid')\n        }\n      }\n      for (let dtSrc of this.$store.state.dataSources) {\n        if (dtSrc.name === this.name) {\n          this.nameErrors.push('This Name Exists')\n          return false\n        }\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components/DataSources"}]}