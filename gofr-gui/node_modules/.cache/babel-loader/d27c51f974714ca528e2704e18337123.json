{"remainingRequest":"/home/ally/gofr/gofr-gui/node_modules/babel-loader/lib/index.js!/home/ally/gofr/gofr-gui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ally/gofr/gofr-gui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr/gofr-gui/src/components/DataSources/FacilityReconRemoteSources.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr/gofr-gui/src/components/DataSources/FacilityReconRemoteSources.vue","mtime":1619257194373},{"path":"/home/ally/gofr/gofr-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/gofr-gui/node_modules/babel-loader/lib/index.js","mtime":1619257191453},{"path":"/home/ally/gofr/gofr-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/gofr-gui/node_modules/vue-loader/lib/index.js","mtime":1619257191305}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2FsbHkvZ29mci9nb2ZyLWd1aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyByZXF1aXJlZCB9IGZyb20gJ3Z1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycyc7CmltcG9ydCB7IGRhdGFTb3VyY2VzTWl4aW4gfSBmcm9tICcuL2RhdGFTb3VyY2VzTWl4aW4nOwppbXBvcnQgeyBnZW5lcmFsTWl4aW4gfSBmcm9tICcuLi8uLi9taXhpbnMvZ2VuZXJhbE1peGluJzsKaW1wb3J0IHsgZXZlbnRCdXMgfSBmcm9tICcuLi8uLi9tYWluJzsKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW2RhdGFTb3VyY2VzTWl4aW4sIGdlbmVyYWxNaXhpbl0sCiAgdmFsaWRhdGlvbnM6IHsKICAgIGhvc3Q6IHsKICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkCiAgICB9LAogICAgbmFtZTogewogICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgIH0sCiAgICBzb3VyY2VUeXBlOiB7CiAgICAgIHJlcXVpcmVkOiByZXF1aXJlZAogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGFzZXRMaW1pdFdhcm46IGZhbHNlLAogICAgICBuYW1lRXJyb3JzOiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgZXZlbnRCdXMuJGVtaXQoJ2RhdGFTb3VyY2VTYXZlZCcpOwogICAgfSwKICAgIHBlcmZvcm1FeHRyYUNoZWNrOiBmdW5jdGlvbiBwZXJmb3JtRXh0cmFDaGVjaygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vIHJlbG9hZCBnZW5lcmFsIGNvbmZpZyBhbmQgc2VlIGlmIHN0aWxsIGFsbG93ZWQgdG8gdXBsb2FkIG1vcmUgZGF0YSBzb3VyY2VzCiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmR5bmFtaWNQcm9ncmVzcyA9IHRydWU7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnByb2dyZXNzVGl0bGUgPSAnUGVyZm9ybWluZyBleHRyYSB2YWxpZGF0aW9ucyc7CiAgICAgIHRoaXMuZ2V0R2VuZXJhbENvbmZpZyhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuZGF0YXNldExpbWl0V2FybiA9IGZhbHNlOwogICAgICAgIF90aGlzLiRzdG9yZS5zdGF0ZS5keW5hbWljUHJvZ3Jlc3MgPSBmYWxzZTsKCiAgICAgICAgaWYgKF90aGlzLmNhbkFkZERhdGFzZXQpIHsKICAgICAgICAgIF90aGlzLmFkZERhdGFTb3VyY2UoJ3N5bmNTZXJ2ZXInKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuZGF0YXNldExpbWl0V2FybiA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBlbnN1cmVOYW1lVW5pcXVlOiBmdW5jdGlvbiBlbnN1cmVOYW1lVW5pcXVlKCkgewogICAgICB0aGlzLm5hbWVFcnJvcnMgPSBbXTsKCiAgICAgIGlmICh0aGlzLm5hbWUgPT09ICcnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubmFtZUVycm9ycy5wdXNoKCdOYW1lIGlzIHJlcXVpcmVkJyk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm5hbWUubGVuZ3RoID4gMzUpIHsKICAgICAgICByZXR1cm4gdGhpcy5uYW1lRXJyb3JzLnB1c2goJ05hbWUgbXVzdCBub3QgZXhjZWVkIDM1IGNoYXJhY3RlcnMnKTsKICAgICAgfQoKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuaW52YWxpZENoYXJhY3RlcnMpLAogICAgICAgICAgX3N0ZXA7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgaW52YWxpZENoYXIgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICBpZiAodGhpcy5uYW1lLmluZGV4T2YoaW52YWxpZENoYXIpICE9PSAtMSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5uYW1lRXJyb3JzLnB1c2goJ05hbWUgaXMgaW52YWxpZCcpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CgogICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuJHN0b3JlLnN0YXRlLmRhdGFTb3VyY2VzKSwKICAgICAgICAgIF9zdGVwMjsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBkdFNyYyA9IF9zdGVwMi52YWx1ZTsKCiAgICAgICAgICBpZiAoZHRTcmMubmFtZSA9PT0gdGhpcy5uYW1lKSB7CiAgICAgICAgICAgIHRoaXMubmFtZUVycm9ycy5wdXNoKCdUaGlzIE5hbWUgRXhpc3RzJyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["FacilityReconRemoteSources.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoIA,SAAA,QAAA,QAAA,0BAAA;AACA,SAAA,gBAAA,QAAA,oBAAA;AACA,SAAA,YAAA,QAAA,2BAAA;AACA,SAAA,QAAA,QAAA,YAAA;AACA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,gBAAA,EAAA,YAAA,CADA;AAEA,EAAA,WAAA,EAAA;AACA,IAAA,IAAA,EAAA;AAAA,MAAA,QAAA,EAAA;AAAA,KADA;AAEA,IAAA,IAAA,EAAA;AAAA,MAAA,QAAA,EAAA;AAAA,KAFA;AAGA,IAAA,UAAA,EAAA;AAAA,MAAA,QAAA,EAAA;AAAA;AAHA,GAFA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,gBAAA,EAAA,KADA;AAEA,MAAA,UAAA,EAAA;AAFA,KAAA;AAIA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AACA,MAAA,QAAA,CAAA,KAAA,CAAA,iBAAA;AACA,KAHA;AAIA,IAAA,iBAJA,+BAIA;AAAA;;AACA;AACA,WAAA,MAAA,CAAA,KAAA,CAAA,eAAA,GAAA,IAAA;AACA,WAAA,MAAA,CAAA,KAAA,CAAA,aAAA,GAAA,8BAAA;AACA,WAAA,gBAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,gBAAA,GAAA,KAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,eAAA,GAAA,KAAA;;AACA,YAAA,KAAA,CAAA,aAAA,EAAA;AACA,UAAA,KAAA,CAAA,aAAA,CAAA,YAAA;AACA,SAFA,MAEA;AACA,UAAA,KAAA,CAAA,gBAAA,GAAA,IAAA;AACA;AACA,OARA;AASA,KAjBA;AAkBA,IAAA,gBAlBA,8BAkBA;AACA,WAAA,UAAA,GAAA,EAAA;;AACA,UAAA,KAAA,IAAA,KAAA,EAAA,EAAA;AACA,eAAA,KAAA,UAAA,CAAA,IAAA,CAAA,kBAAA,CAAA;AACA;;AACA,UAAA,KAAA,IAAA,CAAA,MAAA,GAAA,EAAA,EAAA;AACA,eAAA,KAAA,UAAA,CAAA,IAAA,CAAA,oCAAA,CAAA;AACA;;AAPA,iDAQA,KAAA,iBARA;AAAA;;AAAA;AAQA,4DAAA;AAAA,cAAA,WAAA;;AACA,cAAA,KAAA,IAAA,CAAA,OAAA,CAAA,WAAA,MAAA,CAAA,CAAA,EAAA;AACA,mBAAA,KAAA,UAAA,CAAA,IAAA,CAAA,iBAAA,CAAA;AACA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;;AAAA,kDAaA,KAAA,MAAA,CAAA,KAAA,CAAA,WAbA;AAAA;;AAAA;AAaA,+DAAA;AAAA,cAAA,KAAA;;AACA,cAAA,KAAA,CAAA,IAAA,KAAA,KAAA,IAAA,EAAA;AACA,iBAAA,UAAA,CAAA,IAAA,CAAA,kBAAA;AACA,mBAAA,KAAA;AACA;AACA;AAlBA;AAAA;AAAA;AAAA;AAAA;AAmBA;AArCA;AAbA,CAAA","sourcesContent":["<template>\n  <v-container>\n    <v-layout\n      row\n      wrap\n    >\n      <v-spacer></v-spacer>\n      <v-flex xs6>\n        <v-card\n          class=\"mx-auto\"\n          style=\"max-width: 500px;\"\n        >\n          <v-system-bar\n            color=\"deep-purple darken-4\"\n            dark\n          >\n\n          </v-system-bar>\n          <v-toolbar\n            color=\"deep-purple accent-4\"\n            cards\n            dark\n            text\n          >\n            <v-card-title class=\"title font-weight-regular\">Add New Remote Source</v-card-title>\n            <v-spacer></v-spacer>\n            <v-btn\n              icon\n              dark\n              @click.native=\"close()\"\n            >\n              <v-icon>mdi-close</v-icon>\n            </v-btn>\n          </v-toolbar>\n          <v-form\n            ref=\"form\"\n            class=\"pa-3 pt-4\"\n          >\n            <v-select\n              :items=\"$store.state.remoteDataSources\"\n              v-model=\"sourceType\"\n              required\n              label=\"Source Type\"\n            ></v-select>\n            <v-text-field\n              v-model=\"name\"\n              filled\n              required\n              @blur=\"ensureNameUnique\"\n              @input=\"ensureNameUnique\"\n              :error-messages=\"nameErrors\"\n              color=\"deep-purple\"\n              label=\"Source Name\"\n            ></v-text-field>\n            <v-text-field\n              v-model=\"host\"\n              filled\n              required\n              color=\"deep-purple\"\n              label=\"Base URL\"\n            ></v-text-field>\n            <v-text-field\n              v-model=\"username\"\n              filled\n              color=\"deep-purple\"\n              label=\"Username\"\n            ></v-text-field>\n            <v-text-field\n              v-model=\"password\"\n              filled\n              color=\"deep-purple\"\n              label=\"Password\"\n              style=\"min-height: 96px\"\n              type=\"password\"\n            ></v-text-field>\n            <template>\n              <v-tooltip top>\n                <v-checkbox\n                  v-if=\"$store.state.dhis.user.orgId\"\n                  :disabled=\"shareWithAll\"\n                  slot=\"activator\"\n                  color=\"primary\"\n                  label=\"Share with other users of the same org unit as yours\"\n                  v-model=\"shareToSameOrgid\"\n                ></v-checkbox>\n                <span>\n                  Share this dataset with all other users that are on the same org unit as you\n                </span>\n              </v-tooltip>\n              <v-checkbox\n                v-if='$store.state.config.generalConfig.allowShareToAllForNonAdmin || $store.state.auth.role === \"Admin\"'\n                @change=\"sharingOptions\"\n                color=\"primary\"\n                label=\"Share with all other users\"\n                v-model=\"shareWithAll\"\n              >\n              </v-checkbox>\n              <v-tooltip top>\n                <v-checkbox\n                  v-if=\"shareWithAll && $store.state.dhis.user.orgId\"\n                  slot=\"activator\"\n                  color=\"primary\"\n                  label=\"Limit orgs sharing by user orgid\"\n                  v-model=\"limitShareByOrgId\"\n                >\n                </v-checkbox>\n                <span>\n                  if activated, other users will see locations (including location children) that has the same location id as their location id\n                </span>\n              </v-tooltip>\n            </template>\n          </v-form>\n          <v-divider></v-divider>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn\n              @click=\"performExtraCheck\"\n              :disabled=\"$v.$invalid\"\n              class=\"white--text\"\n              color=\"deep-purple accent-4\"\n              depressed\n            >\n              Add\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-flex>\n      <v-spacer></v-spacer>\n    </v-layout>\n  </v-container>\n</template>\n<script>\nimport { required } from 'vuelidate/lib/validators'\nimport { dataSourcesMixin } from './dataSourcesMixin'\nimport { generalMixin } from '../../mixins/generalMixin'\nimport { eventBus } from '../../main'\nexport default {\n  mixins: [dataSourcesMixin, generalMixin],\n  validations: {\n    host: { required },\n    name: { required },\n    sourceType: { required }\n  },\n  data () {\n    return {\n      datasetLimitWarn: false,\n      nameErrors: []\n    }\n  },\n  methods: {\n    close () {\n      eventBus.$emit('dataSourceSaved')\n    },\n    performExtraCheck () {\n      // reload general config and see if still allowed to upload more data sources\n      this.$store.state.dynamicProgress = true\n      this.$store.state.progressTitle = 'Performing extra validations'\n      this.getGeneralConfig(() => {\n        this.datasetLimitWarn = false\n        this.$store.state.dynamicProgress = false\n        if (this.canAddDataset) {\n          this.addDataSource('syncServer')\n        } else {\n          this.datasetLimitWarn = true\n        }\n      })\n    },\n    ensureNameUnique () {\n      this.nameErrors = []\n      if (this.name === '') {\n        return this.nameErrors.push('Name is required')\n      }\n      if (this.name.length > 35) {\n        return this.nameErrors.push('Name must not exceed 35 characters')\n      }\n      for (let invalidChar of this.invalidCharacters) {\n        if (this.name.indexOf(invalidChar) !== -1) {\n          return this.nameErrors.push('Name is invalid')\n        }\n      }\n      for (let dtSrc of this.$store.state.dataSources) {\n        if (dtSrc.name === this.name) {\n          this.nameErrors.push('This Name Exists')\n          return false\n        }\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components/DataSources"}]}