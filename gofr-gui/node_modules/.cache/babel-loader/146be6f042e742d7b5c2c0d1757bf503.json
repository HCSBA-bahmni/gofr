{"remainingRequest":"/home/ally/gofr/facility-recon-gui/node_modules/babel-loader/lib/index.js!/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr/facility-recon-gui/src/components/fhir/fhir-attachment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr/facility-recon-gui/src/components/fhir/fhir-attachment.vue","mtime":1619258171835},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/babel-loader/lib/index.js","mtime":1619257191453},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js","mtime":1619257191305}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgSWhyaXNFbGVtZW50IGZyb20gIi4uL2locmlzL2locmlzLWVsZW1lbnQudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJmaGlyLWF0dGFjaG1lbnQiLAogIHByb3BzOiBbImZpZWxkIiwgImxhYmVsIiwgIm1pbiIsICJtYXgiLCAiaWQiLCAicGF0aCIsICJzbG90UHJvcHMiLCAic2xpY2VOYW1lIiwgImJhc2UtbWluIiwgImJhc2UtbWF4IiwgImVkaXQiLCAicmVhZE9ubHlJZlNldCIsICJjb25zdHJhaW50cyJdLAogIGNvbXBvbmVudHM6IHsKICAgIElocmlzRWxlbWVudDogSWhyaXNFbGVtZW50CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc291cmNlOiB7CiAgICAgICAgcGF0aDogIiIsCiAgICAgICAgZGF0YToge30KICAgICAgfSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHVwbG9hZDogdW5kZWZpbmVkLAogICAgICB2YWx1ZTogewogICAgICAgIGNvbnRlbnRUeXBlOiAiIiwKICAgICAgICBkYXRhOiAiIiwKICAgICAgICB0aXRsZTogIiIKICAgICAgfSwKICAgICAgb3JpZ1ZhbHVlOiB7CiAgICAgICAgY29udGVudFR5cGU6ICIiLAogICAgICAgIGRhdGE6ICIiLAogICAgICAgIHRpdGxlOiAiIgogICAgICB9LAogICAgICBxRmllbGQ6ICJ2YWx1ZUF0dGFjaG1lbnQiLAogICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgIG9ialVSTDogIiIsCiAgICAgIGVycm9yczogW10sCiAgICAgIGxvY2tXYXRjaDogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgLy9jb25zb2xlLmxvZygiQ1JFQVRFIEFUVEFDSCIsdGhpcy5maWVsZCx0aGlzLnNsb3RQcm9wcykKICAgIHRoaXMuc2V0dXBEYXRhKCk7CiAgfSwKICB3YXRjaDogewogICAgc2xvdFByb3BzOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgLy9jb25zb2xlLmxvZygiV0FUQ0ggQVRUQUNIIix0aGlzLmZpZWxkLHRoaXMucGF0aCx0aGlzLnNsb3RQcm9wcykKICAgICAgICBpZiAoIXRoaXMubG9ja1dhdGNoKSB7CiAgICAgICAgICB0aGlzLnNldHVwRGF0YSgpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2V0dXBEYXRhOiBmdW5jdGlvbiBzZXR1cERhdGEoKSB7CiAgICAgIGlmICh0aGlzLnNsb3RQcm9wcyAmJiB0aGlzLnNsb3RQcm9wcy5zb3VyY2UpIHsKICAgICAgICB0aGlzLnNvdXJjZSA9IHsKICAgICAgICAgIHBhdGg6IHRoaXMuc2xvdFByb3BzLnNvdXJjZS5wYXRoICsgIi4iICsgdGhpcy5maWVsZCwKICAgICAgICAgIGRhdGE6IHt9CiAgICAgICAgfTsKCiAgICAgICAgaWYgKHRoaXMuc2xvdFByb3BzLnNvdXJjZS5mcm9tQXJyYXkpIHsKICAgICAgICAgIHRoaXMuc291cmNlLmRhdGEgPSB0aGlzLnNsb3RQcm9wcy5zb3VyY2UuZGF0YTsKICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnNvdXJjZS5kYXRhOwogICAgICAgICAgdGhpcy5vcmlnVmFsdWUgPSB0aGlzLnZhbHVlOwogICAgICAgICAgdGhpcy5sb2NrV2F0Y2ggPSB0cnVlOyAvL2NvbnNvbGUubG9nKCJTRVQgdmFsdWUgdG8gIiwgdGhpcy5zb3VyY2UuZGF0YSwgdGhpcy5zbG90UHJvcHMuaW5wdXQpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBleHByZXNzaW9uID0gdGhpcy4kZmhpcnV0aWxzLnBhdGhGaWVsZEV4cHJlc3Npb24odGhpcy5maWVsZCk7CiAgICAgICAgICB0aGlzLnNvdXJjZS5kYXRhID0gdGhpcy4kZmhpcnBhdGguZXZhbHVhdGUodGhpcy5zbG90UHJvcHMuc291cmNlLmRhdGEsIGV4cHJlc3Npb24pOyAvL2NvbnNvbGUubG9nKCJTVFIgRkhJUlBBVEgiLCB0aGlzLnNsb3RQcm9wcy5zb3VyY2UuZGF0YSwgdGhpcy5maWVsZCkKCiAgICAgICAgICBpZiAodGhpcy5zb3VyY2UuZGF0YS5sZW5ndGggPT0gMSkgewogICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5zb3VyY2UuZGF0YVswXTsKICAgICAgICAgICAgdGhpcy5vcmlnVmFsdWUgPSB0aGlzLnZhbHVlOwogICAgICAgICAgICB0aGlzLmxvY2tXYXRjaCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLnNldE9iamVjdFVSTCgpOwogICAgICB0aGlzLmRpc2FibGVkID0gdGhpcy5yZWFkT25seUlmU2V0ICYmICEhdGhpcy52YWx1ZTsgLy9jb25zb2xlLmxvZyh0aGlzLnNvdXJjZSkKICAgIH0sCiAgICBzZXRPYmplY3RVUkw6IGZ1bmN0aW9uIHNldE9iamVjdFVSTCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLm9ialVSTCkgewogICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5vYmpVUkwpOwogICAgICB9CgogICAgICBpZiAodGhpcy52YWx1ZS5kYXRhICYmIHRoaXMudmFsdWUuY29udGVudFR5cGUpIHsKICAgICAgICB2YXIgZGF0YVVSTCA9ICJkYXRhOiIgKyB0aGlzLnZhbHVlLmNvbnRlbnRUeXBlICsgIjtiYXNlNjQsIiArIHRoaXMudmFsdWUuZGF0YTsKICAgICAgICBmZXRjaChkYXRhVVJMKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHJldHVybiByZXMuYmxvYigpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGJsb2IpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5vYmpVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiRmFpbGVkIHRvIGdldCBkYXRhIGZyb20gYmFzZTY0LiIsIGUpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZG9VcGxvYWQ6IGZ1bmN0aW9uIGRvVXBsb2FkKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuZXJyb3JzID0gW107CgogICAgICBpZiAoIXRoaXMudXBsb2FkKSB7CiAgICAgICAgdGhpcy51cGxvYWQgPSB1bmRlZmluZWQ7CiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMub3JpZ1ZhbHVlOwogICAgICAgIHRoaXMub2JqVVJMID0gIiI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICB0aGlzLnZhbHVlLmNvbnRlbnRUeXBlID0gdGhpcy51cGxvYWQudHlwZTsKICAgICAgICB0aGlzLnZhbHVlLnRpdGxlID0gdGhpcy51cGxvYWQubmFtZTsKICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIodGhpcy51cGxvYWQpOwoKICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGRhdGEgPSBCdWZmZXIuZnJvbShyZWFkZXIucmVzdWx0KTsKICAgICAgICAgIF90aGlzMi52YWx1ZS5kYXRhID0gZGF0YS50b1N0cmluZygnYmFzZTY0Jyk7CiAgICAgICAgICBfdGhpczIubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgX3RoaXMyLm9ialVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoX3RoaXMyLnVwbG9hZCk7CiAgICAgICAgfTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlzSW1hZ2U6IGZ1bmN0aW9uIGlzSW1hZ2UoKSB7CiAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNvbnRlbnRUeXBlICYmIHRoaXMudmFsdWUuY29udGVudFR5cGUuc3RhcnRzV2l0aCgiaW1hZ2UvIik7CiAgICB9LAogICAgaW5kZXg6IGZ1bmN0aW9uIGluZGV4KCkgewogICAgICBpZiAodGhpcy5zbG90UHJvcHMgJiYgdGhpcy5zbG90UHJvcHMuaW5wdXQpIHJldHVybiB0aGlzLnNsb3RQcm9wcy5pbnB1dC5pbmRleDtlbHNlIHJldHVybiB1bmRlZmluZWQ7CiAgICB9LAogICAgZGlzcGxheTogZnVuY3Rpb24gZGlzcGxheSgpIHsKICAgICAgaWYgKHRoaXMuc2xvdFByb3BzICYmIHRoaXMuc2xvdFByb3BzLmlucHV0KSByZXR1cm4gdGhpcy5zbG90UHJvcHMuaW5wdXQubGFiZWw7ZWxzZSByZXR1cm4gdGhpcy5sYWJlbDsKICAgIH0sCiAgICByZXF1aXJlZDogZnVuY3Rpb24gcmVxdWlyZWQoKSB7CiAgICAgIHJldHVybiAodGhpcy5pbmRleCB8fCAwKSA8IHRoaXMubWluOwogICAgfSwKICAgIHJ1bGVzOiBmdW5jdGlvbiBydWxlcygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5yZXF1aXJlZCkgewogICAgICAgIHJldHVybiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIHJldHVybiAhIXYgfHwgX3RoaXMzLmRpc3BsYXkgKyAiIGlzIHJlcXVpcmVkIjsKICAgICAgICB9XTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["fhir-attachment.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <ihris-element :edit=\"edit\" :loading=\"false\">\n    <template #form>\n      <v-file-input \n        :disabled=\"disabled\" \n        :label=\"display\" \n        :loading=\"loading\"\n        v-model=\"upload\" \n        outlined \n        hide-details=\"auto\" \n        :rules=\"rules\" \n        dense\n        @change='doUpload'\n        :error-messages=\"errors\"\n      >\n        <template #label>{{display}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n        <template #append-outer>\n          <v-menu \n            v-if=\"objURL\"\n            offset-y\n            left\n            eager\n          >\n            <template v-slot:activator=\"{on, attrs}\">\n              <v-btn\n                color=\"accent\"\n                dark\n                fab\n                x-small\n                v-bind=\"attrs\"\n                v-on=\"on\"><v-icon>mdi-file-eye</v-icon></v-btn>\n            </template>\n            <v-list>\n              <v-list-item>\n                <v-img v-if=\"isImage\" :src=\"objURL\"/>\n                <a v-else :download=\"value.title\" :href=\"objURL\">{{value.title}}</a>\n              </v-list-item>\n            </v-list>\n          </v-menu>\n        </template>\n      </v-file-input>\n    </template>\n    <template #header>\n      {{display}}\n    </template>\n    <template #value>\n      <v-menu \n        v-if=\"isImage\"\n        absolute\n        eager\n        >\n        <template v-slot:activator=\"{on, attrs}\">\n          <v-img :src=\"objURL\" contain :max-height=\"150\" position=\"left\" v-bind=\"attrs\" v-on=\"on\" />\n        </template>\n        <v-list min-width=\"0\">\n          <v-list-item>\n            <v-img :src=\"objURL\" />\n          </v-list-item>\n        </v-list>\n      </v-menu>\n      <a v-else :href=\"objURL\">{{value.title}}</a>\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport IhrisElement from \"../ihris/ihris-element.vue\"\n\nexport default {\n  name: \"fhir-attachment\",\n  props: [\"field\", \"label\", \"min\", \"max\", \"id\", \"path\", \"slotProps\", \"sliceName\",\"base-min\",\"base-max\",\"edit\",\"readOnlyIfSet\",\n    \"constraints\"],\n  components: {\n    IhrisElement\n  },\n  data: function() {\n    return {\n      source: { path: \"\", data: {} },\n      loading: false,\n      upload: undefined,\n      value: { contentType: \"\", data: \"\", title: \"\" },\n      origValue: { contentType: \"\", data: \"\", title: \"\" },\n      qField: \"valueAttachment\",\n      disabled: false,\n      objURL: \"\",\n      errors: [],\n      lockWatch: false\n    }\n  },\n  created: function() {\n    //console.log(\"CREATE ATTACH\",this.field,this.slotProps)\n    this.setupData()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH ATTACH\",this.field,this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    setupData() {\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n          this.value = this.source.data\n          this.origValue = this.value\n          this.lockWatch = true\n          //console.log(\"SET value to \", this.source.data, this.slotProps.input)\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          //console.log(\"STR FHIRPATH\", this.slotProps.source.data, this.field)\n          if ( this.source.data.length == 1 ) {\n            this.value = this.source.data[0]\n            this.origValue = this.value\n            this.lockWatch = true\n          }\n        }\n      }\n      this.setObjectURL()\n      this.disabled = this.readOnlyIfSet && (!!this.value)\n      //console.log(this.source)\n    },\n    setObjectURL() {\n      if ( this.objURL ) {\n        URL.revokeObjectURL( this.objURL )\n      }\n      if ( this.value.data && this.value.contentType ) {\n        let dataURL = \"data:\"+this.value.contentType+\";base64,\"+this.value.data\n        fetch(dataURL).then( res => res.blob() ).then( blob => this.objURL = URL.createObjectURL( blob ) ).catch( e => {\n          console.log(\"Failed to get data from base64.\",e)\n        } )\n      }\n    },\n    doUpload() {\n      this.errors = []\n      if ( !this.upload ) {\n        this.upload = undefined\n        this.value = this.origValue\n        this.objURL = \"\"\n      } else {\n        this.loading = true\n        this.value.contentType = this.upload.type\n        this.value.title = this.upload.name\n        let reader = new FileReader()\n        reader.readAsArrayBuffer( this.upload )\n        reader.onload = () => {\n          let data = Buffer.from( reader.result )\n          this.value.data = data.toString('base64')\n          this.loading = false\n          this.objURL = URL.createObjectURL( this.upload )\n        }\n      }\n    }\n  },\n  computed: {\n    isImage: function() {\n      return this.value.contentType && this.value.contentType.startsWith(\"image/\")\n    },\n    index: function() {\n      if ( this.slotProps && this.slotProps.input ) return this.slotProps.input.index\n      else return undefined\n    },\n    display: function() {\n      if ( this.slotProps && this.slotProps.input) return this.slotProps.input.label\n      else return this.label\n    },\n    required: function() {\n      return (this.index || 0) < this.min\n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.display+\" is required\" ]\n      } else {\n        return []\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components/fhir"}]}