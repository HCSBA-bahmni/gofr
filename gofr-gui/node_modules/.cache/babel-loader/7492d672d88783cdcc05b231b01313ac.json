{"remainingRequest":"/home/ally/gofr/gofr-gui/node_modules/babel-loader/lib/index.js!/home/ally/gofr/gofr-gui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ally/gofr/gofr-gui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr/gofr-gui/src/components/fhir/fhir-time.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr/gofr-gui/src/components/fhir/fhir-time.vue","mtime":1619428444495},{"path":"/home/ally/gofr/gofr-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/gofr-gui/node_modules/babel-loader/lib/index.js","mtime":1619257191453},{"path":"/home/ally/gofr/gofr-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/gofr-gui/node_modules/vue-loader/lib/index.js","mtime":1619257191305}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IElocmlzRWxlbWVudCBmcm9tICIuLi9paHJpcy9paHJpcy1lbGVtZW50LnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZmhpci1kYXRlLXRpbWUiLAogIHByb3BzOiBbImZpZWxkIiwgIm1pbiIsICJtYXgiLCAiYmFzZS1taW4iLCAiYmFzZS1tYXgiLCAibGFiZWwiLCAic2xvdFByb3BzIiwgInBhdGgiLCAiZWRpdCIsICJzbGljZU5hbWUiLCAibWluVmFsdWVEYXRlVGltZSIsICJtYXhWYWx1ZURhdGVUaW1lIiwgIm1pblZhbHVlUXVhbnRpdHkiLCAibWF4VmFsdWVRdWFudGl0eSIsICJkaXNwbGF5VHlwZSIsICJyZWFkT25seUlmU2V0IiwgImNhbGVuZGFyIiwgImNvbnN0cmFpbnRzIl0sCiAgY29tcG9uZW50czogewogICAgSWhyaXNFbGVtZW50OiBJaHJpc0VsZW1lbnQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2YWx1ZTogbnVsbCwKICAgICAgZXRWYWx1ZTogbnVsbCwKICAgICAgbWVudTogZmFsc2UsCiAgICAgIHNvdXJjZTogewogICAgICAgIHBhdGg6ICIiLAogICAgICAgIGRhdGE6IHt9CiAgICAgIH0sCiAgICAgIHFGaWVsZDogInZhbHVlRGF0ZVRpbWUiLAogICAgICBwaWNrZXJUeXBlOiAiZGF0ZSIsCiAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgZXJyb3JzOiBbXSwKICAgICAgbG9ja1dhdGNoOiBmYWxzZSwKICAgICAgZGlzcGxheVZhbHVlOiAnJwogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAvL2NvbnNvbGUubG9nKCJDUkVBVEUgREFURVRJTUUiLHRoaXMuZmllbGQsdGhpcy5zbG90UHJvcHMpCiAgICB0aGlzLnNldHVwRGF0YSgpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGluZGV4OiBmdW5jdGlvbiBpbmRleCgpIHsKICAgICAgaWYgKHRoaXMuc2xvdFByb3BzICYmIHRoaXMuc2xvdFByb3BzLmlucHV0KSByZXR1cm4gdGhpcy5zbG90UHJvcHMuaW5wdXQuaW5kZXg7ZWxzZSByZXR1cm4gdW5kZWZpbmVkOwogICAgfSwKICAgIHJlcXVpcmVkOiBmdW5jdGlvbiByZXF1aXJlZCgpIHsKICAgICAgcmV0dXJuICh0aGlzLmluZGV4IHx8IDApIDwgdGhpcy5taW47CiAgICB9LAogICAgcnVsZXM6IGZ1bmN0aW9uIHJ1bGVzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMucmVxdWlyZWQpIHsKICAgICAgICByZXR1cm4gW2Z1bmN0aW9uICh2KSB7CiAgICAgICAgICByZXR1cm4gISF2IHx8IF90aGlzLmxhYmVsICsgIiBpcyByZXF1aXJlZCI7CiAgICAgICAgfV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgc2xvdFByb3BzOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgLy9jb25zb2xlLmxvZygiV0FUQ0ggREFURVRJTUUiLHRoaXMuZmllbGQsdGhpcy5wYXRoLHRoaXMuc2xvdFByb3BzKQogICAgICAgIGlmICghdGhpcy5sb2NrV2F0Y2gpIHsKICAgICAgICAgIHRoaXMuc2V0dXBEYXRhKCk7CiAgICAgICAgfQogICAgICB9LAogICAgICBkZWVwOiB0cnVlCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXR1cERhdGE6IGZ1bmN0aW9uIHNldHVwRGF0YSgpIHsKICAgICAgaWYgKHRoaXMuc2xvdFByb3BzICYmIHRoaXMuc2xvdFByb3BzLnNvdXJjZSkgewogICAgICAgIHRoaXMuc291cmNlID0gewogICAgICAgICAgcGF0aDogdGhpcy5zbG90UHJvcHMuc291cmNlLnBhdGggKyAiLiIgKyB0aGlzLmZpZWxkLAogICAgICAgICAgZGF0YToge30KICAgICAgICB9OwoKICAgICAgICBpZiAodGhpcy5zbG90UHJvcHMuc291cmNlLmZyb21BcnJheSkgewogICAgICAgICAgdGhpcy5zb3VyY2UuZGF0YSA9IHRoaXMuc2xvdFByb3BzLnNvdXJjZS5kYXRhOwogICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc291cmNlLmRhdGE7CiAgICAgICAgICB0aGlzLmxvY2tXYXRjaCA9IHRydWU7IC8vY29uc29sZS5sb2coIlNFVCB2YWx1ZSB0byAiLCB0aGlzLnNvdXJjZS5kYXRhLCB0aGlzLnNsb3RQcm9wcy5pbnB1dCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLiRmaGlydXRpbHMucGF0aEZpZWxkRXhwcmVzc2lvbih0aGlzLmZpZWxkKTsKICAgICAgICAgIHRoaXMuc291cmNlLmRhdGEgPSB0aGlzLiRmaGlycGF0aC5ldmFsdWF0ZSh0aGlzLnNsb3RQcm9wcy5zb3VyY2UuZGF0YSwgZXhwcmVzc2lvbik7IC8vY29uc29sZS5sb2coIlNUUiBGSElSUEFUSCIsIHRoaXMuc2xvdFByb3BzLnNvdXJjZS5kYXRhLCB0aGlzLmZpZWxkKQoKICAgICAgICAgIGlmICh0aGlzLnNvdXJjZS5kYXRhLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnNvdXJjZS5kYXRhWzBdOwogICAgICAgICAgICB0aGlzLmxvY2tXYXRjaCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB0aGlzLmRpc2FibGVkID0gdGhpcy5yZWFkT25seUlmU2V0ICYmICEhdGhpcy52YWx1ZTsgLy9jb25zb2xlLmxvZyh0aGlzLnNvdXJjZSkKICAgICAgfQogICAgfSwKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoZGF0ZSkgewogICAgICB0aGlzLmVycm9ycyA9IFtdOwogICAgICB0aGlzLiRyZWZzLm1lbnUuc2F2ZShkYXRlKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["fhir-time.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <ihris-element :edit=\"edit\" :loading=\"false\">\n    <template #form>\n     <v-menu\n        ref=\"menu\"\n        v-model=\"menu\"\n        :close-on-content-click=\"false\"\n        transition=\"scale-transition\"\n        offset-y\n        min-width=\"290px\"\n      >\n        <template v-slot:activator=\"{ on }\">\n          <v-text-field\n            v-model=\"displayValue\"\n            :label=\"label\"\n            prepend-inner-icon=\"mdi-calendar\"\n            readonly\n            v-on=\"on\"\n            outlined\n            hide-details=\"auto\"\n            :rules=\"rules\"\n            :error-messages=\"errors\"\n            dense\n          >\n            <template #label>{{label}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n          </v-text-field>\n        </template>\n        <v-time-picker\n          ref=\"picker\"\n          color=\"secondary\"\n          format=\"24hr\"\n          :landscape=\"$vuetify.breakpoint.smAndUp\"\n          v-model=\"displayValue\"\n          :disabled=\"disabled\"\n          @change=\"save\"\n        ></v-time-picker>\n\n      </v-menu>\n    </template>\n    <template #header>\n      {{label}}\n    </template>\n    <template #value>\n      {{displayValue}}\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport IhrisElement from \"../ihris/ihris-element.vue\"\n\nexport default {\n  name: \"fhir-date-time\",\n  props: [\"field\",\"min\",\"max\",\"base-min\",\"base-max\", \"label\", \"slotProps\", \"path\", \"edit\",\"sliceName\",\n    \"minValueDateTime\", \"maxValueDateTime\", \"minValueQuantity\", \"maxValueQuantity\", \"displayType\",\"readOnlyIfSet\", \"calendar\",\n    \"constraints\"],\n  components: {\n    IhrisElement\n  },\n  data: function() {\n    return {\n      value: null,\n      etValue: null,\n      menu: false,\n      source: { path: \"\", data: {} },\n      qField: \"valueDateTime\",\n      pickerType: \"date\",\n      disabled: false,\n      errors: [],\n      lockWatch: false,\n      displayValue: ''\n    }\n  },\n  created: function() {\n    //console.log(\"CREATE DATETIME\",this.field,this.slotProps)\n    this.setupData()\n  },\n  computed: {\n    index: function() {\n      if ( this.slotProps && this.slotProps.input ) return this.slotProps.input.index\n      else return undefined\n    },\n    required: function() {\n      return (this.index || 0) < this.min\n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.label+\" is required\" ]\n      } else {\n        return []\n      }\n    }\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH DATETIME\",this.field,this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    setupData() {\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n          this.value = this.source.data\n          this.lockWatch = true\n          //console.log(\"SET value to \", this.source.data, this.slotProps.input)\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          //console.log(\"STR FHIRPATH\", this.slotProps.source.data, this.field)\n          if ( this.source.data.length == 1 ) {\n            this.value = this.source.data[0]\n            this.lockWatch = true\n          }\n        }\n        this.disabled = this.readOnlyIfSet && (!!this.value)\n        //console.log(this.source)\n      }\n    },\n    save (date) {\n      this.errors = []\n      this.$refs.menu.save(date)\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components/fhir"}]}