{"remainingRequest":"/home/ally/gofr/facility-recon-gui/node_modules/babel-loader/lib/index.js!/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr/facility-recon-gui/src/components/fhir/fhir-reference.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr/facility-recon-gui/src/components/fhir/fhir-reference.vue","mtime":1619768856174},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/babel-loader/lib/index.js","mtime":1619257191453},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js","mtime":1619257191305}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2FsbHkvZ29mci9mYWNpbGl0eS1yZWNvbi1ndWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvYWxseS9nb2ZyL2ZhY2lsaXR5LXJlY29uLWd1aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmxpbmsuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmVuZHMtd2l0aC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBJaHJpc0VsZW1lbnQgZnJvbSAiLi4vaWhyaXMvaWhyaXMtZWxlbWVudC52dWUiOwoKdmFyIHF1ZXJ5c3RyaW5nID0gcmVxdWlyZSgncXVlcnlzdHJpbmcnKTsKCnZhciBmaGlydXJsID0gImh0dHA6Ly9obDcub3JnL2ZoaXIvU3RydWN0dXJlRGVmaW5pdGlvbi8iOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImZoaXItcmVmZXJlbmNlIiwKICBwcm9wczogWyJmaWVsZCIsICJsYWJlbCIsICJzbGljZU5hbWUiLCAidGFyZ2V0UHJvZmlsZSIsICJ0YXJnZXRSZXNvdXJjZSIsICJtaW4iLCAibWF4IiwgImJhc2UtbWluIiwgImJhc2UtbWF4IiwgInNsb3RQcm9wcyIsICJwYXRoIiwgInN1Yi1maWVsZHMiLCAiZWRpdCIsICJyZWFkT25seUlmU2V0IiwgImNvbnN0cmFpbnRzIiwgImRpc3BsYXlUeXBlIiwgImluaXRpYWxWYWx1ZSIsICJvdmVycmlkZVZhbHVlIl0sCiAgY29tcG9uZW50czogewogICAgSWhyaXNFbGVtZW50OiBJaHJpc0VsZW1lbnQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzb3VyY2U6IHsKICAgICAgICBwYXRoOiAiIiwKICAgICAgICBkYXRhOiB7fQogICAgICB9LAogICAgICB2YWx1ZTogewogICAgICAgIHJlZmVyZW5jZTogIiIKICAgICAgfSwKICAgICAgcUZpZWxkOiAidmFsdWVSZWZlcmVuY2UiLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgc2VhcmNoOiAiIiwKICAgICAgbWVudTogZmFsc2UsCiAgICAgIGl0ZW1zOiBbXSwKICAgICAgc2VsZWN0OiAiIiwKICAgICAgcmVzb3VyY2U6ICIiLAogICAgICBhd2FpdGluZ1NlYXJjaDogZmFsc2UsCiAgICAgIGRpc3BsYXlWYWx1ZTogIiIsCiAgICAgIHByZXNldDogZmFsc2UsCiAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgZXJyb3JzOiBbXSwKICAgICAgbG9ja1dhdGNoOiBmYWxzZSwKICAgICAgYWN0aXZlOiBbXSwKICAgICAgb3BlbjogW10sCiAgICAgIHRyZWVMb29rdXA6IHt9LAogICAgICBhbGxBbGxvd2VkOiB0cnVlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuc2V0dXBEYXRhKCk7CiAgfSwKICB3YXRjaDogewogICAgc2xvdFByb3BzOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgLy9jb25zb2xlLmxvZygiV0FUQ0ggUkVGRVJFTkNFIix0aGlzLnBhdGgsdGhpcy5zbG90UHJvcHMpCiAgICAgICAgaWYgKCF0aGlzLmxvY2tXYXRjaCkgewogICAgICAgICAgdGhpcy5zZXR1cERhdGEoKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0sCiAgICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaCh2YWwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5hd2FpdGluZ1NlYXJjaCkgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFsICYmIHZhbC5sZW5ndGggPiAxICYmIF90aGlzLnF1ZXJ5U2VsZWN0aW9ucyhfdGhpcy5zZWFyY2gpOwogICAgICAgICAgX3RoaXMuYXdhaXRpbmdTZWFyY2ggPSBmYWxzZTsKICAgICAgICB9LCA1MDApOwogICAgICB9CgogICAgICB0aGlzLmF3YWl0aW5nU2VhcmNoID0gdHJ1ZTsKICAgIH0sCiAgICBzZWxlY3Q6IGZ1bmN0aW9uIHNlbGVjdCh2YWwpIHsKICAgICAgdGhpcy52YWx1ZS5yZWZlcmVuY2UgPSB2YWw7CiAgICAgIHRoaXMuZ2V0RGlzcGxheSgpOwogICAgfSwKICAgIGFjdGl2ZTogZnVuY3Rpb24gYWN0aXZlKCkgewogICAgICBpZiAodGhpcy5hY3RpdmUubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5zZWxlY3QgPSB0aGlzLmFjdGl2ZVswXTsKICAgICAgICB0aGlzLmRpc3BsYXlWYWx1ZSA9IHRoaXMudHJlZUxvb2t1cFt0aGlzLnNlbGVjdF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWxlY3QgPSB1bmRlZmluZWQ7CiAgICAgICAgdGhpcy5kaXNwbGF5VmFsdWUgPSAiIjsKICAgICAgfQoKICAgICAgdGhpcy5tZW51ID0gZmFsc2U7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXR1cERhdGE6IGZ1bmN0aW9uIHNldHVwRGF0YSgpIHsKICAgICAgaWYgKHRoaXMudGFyZ2V0UHJvZmlsZSAmJiB0aGlzLnRhcmdldFJlc291cmNlKSB7CiAgICAgICAgaWYgKHRoaXMudGFyZ2V0UHJvZmlsZS5yZXBsYWNlKGZoaXJ1cmwsICIiKSA9PT0gdGhpcy50YXJnZXRSZXNvdXJjZSkgewogICAgICAgICAgdGhpcy5hbGxBbGxvd2VkID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5hbGxBbGxvd2VkID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnJlc291cmNlID0gdGhpcy50YXJnZXRSZXNvdXJjZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGlzcGxheVR5cGUgPT09ICJ0cmVlIikgewogICAgICAgIHRoaXMuc2V0dXBUcmVlSXRlbXMoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2xvdFByb3BzICYmIHRoaXMuc2xvdFByb3BzLnNvdXJjZSkgewogICAgICAgIHRoaXMuc291cmNlID0gewogICAgICAgICAgcGF0aDogdGhpcy5zbG90UHJvcHMuc291cmNlLnBhdGggKyAiLiIgKyB0aGlzLmZpZWxkLAogICAgICAgICAgZGF0YToge30KICAgICAgICB9OwoKICAgICAgICBpZiAodGhpcy5zbG90UHJvcHMuc291cmNlLmZyb21BcnJheSkgewogICAgICAgICAgdGhpcy5zb3VyY2UuZGF0YSA9IHRoaXMuc2xvdFByb3BzLnNvdXJjZS5kYXRhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgZXhwcmVzc2lvbiA9IHRoaXMuJGZoaXJ1dGlscy5wYXRoRmllbGRFeHByZXNzaW9uKHRoaXMuZmllbGQpOwogICAgICAgICAgdmFyIHJlc3VsdHMgPSB0aGlzLiRmaGlycGF0aC5ldmFsdWF0ZSh0aGlzLnNsb3RQcm9wcy5zb3VyY2UuZGF0YSwgZXhwcmVzc2lvbik7CiAgICAgICAgICB0aGlzLnNvdXJjZS5kYXRhID0gcmVzdWx0c1swXTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnNvdXJjZS5kYXRhKSB7CiAgICAgICAgICB0aGlzLnByZXNldCA9IHRydWU7CiAgICAgICAgICB0aGlzLnNlbGVjdCA9IHRoaXMuc291cmNlLmRhdGEucmVmZXJlbmNlOwogICAgICAgICAgdGhpcy5sb2NrV2F0Y2ggPSB0cnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5kaXNhYmxlZCA9IHRoaXMucmVhZE9ubHlJZlNldCAmJiB0aGlzLnByZXNldDsKICAgIH0sCiAgICBzZXR1cFRyZWVJdGVtczogZnVuY3Rpb24gc2V0dXBUcmVlSXRlbXMoKSB7CiAgICAgIHZhciB0cmVldG9wID0gdGhpcy5pbml0aWFsVmFsdWU7CgogICAgICBpZiAodGhpcy5vdmVycmlkZVZhbHVlKSB7CiAgICAgICAgdHJlZXRvcCA9IHRoaXMub3ZlcnJpZGVWYWx1ZTsKICAgICAgfQoKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdmFyIHBhcmFtcyA9IHt9OwoKICAgICAgaWYgKHRyZWV0b3ApIHsKICAgICAgICBwYXJhbXMgPSB7CiAgICAgICAgICAicGFydG9mIjogdHJlZXRvcAogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgInBhcnRvZjptaXNzaW5nIjogdHJ1ZQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHBhcmFtcy5fY291bnQgPSA1MDA7CiAgICAgIHZhciB1cmwgPSAiL2ZoaXIvIiArIHRoaXMucmVzb3VyY2UgKyAiPyIgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkocGFyYW1zKTsKICAgICAgdGhpcy5pdGVtcyA9IFtdOwogICAgICB0aGlzLmFkZEl0ZW1zKHVybCwgdGhpcy5pdGVtcyk7CiAgICB9LAogICAgY2hlY2tDaGlsZHJlbjogZnVuY3Rpb24gY2hlY2tDaGlsZHJlbihpdGVtKSB7CiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgInBhcnRvZiI6IGl0ZW0uaWQsCiAgICAgICAgIl9zdW1tYXJ5IjogImNvdW50IgogICAgICB9OwogICAgICB2YXIgdXJsID0gIi9maGlyLyIgKyB0aGlzLnJlc291cmNlICsgIj8iICsgcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHBhcmFtcyk7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIGF4aW9zLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgaWYgKGRhdGEudG90YWwgJiYgZGF0YS50b3RhbCA+IDApIHsKICAgICAgICAgICAgaXRlbS5jaGlsZHJlbiA9IFtdOwogICAgICAgICAgfQoKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiZmFpbGVkIHRvIGNoZWNrIGNoaWxkcmVuIGZvciIsIHVybCwgZXJyKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgYWRkSXRlbXM6IGZ1bmN0aW9uIGFkZEl0ZW1zKHVybCwgaXRlbXMpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBheGlvcy5nZXQodXJsKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlc3BvbnNlKSB7CiAgICAgICAgICB2YXIgZGF0YSwgX2l0ZXJhdG9yLCBfc3RlcCwgZW50cnksIGxvY2tlZCwgaXRlbSwgbmV4dDsKCiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICAgICAgICAgICAgaWYgKCEoZGF0YS5lbnRyeSAmJiBkYXRhLmVudHJ5Lmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihkYXRhLmVudHJ5KTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM7CgogICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucygpOwoKICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgaWYgKChfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGVudHJ5ID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgICAgICAgIGxvY2tlZCA9IF90aGlzMi5hbGxBbGxvd2VkID8gZmFsc2UgOiAhZW50cnkucmVzb3VyY2UubWV0YS5wcm9maWxlLmluY2x1ZGVzKF90aGlzMi50YXJnZXRQcm9maWxlKTsKICAgICAgICAgICAgICAgICAgaXRlbSA9IHsKICAgICAgICAgICAgICAgICAgICBpZDogZW50cnkucmVzb3VyY2UucmVzb3VyY2VUeXBlICsgIi8iICsgZW50cnkucmVzb3VyY2UuaWQsCiAgICAgICAgICAgICAgICAgICAgbmFtZTogZW50cnkucmVzb3VyY2UubmFtZSwKICAgICAgICAgICAgICAgICAgICBsb2NrZWQ6IGxvY2tlZAogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuY2hlY2tDaGlsZHJlbihpdGVtKTsKCiAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICBfdGhpczIudHJlZUxvb2t1cFtpdGVtLmlkXSA9IGl0ZW0ubmFtZTsKICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaChpdGVtKTsKCiAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTc7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMyk7CgogICAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZShfY29udGV4dC50MCk7CgogICAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDIwOwoKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMjApOwoKICAgICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmxpbmspIHsKICAgICAgICAgICAgICAgICAgICBuZXh0ID0gZGF0YS5saW5rLmZpbmQoZnVuY3Rpb24gKGxpbmspIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsaW5rLnJlbGF0aW9uID09PSAibmV4dCI7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChuZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuYWRkSXRlbXMobmV4dC51cmwsIGl0ZW1zKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1szLCAxNywgMjAsIDIzXV0pOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZygiRmFpbGVkIHRvIGFkZCBpdGVtcyBmb3IiLCB1cmwsIGVycik7CiAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgZmV0Y2hDaGlsZHJlbjogZnVuY3Rpb24gZmV0Y2hDaGlsZHJlbihpdGVtKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIHBhcmFtcyA9IHt9OwogICAgICBwYXJhbXMgPSB7CiAgICAgICAgInBhcnRvZiI6IGl0ZW0uaWQsCiAgICAgICAgX2NvdW50OiA1MDAKICAgICAgfTsKICAgICAgdmFyIHVybCA9ICIvZmhpci8iICsgdGhpcy5yZXNvdXJjZSArICI/IiArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShwYXJhbXMpOwogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLmFkZEl0ZW1zKHVybCwgaXRlbS5jaGlsZHJlbik7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIHZhciBjb3VudCA9IDA7CgogICAgICAgIHZhciBjaGVja0xvYWRpbmcgPSBmdW5jdGlvbiBjaGVja0xvYWRpbmcoKSB7CiAgICAgICAgICBpZiAoIV90aGlzMy5sb2FkaW5nIHx8IGNvdW50KysgPiAxMDApIHsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2V0VGltZW91dChjaGVja0xvYWRpbmcsIDIwMCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgY2hlY2tMb2FkaW5nKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHF1ZXJ5U2VsZWN0aW9uczogZnVuY3Rpb24gcXVlcnlTZWxlY3Rpb25zKHZhbCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgIm5hbWU6Y29udGFpbnMiOiB2YWwKICAgICAgfTsKCiAgICAgIGlmICghdGhpcy50YXJnZXRQcm9maWxlLmVuZHNXaXRoKHRoaXMucmVzb3VyY2UpKSB7CiAgICAgICAgcGFyYW1zLl9wcm9maWxlID0gdGhpcy50YXJnZXRQcm9maWxlOwogICAgICB9CgogICAgICB2YXIgdXJsID0gIi9maGlyLyIgKyB0aGlzLnJlc291cmNlICsgIj8iICsgcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHBhcmFtcyk7CiAgICAgIGF4aW9zLmdldCh1cmwpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihyZXNwb25zZSkgewogICAgICAgICAgdmFyIGRhdGEsIF9pdGVyYXRvcjIsIF9zdGVwMiwgZW50cnksIHJlZiwgaXRlbTsKCiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgICAgX3RoaXM0Lml0ZW1zID0gW107CgogICAgICAgICAgICAgICAgICBpZiAoIShkYXRhLmVudHJ5ICYmIGRhdGEuZW50cnkubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihkYXRhLmVudHJ5KTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA0OwoKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5zKCk7CgogICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICBpZiAoKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgZW50cnkgPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICAgICAgICAgIHJlZiA9IGVudHJ5LnJlc291cmNlLnJlc291cmNlVHlwZSArICIvIiArIGVudHJ5LnJlc291cmNlLmlkOwogICAgICAgICAgICAgICAgICBpdGVtID0gewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZWYKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC4kZmhpcnV0aWxzLnJlc291cmNlTG9va3VwKHJlZik7CgogICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgaXRlbS50ZXh0ID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgICAgICBfdGhpczQuaXRlbXMucHVzaChpdGVtKTsKCiAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTg7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSg0KTsKCiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIuZShfY29udGV4dDIudDApOwoKICAgICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMjE7CgogICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuZmluaXNoKDIxKTsKCiAgICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1s0LCAxOCwgMjEsIDI0XV0pOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSk7CiAgICB9LAogICAgZ2V0RGlzcGxheTogZnVuY3Rpb24gZ2V0RGlzcGxheSgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBpZiAoKCF0aGlzLmVkaXQgfHwgdGhpcy5wcmVzZXQpICYmIHRoaXMudmFsdWUgJiYgdGhpcy52YWx1ZS5yZWZlcmVuY2UpIHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgIHRoaXMuJGZoaXJ1dGlscy5yZXNvdXJjZUxvb2t1cCh0aGlzLnZhbHVlLnJlZmVyZW5jZSkudGhlbihmdW5jdGlvbiAoZGlzcGxheSkgewogICAgICAgICAgX3RoaXM1LmRpc3BsYXlWYWx1ZSA9IGRpc3BsYXk7CgogICAgICAgICAgaWYgKF90aGlzNS5kaXNwbGF5VHlwZSAhPT0gInRyZWUiKSB7CiAgICAgICAgICAgIF90aGlzNS5pdGVtcy5wdXNoKHsKICAgICAgICAgICAgICB0ZXh0OiBkaXNwbGF5LAogICAgICAgICAgICAgIHZhbHVlOiBfdGhpczUudmFsdWUucmVmZXJlbmNlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzNS5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBpbmRleDogZnVuY3Rpb24gaW5kZXgoKSB7CiAgICAgIGlmICh0aGlzLnNsb3RQcm9wcykgcmV0dXJuIHRoaXMuc2xvdFByb3BzLmlucHV0O2Vsc2UgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0sCiAgICBkaXNwbGF5OiBmdW5jdGlvbiBkaXNwbGF5KCkgewogICAgICBpZiAodGhpcy5zbG90UHJvcHMgJiYgdGhpcy5zbG90UHJvcHMuaW5wdXQpIHJldHVybiB0aGlzLnNsb3RQcm9wcy5pbnB1dC5sYWJlbDtlbHNlIHJldHVybiB0aGlzLmxhYmVsOwogICAgfSwKICAgIHJlcXVpcmVkOiBmdW5jdGlvbiByZXF1aXJlZCgpIHsKICAgICAgcmV0dXJuICh0aGlzLmluZGV4IHx8IDApIDwgdGhpcy5taW47CiAgICB9LAogICAgcnVsZXM6IGZ1bmN0aW9uIHJ1bGVzKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnJlcXVpcmVkKSB7CiAgICAgICAgcmV0dXJuIFtmdW5jdGlvbiAodikgewogICAgICAgICAgcmV0dXJuICEhdiB8fCBfdGhpczYuZGlzcGxheSArICIgaXMgcmVxdWlyZWQiOwogICAgICAgIH1dOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["fhir-reference.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <ihris-element :edit=\"edit\" :loading=\"loading\">\n    <template #form>\n      <v-menu\n        v-if=\"displayType == 'tree'\"\n        ref=\"menu\"\n        v-model=\"menu\"\n        :close-on-content-click=\"false\"\n        transition=\"scale-transition\"\n        offset-y\n        min-width=\"290px\"\n        max-height=\"500px\"\n        >\n        <template v-slot:activator=\"{ on }\">\n          <v-text-field\n            v-model=\"displayValue\"\n            :label=\"display\"\n            readonly\n            v-on=\"on\"\n            outlined\n            hide-details=\"auto\"\n            :rules=\"rules\"\n            :error-messages=\"errors\"\n            :loading=\"loading\"\n            dense>\n            <template #label>{{display}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n          </v-text-field>\n        </template>\n        <v-card v-if=\"!((disabled) || (preset && $route.name === 'resource_add'))\">\n          <v-treeview\n            :active.sync=\"active\"\n            :items=\"items\"\n            :load-children=\"fetchChildren\"\n            :open.sync=\"open\"\n            item-disabled=\"locked\"\n            activatable\n            :multiple-active=\"false\"\n            selection-type=\"independent\"\n            :loading=\"loading\"\n            ></v-treeview>\n        </v-card>\n      </v-menu>\n      <v-autocomplete\n        v-else\n        v-model=\"select\"\n        :loading=\"loading\"\n        :items=\"items\"\n        :search-input.sync=\"search\"\n        cache-items\n        flat\n        hide-no-data\n        hide-details\n        :label=\"display\"\n        outlined\n        dense\n        placeholder=\"Start typing for selection\"\n        :rules=\"rules\"\n        :disabled=\"(disabled) || (preset && $route.name === 'resource_add')\"\n        :error-messages=\"errors\"\n        @change=\"errors = []\"\n      >\n        <template #label>{{display}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n      </v-autocomplete>\n    </template>\n    <template #header>\n      {{display}}\n    </template>\n    <template #value>\n      {{displayValue}}\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport axios from 'axios'\nimport IhrisElement from \"../ihris/ihris-element.vue\"\n\nconst querystring = require('querystring')\nconst fhirurl = \"http://hl7.org/fhir/StructureDefinition/\"\nexport default {\n  name: \"fhir-reference\",\n  props: [\"field\",\"label\",\"sliceName\",\"targetProfile\",\"targetResource\",\"min\",\"max\",\"base-min\",\"base-max\",\n    \"slotProps\",\"path\",\"sub-fields\",\"edit\",\"readOnlyIfSet\",\"constraints\", \"displayType\", \"initialValue\", \"overrideValue\"],\n  components: {\n    IhrisElement\n  },\n  data: function() {\n    return {\n      source: { path: \"\", data: {} },\n      value: { reference: \"\" },\n      qField: \"valueReference\",\n      loading: false,\n      search: \"\",\n      menu: false,\n      items: [],\n      select: \"\",\n      resource: \"\",\n      awaitingSearch: false,\n      displayValue: \"\",\n      preset: false,\n      disabled: false,\n      errors: [],\n      lockWatch: false,\n      active: [],\n      open: [],\n      treeLookup: {},\n      allAllowed: true\n    }\n  },\n  created: function() {\n    this.setupData()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH REFERENCE\",this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    },\n    search: function (val) {\n      if ( !this.awaitingSearch) {\n        setTimeout( () => {\n          val && val.length > 1 && this.querySelections( this.search )\n          this.awaitingSearch = false\n        }, 500 )\n      }\n      this.awaitingSearch = true\n    },\n    select: function(val) {\n      this.value.reference = val\n      this.getDisplay()\n    },\n    active: function() {\n      if ( this.active.length ) {\n        this.select = this.active[0]\n        this.displayValue = this.treeLookup[ this.select ]\n      } else {\n        this.select = undefined\n        this.displayValue = \"\"\n      }\n      this.menu = false\n    }\n  },\n  methods: {\n    setupData: function() {\n      if ( this.targetProfile && this.targetResource ) {\n        if ( this.targetProfile.replace( fhirurl, \"\" ) === this.targetResource ) {\n          this.allAllowed = true\n        } else {\n          this.allAllowed = false\n        }\n        this.resource = this.targetResource\n      }\n      if ( this.displayType === \"tree\" ) {\n        this.setupTreeItems()\n      }\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          let results = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          this.source.data = results[0]\n        }\n        if( this.source.data ) {\n          this.preset = true\n          this.select = this.source.data.reference\n          this.lockWatch = true\n        }\n      }\n      this.disabled = this.readOnlyIfSet && this.preset\n    },\n    setupTreeItems: function() {\n      let treetop = this.initialValue\n      if ( this.overrideValue ) {\n        treetop = this.overrideValue\n      }\n      this.loading = true\n      let params = {}\n      if ( treetop ) {\n        params = { \"partof\": treetop }\n      } else {\n        params = { \"partof:missing\": true }\n      }\n      params._count = 500\n      let url = \"/fhir/\"+this.resource+\"?\"+querystring.stringify( params )\n      this.items = []\n      this.addItems( url, this.items )\n\n    },\n    checkChildren: function(item) {\n      let params = { \"partof\": item.id, \"_summary\": \"count\" }\n      let url = \"/fhir/\"+this.resource+\"?\"+querystring.stringify( params )\n      return new Promise( resolve => {\n        axios.get( url ).then( response => {\n          let data = response.data\n          if ( data.total && data.total > 0 ) {\n            item.children = []\n          }\n          resolve()\n        } ).catch( err => {\n          console.log(\"failed to check children for\",url,err)\n          resolve()\n        } )\n      } )\n    },\n    addItems: function(url, items) {\n      axios.get( url ).then( async(response) => {\n        let data = response.data\n        if ( data.entry && data.entry.length > 0 ) {\n          for( let entry of data.entry ) {\n            let locked = this.allAllowed ? false : !entry.resource.meta.profile.includes( this.targetProfile )\n            let item = {\n              id: entry.resource.resourceType+\"/\"+entry.resource.id,\n              name: entry.resource.name,\n              locked: locked\n            }\n            await this.checkChildren( item )\n            this.treeLookup[ item.id ] = item.name\n            items.push( item )\n          }\n        }\n        if ( data.link ) {\n          let next = data.link.find( link => link.relation === \"next\" )\n          if ( next ) {\n            this.addItems( next.url, items )\n          } else {\n            this.loading = false\n          }\n        } else {\n          this.loading = false\n        }\n      } ).catch( err => {\n        console.log(\"Failed to add items for\",url,err)\n        this.loading = false\n      } )\n    },\n    fetchChildren: function(item) {\n      let params = {}\n      params = { \"partof\": item.id, _count: 500 }\n      let url = \"/fhir/\"+this.resource+\"?\"+querystring.stringify( params )\n      this.loading = true\n      this.addItems( url, item.children )\n      return new Promise( resolve => {\n        let count = 0\n        const checkLoading = () => {\n          if ( !this.loading || count++ > 100) {\n            resolve()\n          } else {\n            setTimeout( checkLoading, 200 )\n          }\n        }\n        checkLoading()\n      } )\n    },\n    querySelections: function( val ) {\n      this.loading = true\n      let params = { \"name:contains\": val }\n      if ( !this.targetProfile.endsWith( this.resource ) ) {\n        params._profile = this.targetProfile\n      }\n      let url = \"/fhir/\"+this.resource+\"?\"+querystring.stringify( params )\n      axios.get( url ).then( async(response) => {\n        let data = response.data\n        this.items = []\n        if ( data.entry && data.entry.length ) {\n          for( let entry of data.entry ) {\n            let ref = entry.resource.resourceType+\"/\"+entry.resource.id\n            let item = { value: ref }\n            item.text = await this.$fhirutils.resourceLookup( ref )\n            this.items.push( item )\n          }\n        }\n      } )\n    },\n    getDisplay: function() {\n      if ( (!this.edit || this.preset) && this.value && this.value.reference ) {\n        this.loading = true\n        this.$fhirutils.resourceLookup( this.value.reference ).then( display => {\n          this.displayValue = display\n          if ( this.displayType !== \"tree\" ) {\n            this.items.push( {text: display, value: this.value.reference} )\n          }\n          this.loading = false\n        } )\n      }\n    }\n  },\n  computed: {\n    index: function() {\n      if ( this.slotProps ) return this.slotProps.input\n      else return undefined\n    },\n    display: function() {\n      if ( this.slotProps && this.slotProps.input) return this.slotProps.input.label\n      else return this.label\n    },\n    required: function() {\n      return (this.index || 0) < this.min\n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.display+\" is required\" ]\n      } else {\n        return []\n      }\n    }\n  }\n\n}\n</script>\n"],"sourceRoot":"src/components/fhir"}]}