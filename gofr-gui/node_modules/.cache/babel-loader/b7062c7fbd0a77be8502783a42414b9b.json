{"remainingRequest":"/home/ally/gofr/facility-recon-gui/node_modules/babel-loader/lib/index.js!/home/ally/gofr/facility-recon-gui/node_modules/eslint-loader/index.js??ref--13-0!/home/ally/gofr/facility-recon-gui/src/components/DataSources/dataSourcesMixin.js","dependencies":[{"path":"/home/ally/gofr/facility-recon-gui/src/components/DataSources/dataSourcesMixin.js","mtime":1619257194373},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/babel-loader/lib/index.js","mtime":1619257191453},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/eslint-loader/index.js","mtime":1619257191105}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgeyBldmVudEJ1cyB9IGZyb20gJy4uLy4uL21haW4nOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpleHBvcnQgdmFyIGRhdGFTb3VyY2VzTWl4aW4gPSB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6ICcnLAogICAgICBob3N0OiAnJywKICAgICAgdXNlcm5hbWU6ICcnLAogICAgICBwYXNzd29yZDogJycsCiAgICAgIHNvdXJjZVR5cGU6ICcnLAogICAgICBsaW1pdFNoYXJlQnlPcmdJZDogZmFsc2UsCiAgICAgIHNoYXJlV2l0aEFsbDogZmFsc2UsCiAgICAgIHNoYXJlVG9TYW1lT3JnaWQ6IHRydWUsCiAgICAgIGludmFsaWRDaGFyYWN0ZXJzOiBbJyInLCAnLycsICdcXCcsICcuJ10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzaGFyaW5nT3B0aW9uczogZnVuY3Rpb24gc2hhcmluZ09wdGlvbnMoKSB7CiAgICAgIGlmICh0aGlzLnNoYXJlV2l0aEFsbCkgewogICAgICAgIHRoaXMuc2hhcmVUb1NhbWVPcmdpZCA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgYWRkRGF0YVNvdXJjZTogZnVuY3Rpb24gYWRkRGF0YVNvdXJjZShzb3VyY2UpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICB2YXIgY2xpZW50SWQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jbGllbnRJZDsKICAgICAgZm9ybURhdGEuYXBwZW5kKCdob3N0JywgdGhpcy5ob3N0KTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCdzb3VyY2VUeXBlJywgdGhpcy5zb3VyY2VUeXBlKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCdzb3VyY2UnLCBzb3VyY2UpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ29yZ0lkJywgdGhpcy4kc3RvcmUuc3RhdGUuZGhpcy51c2VyLm9yZ0lkKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCdzaGFyZVRvU2FtZU9yZ2lkJywgdGhpcy5zaGFyZVRvU2FtZU9yZ2lkKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCdzaGFyZVRvQWxsJywgdGhpcy5zaGFyZVdpdGhBbGwpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2xpbWl0QnlVc2VyTG9jYXRpb24nLCB0aGlzLmxpbWl0U2hhcmVCeU9yZ0lkKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCd1c2VybmFtZScsIHRoaXMudXNlcm5hbWUpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3Bhc3N3b3JkJywgdGhpcy5wYXNzd29yZCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnbmFtZScsIHRoaXMubmFtZSk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnY2xpZW50SWQnLCBjbGllbnRJZCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgndXNlcklEJywgdGhpcy4kc3RvcmUuc3RhdGUuYXV0aC51c2VySUQpOwogICAgICB2YXIgc2VydmVyRXhpc3RzID0gdGhpcy4kc3RvcmUuc3RhdGUuZGF0YVNvdXJjZXMuZmluZChmdW5jdGlvbiAoZGF0YVNvdXJjZSkgewogICAgICAgIHJldHVybiBkYXRhU291cmNlLmhvc3QgPT09IF90aGlzLmhvc3Q7CiAgICAgIH0pOwogICAgICBheGlvcy5wb3N0KCcvYWRkRGF0YVNvdXJjZScsIGZvcm1EYXRhLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBldmVudEJ1cy4kZW1pdCgnZGF0YVNvdXJjZVNhdmVkJyk7CiAgICAgICAgZXZlbnRCdXMuJGVtaXQoJ2RhdGFTb3VyY2VBZGRlZFN1Y2Nlc3NmdWxseScpOwogICAgICAgIGV2ZW50QnVzLiRlbWl0KCdnZXREYXRhU291cmNlcycpOwoKICAgICAgICBpZiAoc2VydmVyRXhpc3RzKSB7CiAgICAgICAgICBzZXJ2ZXJFeGlzdHMubmFtZSA9IF90aGlzLm5hbWU7CiAgICAgICAgICBzZXJ2ZXJFeGlzdHMudXNlcm5hbWUgPSBfdGhpcy51c2VybmFtZTsKICAgICAgICAgIHNlcnZlckV4aXN0cy5wYXNzd29yZCA9IHJlc3BvbnNlLmRhdGEucGFzc3dvcmQ7CiAgICAgICAgICBzZXJ2ZXJFeGlzdHMuc291cmNlVHlwZSA9IF90aGlzLnNvdXJjZVR5cGU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiRzdG9yZS5zdGF0ZS5kYXRhU291cmNlcy5wdXNoKHsKICAgICAgICAgICAgbmFtZTogX3RoaXMubmFtZSwKICAgICAgICAgICAgaG9zdDogX3RoaXMuaG9zdCwKICAgICAgICAgICAgc291cmNlVHlwZTogX3RoaXMuc291cmNlVHlwZSwKICAgICAgICAgICAgc291cmNlOiAnc3luY1NlcnZlcicsCiAgICAgICAgICAgIHVzZXJuYW1lOiBfdGhpcy51c2VybmFtZSwKICAgICAgICAgICAgcGFzc3dvcmQ6IHJlc3BvbnNlLmRhdGEucGFzc3dvcmQKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgZXZlbnRCdXMuJGVtaXQoJ3JlbW90ZVNlcnZlckZhaWxlZEFkZCcpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/ally/gofr/facility-recon-gui/src/components/DataSources/dataSourcesMixin.js"],"names":["eventBus","axios","dataSourcesMixin","data","name","host","username","password","sourceType","limitShareByOrgId","shareWithAll","shareToSameOrgid","invalidCharacters","methods","sharingOptions","addDataSource","source","formData","FormData","clientId","$store","state","append","dhis","user","orgId","auth","userID","serverExists","dataSources","find","dataSource","post","headers","then","response","$emit","push","catch","err","console","log"],"mappings":"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","sourcesContent":["import {\n  eventBus\n} from '../../main'\nimport axios from 'axios'\nexport const dataSourcesMixin = {\n  data () {\n    return {\n      name: '',\n      host: '',\n      username: '',\n      password: '',\n      sourceType: '',\n      limitShareByOrgId: false,\n      shareWithAll: false,\n      shareToSameOrgid: true,\n      invalidCharacters: ['\"', '/', '\\\\', '.']\n    }\n  },\n  methods: {\n    sharingOptions () {\n      if (this.shareWithAll) {\n        this.shareToSameOrgid = false\n      }\n    },\n    addDataSource (source) {\n      let formData = new FormData()\n      const clientId = this.$store.state.clientId\n      formData.append('host', this.host)\n      formData.append('sourceType', this.sourceType)\n      formData.append('source', source)\n      formData.append('orgId', this.$store.state.dhis.user.orgId)\n      formData.append('shareToSameOrgid', this.shareToSameOrgid)\n      formData.append('shareToAll', this.shareWithAll)\n      formData.append('limitByUserLocation', this.limitShareByOrgId)\n      formData.append('username', this.username)\n      formData.append('password', this.password)\n      formData.append('name', this.name)\n      formData.append('clientId', clientId)\n      formData.append('userID', this.$store.state.auth.userID)\n\n      var serverExists = this.$store.state.dataSources.find((dataSource) => {\n        return dataSource.host === this.host\n      })\n      axios.post('/addDataSource', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then((response) => {\n        eventBus.$emit('dataSourceSaved')\n        eventBus.$emit('dataSourceAddedSuccessfully')\n        eventBus.$emit('getDataSources')\n        if (serverExists) {\n          serverExists.name = this.name\n          serverExists.username = this.username\n          serverExists.password = response.data.password\n          serverExists.sourceType = this.sourceType\n        } else {\n          this.$store.state.dataSources.push({\n            name: this.name,\n            host: this.host,\n            sourceType: this.sourceType,\n            source: 'syncServer',\n            username: this.username,\n            password: response.data.password\n          })\n        }\n      }).catch((err) => {\n        console.log(err)\n        eventBus.$emit('remoteServerFailedAdd')\n      })\n    }\n  }\n}\n"]}]}