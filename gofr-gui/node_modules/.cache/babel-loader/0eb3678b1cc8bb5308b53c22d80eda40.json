{"remainingRequest":"/home/ally/gofr/gofr-gui/node_modules/babel-loader/lib/index.js!/home/ally/gofr/gofr-gui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ally/gofr/gofr-gui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr/gofr-gui/src/components/fhir/fhir-reference.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr/gofr-gui/src/components/fhir/fhir-reference.vue","mtime":1621395693943},{"path":"/home/ally/gofr/gofr-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/gofr-gui/node_modules/babel-loader/lib/index.js","mtime":1619257191453},{"path":"/home/ally/gofr/gofr-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/gofr-gui/node_modules/vue-loader/lib/index.js","mtime":1619257191305}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2FsbHkvZ29mci9nb2ZyLWd1aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9hbGx5L2dvZnIvZ29mci1ndWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNlYXJjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5saW5rLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5lbmRzLXdpdGguanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgSWhyaXNFbGVtZW50IGZyb20gIi4uL2locmlzL2locmlzLWVsZW1lbnQudnVlIjsKCnZhciBxdWVyeXN0cmluZyA9IHJlcXVpcmUoJ3F1ZXJ5c3RyaW5nJyk7Cgp2YXIgZmhpcnVybCA9ICJodHRwOi8vaGw3Lm9yZy9maGlyL1N0cnVjdHVyZURlZmluaXRpb24vIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJmaGlyLXJlZmVyZW5jZSIsCiAgcHJvcHM6IFsiZmllbGQiLCAibGFiZWwiLCAic2xpY2VOYW1lIiwgInRhcmdldFByb2ZpbGUiLCAidGFyZ2V0UmVzb3VyY2UiLCAibWluIiwgIm1heCIsICJiYXNlLW1pbiIsICJiYXNlLW1heCIsICJzbG90UHJvcHMiLCAicGF0aCIsICJzdWItZmllbGRzIiwgImVkaXQiLCAicmVhZE9ubHlJZlNldCIsICJjb25zdHJhaW50cyIsICJkaXNwbGF5VHlwZSIsICJpbml0aWFsVmFsdWUiLCAib3ZlcnJpZGVWYWx1ZSJdLAogIGNvbXBvbmVudHM6IHsKICAgIElocmlzRWxlbWVudDogSWhyaXNFbGVtZW50CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc291cmNlOiB7CiAgICAgICAgcGF0aDogIiIsCiAgICAgICAgZGF0YToge30KICAgICAgfSwKICAgICAgdmFsdWU6IHsKICAgICAgICByZWZlcmVuY2U6ICIiCiAgICAgIH0sCiAgICAgIHFGaWVsZDogInZhbHVlUmVmZXJlbmNlIiwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHNlYXJjaDogIiIsCiAgICAgIG1lbnU6IGZhbHNlLAogICAgICBpdGVtczogW10sCiAgICAgIHNlbGVjdDogIiIsCiAgICAgIHJlc291cmNlOiAiIiwKICAgICAgYXdhaXRpbmdTZWFyY2g6IGZhbHNlLAogICAgICBkaXNwbGF5VmFsdWU6ICIiLAogICAgICBwcmVzZXQ6IGZhbHNlLAogICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgIGVycm9yczogW10sCiAgICAgIGxvY2tXYXRjaDogZmFsc2UsCiAgICAgIGFjdGl2ZTogW10sCiAgICAgIG9wZW46IFtdLAogICAgICB0cmVlTG9va3VwOiB7fSwKICAgICAgYWxsQWxsb3dlZDogdHJ1ZQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnNldHVwRGF0YSgpOwogIH0sCiAgd2F0Y2g6IHsKICAgIHNsb3RQcm9wczogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIC8vY29uc29sZS5sb2coIldBVENIIFJFRkVSRU5DRSIsdGhpcy5wYXRoLHRoaXMuc2xvdFByb3BzKQogICAgICAgIGlmICghdGhpcy5sb2NrV2F0Y2gpIHsKICAgICAgICAgIHRoaXMuc2V0dXBEYXRhKCk7CiAgICAgICAgfQogICAgICB9LAogICAgICBkZWVwOiB0cnVlCiAgICB9LAogICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2godmFsKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuYXdhaXRpbmdTZWFyY2gpIHsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhbCAmJiB2YWwubGVuZ3RoID4gMSAmJiBfdGhpcy5xdWVyeVNlbGVjdGlvbnMoX3RoaXMuc2VhcmNoKTsKICAgICAgICAgIF90aGlzLmF3YWl0aW5nU2VhcmNoID0gZmFsc2U7CiAgICAgICAgfSwgNTAwKTsKICAgICAgfQoKICAgICAgdGhpcy5hd2FpdGluZ1NlYXJjaCA9IHRydWU7CiAgICB9LAogICAgc2VsZWN0OiBmdW5jdGlvbiBzZWxlY3QodmFsKSB7CiAgICAgIHRoaXMudmFsdWUucmVmZXJlbmNlID0gdmFsOwogICAgICB0aGlzLmdldERpc3BsYXkoKTsKICAgIH0sCiAgICBhY3RpdmU6IGZ1bmN0aW9uIGFjdGl2ZSgpIHsKICAgICAgaWYgKHRoaXMuYWN0aXZlLmxlbmd0aCkgewogICAgICAgIHRoaXMuc2VsZWN0ID0gdGhpcy5hY3RpdmVbMF07CiAgICAgICAgdGhpcy5kaXNwbGF5VmFsdWUgPSB0aGlzLnRyZWVMb29rdXBbdGhpcy5zZWxlY3RdOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VsZWN0ID0gdW5kZWZpbmVkOwogICAgICAgIHRoaXMuZGlzcGxheVZhbHVlID0gIiI7CiAgICAgIH0KCiAgICAgIHRoaXMubWVudSA9IGZhbHNlOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2V0dXBEYXRhOiBmdW5jdGlvbiBzZXR1cERhdGEoKSB7CiAgICAgIGlmICh0aGlzLnRhcmdldFByb2ZpbGUgJiYgdGhpcy50YXJnZXRSZXNvdXJjZSkgewogICAgICAgIGlmICh0aGlzLnRhcmdldFByb2ZpbGUucmVwbGFjZShmaGlydXJsLCAiIikgPT09IHRoaXMudGFyZ2V0UmVzb3VyY2UpIHsKICAgICAgICAgIHRoaXMuYWxsQWxsb3dlZCA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYWxsQWxsb3dlZCA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5yZXNvdXJjZSA9IHRoaXMudGFyZ2V0UmVzb3VyY2U7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmRpc3BsYXlUeXBlID09PSAidHJlZSIpIHsKICAgICAgICB0aGlzLnNldHVwVHJlZUl0ZW1zKCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsb3RQcm9wcyAmJiB0aGlzLnNsb3RQcm9wcy5zb3VyY2UpIHsKICAgICAgICB0aGlzLnNvdXJjZSA9IHsKICAgICAgICAgIHBhdGg6IHRoaXMuc2xvdFByb3BzLnNvdXJjZS5wYXRoICsgIi4iICsgdGhpcy5maWVsZCwKICAgICAgICAgIGRhdGE6IHt9CiAgICAgICAgfTsKCiAgICAgICAgaWYgKHRoaXMuc2xvdFByb3BzLnNvdXJjZS5mcm9tQXJyYXkpIHsKICAgICAgICAgIHRoaXMuc291cmNlLmRhdGEgPSB0aGlzLnNsb3RQcm9wcy5zb3VyY2UuZGF0YTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLiRmaGlydXRpbHMucGF0aEZpZWxkRXhwcmVzc2lvbih0aGlzLmZpZWxkKTsKICAgICAgICAgIHZhciByZXN1bHRzID0gdGhpcy4kZmhpcnBhdGguZXZhbHVhdGUodGhpcy5zbG90UHJvcHMuc291cmNlLmRhdGEsIGV4cHJlc3Npb24pOwogICAgICAgICAgdGhpcy5zb3VyY2UuZGF0YSA9IHJlc3VsdHNbMF07CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5zb3VyY2UuZGF0YSkgewogICAgICAgICAgdGhpcy5wcmVzZXQgPSB0cnVlOwogICAgICAgICAgdGhpcy5zZWxlY3QgPSB0aGlzLnNvdXJjZS5kYXRhLnJlZmVyZW5jZTsKICAgICAgICAgIHRoaXMubG9ja1dhdGNoID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuZGlzYWJsZWQgPSB0aGlzLnJlYWRPbmx5SWZTZXQgJiYgdGhpcy5wcmVzZXQ7CiAgICB9LAogICAgc2V0dXBUcmVlSXRlbXM6IGZ1bmN0aW9uIHNldHVwVHJlZUl0ZW1zKCkgewogICAgICB2YXIgdHJlZXRvcCA9IHRoaXMuaW5pdGlhbFZhbHVlOwoKICAgICAgaWYgKHRoaXMub3ZlcnJpZGVWYWx1ZSkgewogICAgICAgIHRyZWV0b3AgPSB0aGlzLm92ZXJyaWRlVmFsdWU7CiAgICAgIH0KCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHZhciBwYXJhbXMgPSB7fTsKCiAgICAgIGlmICh0cmVldG9wKSB7CiAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgInBhcnRvZiI6IHRyZWV0b3AKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICJwYXJ0b2Y6bWlzc2luZyI6IHRydWUKICAgICAgICB9OwogICAgICB9CgogICAgICBwYXJhbXMuX2NvdW50ID0gNTAwOwogICAgICB2YXIgdXJsID0gIi9maGlyLyIgKyB0aGlzLnJlc291cmNlICsgIj8iICsgcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHBhcmFtcyk7CiAgICAgIHRoaXMuaXRlbXMgPSBbXTsKICAgICAgdGhpcy5hZGRJdGVtcyh1cmwsIHRoaXMuaXRlbXMpOwogICAgfSwKICAgIGNoZWNrQ2hpbGRyZW46IGZ1bmN0aW9uIGNoZWNrQ2hpbGRyZW4oaXRlbSkgewogICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICJwYXJ0b2YiOiBpdGVtLmlkLAogICAgICAgICJfc3VtbWFyeSI6ICJjb3VudCIKICAgICAgfTsKICAgICAgdmFyIHVybCA9ICIvZmhpci8iICsgdGhpcy5yZXNvdXJjZSArICI/IiArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShwYXJhbXMpOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICBheGlvcy5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICAgIGlmIChkYXRhLnRvdGFsICYmIGRhdGEudG90YWwgPiAwKSB7CiAgICAgICAgICAgIGl0ZW0uY2hpbGRyZW4gPSBbXTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5sb2coImZhaWxlZCB0byBjaGVjayBjaGlsZHJlbiBmb3IiLCB1cmwsIGVycik7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGFkZEl0ZW1zOiBmdW5jdGlvbiBhZGRJdGVtcyh1cmwsIGl0ZW1zKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KHVybCkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXNwb25zZSkgewogICAgICAgICAgdmFyIGRhdGEsIF9pdGVyYXRvciwgX3N0ZXAsIGVudHJ5LCBsb2NrZWQsIGl0ZW0sIG5leHQ7CgogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBkYXRhID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgICAgIGlmICghKGRhdGEuZW50cnkgJiYgZGF0YS5lbnRyeS5sZW5ndGggPiAwKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZGF0YS5lbnRyeSk7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzOwoKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnMoKTsKCiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgIGlmICgoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBlbnRyeSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgICAgICBsb2NrZWQgPSBfdGhpczIuYWxsQWxsb3dlZCA/IGZhbHNlIDogIWVudHJ5LnJlc291cmNlLm1ldGEucHJvZmlsZS5pbmNsdWRlcyhfdGhpczIudGFyZ2V0UHJvZmlsZSk7CiAgICAgICAgICAgICAgICAgIGl0ZW0gPSB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGVudHJ5LnJlc291cmNlLnJlc291cmNlVHlwZSArICIvIiArIGVudHJ5LnJlc291cmNlLmlkLAogICAgICAgICAgICAgICAgICAgIG5hbWU6IGVudHJ5LnJlc291cmNlLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgbG9ja2VkOiBsb2NrZWQKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmNoZWNrQ2hpbGRyZW4oaXRlbSk7CgogICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgX3RoaXMyLnRyZWVMb29rdXBbaXRlbS5pZF0gPSBpdGVtLm5hbWU7CiAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbSk7CgogICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE3OwogICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDMpOwoKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmUoX2NvbnRleHQudDApOwoKICAgICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyMDsKCiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuZmluaXNoKDIwKTsKCiAgICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgICBpZiAoZGF0YS5saW5rKSB7CiAgICAgICAgICAgICAgICAgICAgbmV4dCA9IGRhdGEubGluay5maW5kKGZ1bmN0aW9uIChsaW5rKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGluay5yZWxhdGlvbiA9PT0gIm5leHQiOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmFkZEl0ZW1zKG5leHQudXJsLCBpdGVtcyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMywgMTcsIDIwLCAyM11dKTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coIkZhaWxlZCB0byBhZGQgaXRlbXMgZm9yIiwgdXJsLCBlcnIpOwogICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGZldGNoQ2hpbGRyZW46IGZ1bmN0aW9uIGZldGNoQ2hpbGRyZW4oaXRlbSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBwYXJhbXMgPSB7fTsKICAgICAgcGFyYW1zID0gewogICAgICAgICJwYXJ0b2YiOiBpdGVtLmlkLAogICAgICAgIF9jb3VudDogNTAwCiAgICAgIH07CiAgICAgIHZhciB1cmwgPSAiL2ZoaXIvIiArIHRoaXMucmVzb3VyY2UgKyAiPyIgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkocGFyYW1zKTsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5hZGRJdGVtcyh1cmwsIGl0ZW0uY2hpbGRyZW4pOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICB2YXIgY291bnQgPSAwOwoKICAgICAgICB2YXIgY2hlY2tMb2FkaW5nID0gZnVuY3Rpb24gY2hlY2tMb2FkaW5nKCkgewogICAgICAgICAgaWYgKCFfdGhpczMubG9hZGluZyB8fCBjb3VudCsrID4gMTAwKSB7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoY2hlY2tMb2FkaW5nLCAyMDApOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGNoZWNrTG9hZGluZygpOwogICAgICB9KTsKICAgIH0sCiAgICBxdWVyeVNlbGVjdGlvbnM6IGZ1bmN0aW9uIHF1ZXJ5U2VsZWN0aW9ucyh2YWwpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICJuYW1lOmNvbnRhaW5zIjogdmFsCiAgICAgIH07CgogICAgICBpZiAoIXRoaXMudGFyZ2V0UHJvZmlsZS5lbmRzV2l0aCh0aGlzLnJlc291cmNlKSkgewogICAgICAgIHBhcmFtcy5fcHJvZmlsZSA9IHRoaXMudGFyZ2V0UHJvZmlsZTsKICAgICAgfQoKICAgICAgdmFyIHVybCA9ICIvZmhpci8iICsgdGhpcy5yZXNvdXJjZSArICI/IiArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShwYXJhbXMpOwogICAgICBheGlvcy5nZXQodXJsKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIocmVzcG9uc2UpIHsKICAgICAgICAgIHZhciBkYXRhLCBfaXRlcmF0b3IyLCBfc3RlcDIsIGVudHJ5LCByZWYsIGl0ZW07CgogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICAgIF90aGlzNC5pdGVtcyA9IFtdOwoKICAgICAgICAgICAgICAgICAgaWYgKCEoZGF0YS5lbnRyeSAmJiBkYXRhLmVudHJ5Lmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI0OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZGF0YS5lbnRyeSk7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNDsKCiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIucygpOwoKICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgaWYgKChfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGVudHJ5ID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgICAgICAgICByZWYgPSBlbnRyeS5yZXNvdXJjZS5yZXNvdXJjZVR5cGUgKyAiLyIgKyBlbnRyeS5yZXNvdXJjZS5pZDsKICAgICAgICAgICAgICAgICAgaXRlbSA9IHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVmCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQuJGZoaXJ1dGlscy5yZXNvdXJjZUxvb2t1cChyZWYpOwoKICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICAgIGl0ZW0udGV4dCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgICAgX3RoaXM0Lml0ZW1zLnB1c2goaXRlbSk7CgogICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE4OwogICAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oNCk7CgogICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLmUoX2NvbnRleHQyLnQwKTsKCiAgICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDIxOwoKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmZpbmlzaCgyMSk7CgogICAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbNCwgMTgsIDIxLCAyNF1dKTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgfSwKICAgIGdldERpc3BsYXk6IGZ1bmN0aW9uIGdldERpc3BsYXkoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgaWYgKCghdGhpcy5lZGl0IHx8IHRoaXMucHJlc2V0KSAmJiB0aGlzLnZhbHVlICYmIHRoaXMudmFsdWUucmVmZXJlbmNlKSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICB0aGlzLiRmaGlydXRpbHMucmVzb3VyY2VMb29rdXAodGhpcy52YWx1ZS5yZWZlcmVuY2UpLnRoZW4oZnVuY3Rpb24gKGRpc3BsYXkpIHsKICAgICAgICAgIF90aGlzNS5kaXNwbGF5VmFsdWUgPSBkaXNwbGF5OwoKICAgICAgICAgIGlmIChfdGhpczUuZGlzcGxheVR5cGUgIT09ICJ0cmVlIikgewogICAgICAgICAgICBfdGhpczUuaXRlbXMucHVzaCh7CiAgICAgICAgICAgICAgdGV4dDogZGlzcGxheSwKICAgICAgICAgICAgICB2YWx1ZTogX3RoaXM1LnZhbHVlLnJlZmVyZW5jZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczUubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgaW5kZXg6IGZ1bmN0aW9uIGluZGV4KCkgewogICAgICBpZiAodGhpcy5zbG90UHJvcHMpIHJldHVybiB0aGlzLnNsb3RQcm9wcy5pbnB1dDtlbHNlIHJldHVybiB1bmRlZmluZWQ7CiAgICB9LAogICAgZGlzcGxheTogZnVuY3Rpb24gZGlzcGxheSgpIHsKICAgICAgaWYgKHRoaXMuc2xvdFByb3BzICYmIHRoaXMuc2xvdFByb3BzLmlucHV0KSByZXR1cm4gdGhpcy5zbG90UHJvcHMuaW5wdXQubGFiZWw7ZWxzZSByZXR1cm4gdGhpcy5sYWJlbDsKICAgIH0sCiAgICByZXF1aXJlZDogZnVuY3Rpb24gcmVxdWlyZWQoKSB7CiAgICAgIHJldHVybiAodGhpcy5pbmRleCB8fCAwKSA8IHRoaXMubWluOwogICAgfSwKICAgIHJ1bGVzOiBmdW5jdGlvbiBydWxlcygpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICBpZiAodGhpcy5yZXF1aXJlZCkgewogICAgICAgIHJldHVybiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIHJldHVybiAhIXYgfHwgX3RoaXM2LmRpc3BsYXkgKyAiIGlzIHJlcXVpcmVkIjsKICAgICAgICB9XTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["fhir-reference.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <ihris-element :edit=\"edit\" :loading=\"loading\">\n    <template #form>\n      <v-menu\n        v-if=\"displayType == 'tree'\"\n        ref=\"menu\"\n        v-model=\"menu\"\n        :close-on-content-click=\"false\"\n        transition=\"scale-transition\"\n        offset-y\n        min-width=\"290px\"\n        max-height=\"500px\"\n        >\n        <template v-slot:activator=\"{ on }\">\n          <v-text-field\n            v-model=\"displayValue\"\n            :label=\"display\"\n            readonly\n            v-on=\"on\"\n            outlined\n            hide-details=\"auto\"\n            :rules=\"rules\"\n            :error-messages=\"errors\"\n            :loading=\"loading\"\n            dense>\n            <template #label>{{display}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n          </v-text-field>\n        </template>\n        <v-card v-if=\"!((disabled) || (preset && $route.name === 'ResourceAdd'))\">\n          <v-treeview\n            :active.sync=\"active\"\n            :items=\"items\"\n            :load-children=\"fetchChildren\"\n            :open.sync=\"open\"\n            item-disabled=\"locked\"\n            activatable\n            :multiple-active=\"false\"\n            selection-type=\"independent\"\n            :loading=\"loading\"\n            ></v-treeview>\n        </v-card>\n      </v-menu>\n      <v-autocomplete\n        v-else\n        v-model=\"select\"\n        :loading=\"loading\"\n        :items=\"items\"\n        :search-input.sync=\"search\"\n        cache-items\n        flat\n        hide-no-data\n        hide-details\n        :label=\"display\"\n        outlined\n        dense\n        placeholder=\"Start typing for selection\"\n        :rules=\"rules\"\n        :disabled=\"(disabled) || (preset && $route.name === 'resource_add')\"\n        :error-messages=\"errors\"\n        @change=\"errors = []\"\n      >\n        <template #label>{{display}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n      </v-autocomplete>\n    </template>\n    <template #header>\n      {{display}}\n    </template>\n    <template #value>\n      {{displayValue}}\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport axios from 'axios'\nimport IhrisElement from \"../ihris/ihris-element.vue\"\n\nconst querystring = require('querystring')\nconst fhirurl = \"http://hl7.org/fhir/StructureDefinition/\"\nexport default {\n  name: \"fhir-reference\",\n  props: [\"field\",\"label\",\"sliceName\",\"targetProfile\",\"targetResource\",\"min\",\"max\",\"base-min\",\"base-max\",\n    \"slotProps\",\"path\",\"sub-fields\",\"edit\",\"readOnlyIfSet\",\"constraints\", \"displayType\", \"initialValue\", \"overrideValue\"],\n  components: {\n    IhrisElement\n  },\n  data: function() {\n    return {\n      source: { path: \"\", data: {} },\n      value: { reference: \"\" },\n      qField: \"valueReference\",\n      loading: false,\n      search: \"\",\n      menu: false,\n      items: [],\n      select: \"\",\n      resource: \"\",\n      awaitingSearch: false,\n      displayValue: \"\",\n      preset: false,\n      disabled: false,\n      errors: [],\n      lockWatch: false,\n      active: [],\n      open: [],\n      treeLookup: {},\n      allAllowed: true\n    }\n  },\n  created: function() {\n    this.setupData()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH REFERENCE\",this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    },\n    search: function (val) {\n      if ( !this.awaitingSearch) {\n        setTimeout( () => {\n          val && val.length > 1 && this.querySelections( this.search )\n          this.awaitingSearch = false\n        }, 500 )\n      }\n      this.awaitingSearch = true\n    },\n    select: function(val) {\n      this.value.reference = val\n      this.getDisplay()\n    },\n    active: function() {\n      if ( this.active.length ) {\n        this.select = this.active[0]\n        this.displayValue = this.treeLookup[ this.select ]\n      } else {\n        this.select = undefined\n        this.displayValue = \"\"\n      }\n      this.menu = false\n    }\n  },\n  methods: {\n    setupData: function() {\n      if ( this.targetProfile && this.targetResource ) {\n        if ( this.targetProfile.replace( fhirurl, \"\" ) === this.targetResource ) {\n          this.allAllowed = true\n        } else {\n          this.allAllowed = false\n        }\n        this.resource = this.targetResource\n      }\n      if ( this.displayType === \"tree\" ) {\n        this.setupTreeItems()\n      }\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          let results = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          this.source.data = results[0]\n        }\n        if( this.source.data ) {\n          this.preset = true\n          this.select = this.source.data.reference\n          this.lockWatch = true\n        }\n      }\n      this.disabled = this.readOnlyIfSet && this.preset\n    },\n    setupTreeItems: function() {\n      let treetop = this.initialValue\n      if ( this.overrideValue ) {\n        treetop = this.overrideValue\n      }\n      this.loading = true\n      let params = {}\n      if ( treetop ) {\n        params = { \"partof\": treetop }\n      } else {\n        params = { \"partof:missing\": true }\n      }\n      params._count = 500\n      let url = \"/fhir/\"+this.resource+\"?\"+querystring.stringify( params )\n      this.items = []\n      this.addItems( url, this.items )\n\n    },\n    checkChildren: function(item) {\n      let params = { \"partof\": item.id, \"_summary\": \"count\" }\n      let url = \"/fhir/\"+this.resource+\"?\"+querystring.stringify( params )\n      return new Promise( resolve => {\n        axios.get( url ).then( response => {\n          let data = response.data\n          if ( data.total && data.total > 0 ) {\n            item.children = []\n          }\n          resolve()\n        } ).catch( err => {\n          console.log(\"failed to check children for\",url,err)\n          resolve()\n        } )\n      } )\n    },\n    addItems: function(url, items) {\n      axios.get( url ).then( async(response) => {\n        let data = response.data\n        if ( data.entry && data.entry.length > 0 ) {\n          for( let entry of data.entry ) {\n            let locked = this.allAllowed ? false : !entry.resource.meta.profile.includes( this.targetProfile )\n            let item = {\n              id: entry.resource.resourceType+\"/\"+entry.resource.id,\n              name: entry.resource.name,\n              locked: locked\n            }\n            await this.checkChildren( item )\n            this.treeLookup[ item.id ] = item.name\n            items.push( item )\n          }\n        }\n        if ( data.link ) {\n          let next = data.link.find( link => link.relation === \"next\" )\n          if ( next ) {\n            this.addItems( next.url, items )\n          } else {\n            this.loading = false\n          }\n        } else {\n          this.loading = false\n        }\n      } ).catch( err => {\n        console.log(\"Failed to add items for\",url,err)\n        this.loading = false\n      } )\n    },\n    fetchChildren: function(item) {\n      let params = {}\n      params = { \"partof\": item.id, _count: 500 }\n      let url = \"/fhir/\"+this.resource+\"?\"+querystring.stringify( params )\n      this.loading = true\n      this.addItems( url, item.children )\n      return new Promise( resolve => {\n        let count = 0\n        const checkLoading = () => {\n          if ( !this.loading || count++ > 100) {\n            resolve()\n          } else {\n            setTimeout( checkLoading, 200 )\n          }\n        }\n        checkLoading()\n      } )\n    },\n    querySelections: function( val ) {\n      this.loading = true\n      let params = { \"name:contains\": val }\n      if ( !this.targetProfile.endsWith( this.resource ) ) {\n        params._profile = this.targetProfile\n      }\n      let url = \"/fhir/\"+this.resource+\"?\"+querystring.stringify( params )\n      axios.get( url ).then( async(response) => {\n        let data = response.data\n        this.items = []\n        if ( data.entry && data.entry.length ) {\n          for( let entry of data.entry ) {\n            let ref = entry.resource.resourceType+\"/\"+entry.resource.id\n            let item = { value: ref }\n            item.text = await this.$fhirutils.resourceLookup( ref )\n            this.items.push( item )\n          }\n        }\n      } )\n    },\n    getDisplay: function() {\n      if ( (!this.edit || this.preset) && this.value && this.value.reference ) {\n        this.loading = true\n        this.$fhirutils.resourceLookup( this.value.reference ).then( display => {\n          this.displayValue = display\n          if ( this.displayType !== \"tree\" ) {\n            this.items.push( {text: display, value: this.value.reference} )\n          }\n          this.loading = false\n        } )\n      }\n    }\n  },\n  computed: {\n    index: function() {\n      if ( this.slotProps ) return this.slotProps.input\n      else return undefined\n    },\n    display: function() {\n      if ( this.slotProps && this.slotProps.input) return this.slotProps.input.label\n      else return this.label\n    },\n    required: function() {\n      return (this.index || 0) < this.min\n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.display+\" is required\" ]\n      } else {\n        return []\n      }\n    }\n  }\n\n}\n</script>\n"],"sourceRoot":"src/components/fhir"}]}