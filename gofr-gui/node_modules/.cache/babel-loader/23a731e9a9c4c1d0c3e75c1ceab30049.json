{"remainingRequest":"/home/ally/gofr/facility-recon-gui/node_modules/babel-loader/lib/index.js!/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr/facility-recon-gui/src/components/fhir/fhir-choice.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr/facility-recon-gui/src/components/fhir/fhir-choice.vue","mtime":1619587338496},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/babel-loader/lib/index.js","mtime":1619257191453},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js","mtime":1619257191305}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgovKgpjb25zdCBpdGVtU29ydCA9IChhLGIpID0+IHsKICByZXR1cm4gKGEuZGlzcGxheSA9PT0gYi5kaXNwbGF5ID8gKGEuY29kZSA9PT0gYi5jb2RlID8gMCA6IChhLmNvZGUgPCBiLmNvZGUgPyAtMTogMSkpIDogKGEuZGlzcGxheSA8IGIuZGlzcGxheSA/IC0xIDogMSkgKQp9CiovCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZmhpci1jb2RpbmciLAogIHByb3BzOiBbImxhYmVsIiwgInBhdGgiLCAiYmluZGluZyIsICJlZGl0IiwgIm1pbiIsICJtYXgiLCAiY29uc3RyYWludHMiXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsdWU6IHsKICAgICAgICBzeXN0ZW06ICIiLAogICAgICAgIGNvZGU6ICIiLAogICAgICAgIGRpc3BsYXk6ICIiCiAgICAgIH0sCiAgICAgIHZhbHVlQ29kZTogIiIsCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIGVycm9yczogW10sCiAgICAgIC8vZXJyb3I6IGZhbHNlLAogICAgICBpdGVtczogW10sCiAgICAgIHFGaWVsZDogInZhbHVlQ29kaW5nIgogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnNldHVwRGF0YSgpOwogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlQ29kZTogZnVuY3Rpb24gdmFsdWVDb2RlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuaXRlbXMpIHsKICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5pdGVtcy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gaXRlbS5jb2RlID09PSBfdGhpcy52YWx1ZUNvZGU7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNldHVwRGF0YTogZnVuY3Rpb24gc2V0dXBEYXRhKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBiaW5kaW5nID0gdGhpcy5iaW5kaW5nOyAvL2NvbnNvbGUubG9nKCJDT0RJTkciLGJpbmRpbmcpCgogICAgICB0aGlzLiRmaGlydXRpbHMuZXhwYW5kKGJpbmRpbmcpLnRoZW4oZnVuY3Rpb24gKGl0ZW1zKSB7CiAgICAgICAgX3RoaXMyLml0ZW1zID0gaXRlbXM7CiAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7IC8vdGhpcy5lcnJvciA9IHRydWUKCiAgICAgICAgX3RoaXMyLmVycm9ycy5wdXNoKGVyci5tZXNzYWdlKTsKCiAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgcmVxdWlyZWQ6IGZ1bmN0aW9uIHJlcXVpcmVkKCkgewogICAgICByZXR1cm4gdGhpcy5taW4gPiAwOwogICAgfSwKICAgIHJ1bGVzOiBmdW5jdGlvbiBydWxlcygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5yZXF1aXJlZCkgewogICAgICAgIHJldHVybiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIHJldHVybiAhIXYgfHwgX3RoaXMzLmxhYmVsICsgIiBpcyByZXF1aXJlZCI7CiAgICAgICAgfV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["fhir-choice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AACA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA,CAAA,OAAA,EAAA,MAAA,EAAA,SAAA,EAAA,MAAA,EAAA,KAAA,EAAA,KAAA,EAAA,aAAA,CAFA;AAGA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AAAA,QAAA,MAAA,EAAA,EAAA;AAAA,QAAA,IAAA,EAAA,EAAA;AAAA,QAAA,OAAA,EAAA;AAAA,OADA;AAEA,MAAA,SAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA,IAHA;AAIA,MAAA,MAAA,EAAA,EAJA;AAKA;AACA,MAAA,KAAA,EAAA,EANA;AAOA,MAAA,MAAA,EAAA;AAPA,KAAA;AASA,GAbA;AAcA,EAAA,OAAA,EAAA,mBAAA;AACA,SAAA,SAAA;AACA,GAhBA;AAiBA,EAAA,KAAA,EAAA;AACA,IAAA,SAAA,EAAA,qBAAA;AAAA;;AACA,UAAA,KAAA,KAAA,EAAA;AACA,aAAA,KAAA,GAAA,KAAA,KAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,iBAAA,IAAA,CAAA,IAAA,KAAA,KAAA,CAAA,SAAA;AAAA,SAAA,CAAA;AACA;AACA;AALA,GAjBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,SAAA,EAAA,qBAAA;AAAA;;AACA,UAAA,OAAA,GAAA,KAAA,OAAA,CADA,CAEA;;AACA,WAAA,UAAA,CAAA,MAAA,CAAA,OAAA,EAAA,IAAA,CAAA,UAAA,KAAA,EAAA;AACA,QAAA,MAAA,CAAA,KAAA,GAAA,KAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA,OAHA,EAGA,KAHA,CAGA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA,EADA,CAEA;;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,OAAA;;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA,OARA;AASA;AAbA,GAxBA;AAuCA,EAAA,QAAA,EAAA;AACA,IAAA,QAAA,EAAA,oBAAA;AACA,aAAA,KAAA,GAAA,GAAA,CAAA;AACA,KAHA;AAIA,IAAA,KAAA,EAAA,iBAAA;AAAA;;AACA,UAAA,KAAA,QAAA,EAAA;AACA,eAAA,CAAA,UAAA,CAAA;AAAA,iBAAA,CAAA,CAAA,CAAA,IAAA,MAAA,CAAA,KAAA,GAAA,cAAA;AAAA,SAAA,CAAA;AACA,OAFA,MAEA;AACA,eAAA,EAAA;AACA;AACA;AAVA;AAvCA,CAAA","sourcesContent":["<template>\n  <v-container>\n    <v-select\n      :loading=\"loading\"\n      :label=\"label\"\n      v-model=\"valueCode\"\n      :items=\"items\"\n      outlined\n      hide-details=\"auto\"\n      :error-messages=\"errors\"\n      item-text=\"display\"\n      item-value=\"code\"\n      :rules=\"rules\"\n      dense\n      @change=\"errors = []\"\n      >\n      <template #label>{{label}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n    </v-select>\n  </v-container>\n</template>\n\n<script>\n/*\nconst itemSort = (a,b) => {\n  return (a.display === b.display ? (a.code === b.code ? 0 : (a.code < b.code ? -1: 1)) : (a.display < b.display ? -1 : 1) )\n}\n*/\nexport default {\n  name: \"fhir-coding\",\n  props: [\"label\", \"path\", \"binding\", \"edit\", \"min\", \"max\",\"constraints\"],\n  data: function() {\n    return {\n      value: { system: \"\", code: \"\", display: \"\" },\n      valueCode: \"\",\n      loading: true,\n      errors: [],\n      //error: false,\n      items: [],\n      qField: \"valueCoding\"\n    }\n  },\n  created: function() {\n    this.setupData()\n  },\n  watch: {\n    valueCode: function() {\n      if ( this.items ) {\n        this.value = this.items.find( item => item.code === this.valueCode )\n      }\n    }\n  },\n  methods: {\n    setupData: function() {\n      let binding = this.binding\n      //console.log(\"CODING\",binding)\n      this.$fhirutils.expand( binding ).then( items => {\n        this.items = items\n        this.loading = false\n      } ).catch( err => {\n        console.log(err)\n        //this.error = true\n        this.errors.push( err.message )\n        this.loading = false\n      } )\n    }\n  },\n  computed: {\n    required: function() {\n      return this.min > 0\n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.label+\" is required\" ]\n      } else {\n        return []\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components/fhir"}]}