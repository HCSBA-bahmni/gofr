{"remainingRequest":"/home/ally/gofr/facility-recon-gui/node_modules/babel-loader/lib/index.js!/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr/facility-recon-gui/src/components/fhir/fhir-reference.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr/facility-recon-gui/src/components/fhir/fhir-reference.vue","mtime":1619258093079},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/babel-loader/lib/index.js","mtime":1619257191453},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/cache-loader/dist/cjs.js","mtime":1619257191457},{"path":"/home/ally/gofr/facility-recon-gui/node_modules/vue-loader/lib/index.js","mtime":1619257191305}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2FsbHkvZ29mci9mYWNpbGl0eS1yZWNvbi1ndWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvYWxseS9nb2ZyL2ZhY2lsaXR5LXJlY29uLWd1aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmxpbmsuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmVuZHMtd2l0aC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBJaHJpc0VsZW1lbnQgZnJvbSAiLi4vaWhyaXMvaWhyaXMtZWxlbWVudC52dWUiOwoKdmFyIHF1ZXJ5c3RyaW5nID0gcmVxdWlyZSgncXVlcnlzdHJpbmcnKTsKCnZhciBmaGlydXJsID0gImh0dHA6Ly9obDcub3JnL2ZoaXIvU3RydWN0dXJlRGVmaW5pdGlvbi8iOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImZoaXItcmVmZXJlbmNlIiwKICBwcm9wczogWyJmaWVsZCIsICJsYWJlbCIsICJzbGljZU5hbWUiLCAidGFyZ2V0UHJvZmlsZSIsICJ0YXJnZXRSZXNvdXJjZSIsICJtaW4iLCAibWF4IiwgImJhc2UtbWluIiwgImJhc2UtbWF4IiwgInNsb3RQcm9wcyIsICJwYXRoIiwgInN1Yi1maWVsZHMiLCAiZWRpdCIsICJyZWFkT25seUlmU2V0IiwgImNvbnN0cmFpbnRzIiwgImRpc3BsYXlUeXBlIiwgImluaXRpYWxWYWx1ZSIsICJvdmVycmlkZVZhbHVlIl0sCiAgY29tcG9uZW50czogewogICAgSWhyaXNFbGVtZW50OiBJaHJpc0VsZW1lbnQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzb3VyY2U6IHsKICAgICAgICBwYXRoOiAiIiwKICAgICAgICBkYXRhOiB7fQogICAgICB9LAogICAgICB2YWx1ZTogewogICAgICAgIHJlZmVyZW5jZTogIiIKICAgICAgfSwKICAgICAgcUZpZWxkOiAidmFsdWVSZWZlcmVuY2UiLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgc2VhcmNoOiAiIiwKICAgICAgbWVudTogZmFsc2UsCiAgICAgIGl0ZW1zOiBbXSwKICAgICAgc2VsZWN0OiAiIiwKICAgICAgcmVzb3VyY2U6ICIiLAogICAgICBhd2FpdGluZ1NlYXJjaDogZmFsc2UsCiAgICAgIGRpc3BsYXlWYWx1ZTogIiIsCiAgICAgIHByZXNldDogZmFsc2UsCiAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgZXJyb3JzOiBbXSwKICAgICAgbG9ja1dhdGNoOiBmYWxzZSwKICAgICAgYWN0aXZlOiBbXSwKICAgICAgb3BlbjogW10sCiAgICAgIHRyZWVMb29rdXA6IHt9LAogICAgICBhbGxBbGxvd2VkOiB0cnVlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuc2V0dXBEYXRhKCk7CiAgfSwKICB3YXRjaDogewogICAgc2xvdFByb3BzOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoKSB7CiAgICAgICAgLy9jb25zb2xlLmxvZygiV0FUQ0ggUkVGRVJFTkNFIix0aGlzLnBhdGgsdGhpcy5zbG90UHJvcHMpCiAgICAgICAgaWYgKCF0aGlzLmxvY2tXYXRjaCkgewogICAgICAgICAgdGhpcy5zZXR1cERhdGEoKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0sCiAgICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaCh2YWwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5hd2FpdGluZ1NlYXJjaCkgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFsICYmIHZhbC5sZW5ndGggPiAxICYmIF90aGlzLnF1ZXJ5U2VsZWN0aW9ucyhfdGhpcy5zZWFyY2gpOwogICAgICAgICAgX3RoaXMuYXdhaXRpbmdTZWFyY2ggPSBmYWxzZTsKICAgICAgICB9LCA1MDApOwogICAgICB9CgogICAgICB0aGlzLmF3YWl0aW5nU2VhcmNoID0gdHJ1ZTsKICAgIH0sCiAgICBzZWxlY3Q6IGZ1bmN0aW9uIHNlbGVjdCh2YWwpIHsKICAgICAgdGhpcy52YWx1ZS5yZWZlcmVuY2UgPSB2YWw7CiAgICAgIHRoaXMuZ2V0RGlzcGxheSgpOwogICAgfSwKICAgIGFjdGl2ZTogZnVuY3Rpb24gYWN0aXZlKCkgewogICAgICBpZiAodGhpcy5hY3RpdmUubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5zZWxlY3QgPSB0aGlzLmFjdGl2ZVswXTsKICAgICAgICB0aGlzLmRpc3BsYXlWYWx1ZSA9IHRoaXMudHJlZUxvb2t1cFt0aGlzLnNlbGVjdF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWxlY3QgPSB1bmRlZmluZWQ7CiAgICAgICAgdGhpcy5kaXNwbGF5VmFsdWUgPSAiIjsKICAgICAgfQoKICAgICAgdGhpcy5tZW51ID0gZmFsc2U7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXR1cERhdGE6IGZ1bmN0aW9uIHNldHVwRGF0YSgpIHsKICAgICAgaWYgKHRoaXMudGFyZ2V0UHJvZmlsZSAmJiB0aGlzLnRhcmdldFJlc291cmNlKSB7CiAgICAgICAgaWYgKHRoaXMudGFyZ2V0UHJvZmlsZS5yZXBsYWNlKGZoaXJ1cmwsICIiKSA9PT0gdGhpcy50YXJnZXRSZXNvdXJjZSkgewogICAgICAgICAgdGhpcy5hbGxBbGxvd2VkID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5hbGxBbGxvd2VkID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnJlc291cmNlID0gdGhpcy50YXJnZXRSZXNvdXJjZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGlzcGxheVR5cGUgPT09ICJ0cmVlIikgewogICAgICAgIHRoaXMuc2V0dXBUcmVlSXRlbXMoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2xvdFByb3BzICYmIHRoaXMuc2xvdFByb3BzLnNvdXJjZSkgewogICAgICAgIHRoaXMuc291cmNlID0gewogICAgICAgICAgcGF0aDogdGhpcy5zbG90UHJvcHMuc291cmNlLnBhdGggKyAiLiIgKyB0aGlzLmZpZWxkLAogICAgICAgICAgZGF0YToge30KICAgICAgICB9OwoKICAgICAgICBpZiAodGhpcy5zbG90UHJvcHMuc291cmNlLmZyb21BcnJheSkgewogICAgICAgICAgdGhpcy5zb3VyY2UuZGF0YSA9IHRoaXMuc2xvdFByb3BzLnNvdXJjZS5kYXRhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgZXhwcmVzc2lvbiA9IHRoaXMuJGZoaXJ1dGlscy5wYXRoRmllbGRFeHByZXNzaW9uKHRoaXMuZmllbGQpOwogICAgICAgICAgdmFyIHJlc3VsdHMgPSB0aGlzLiRmaGlycGF0aC5ldmFsdWF0ZSh0aGlzLnNsb3RQcm9wcy5zb3VyY2UuZGF0YSwgZXhwcmVzc2lvbik7CiAgICAgICAgICB0aGlzLnNvdXJjZS5kYXRhID0gcmVzdWx0c1swXTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnNvdXJjZS5kYXRhKSB7CiAgICAgICAgICB0aGlzLnByZXNldCA9IHRydWU7CiAgICAgICAgICB0aGlzLnNlbGVjdCA9IHRoaXMuc291cmNlLmRhdGEucmVmZXJlbmNlOwogICAgICAgICAgdGhpcy5sb2NrV2F0Y2ggPSB0cnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5kaXNhYmxlZCA9IHRoaXMucmVhZE9ubHlJZlNldCAmJiB0aGlzLnByZXNldDsKICAgIH0sCiAgICBzZXR1cFRyZWVJdGVtczogZnVuY3Rpb24gc2V0dXBUcmVlSXRlbXMoKSB7CiAgICAgIHZhciB0cmVldG9wID0gdGhpcy5pbml0aWFsVmFsdWU7CgogICAgICBpZiAodGhpcy5vdmVycmlkZVZhbHVlKSB7CiAgICAgICAgdHJlZXRvcCA9IHRoaXMub3ZlcnJpZGVWYWx1ZTsKICAgICAgfQoKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdmFyIHBhcmFtcyA9IHt9OwoKICAgICAgaWYgKHRyZWV0b3ApIHsKICAgICAgICBwYXJhbXMgPSB7CiAgICAgICAgICAicGFydG9mIjogdHJlZXRvcAogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgInBhcnRvZjptaXNzaW5nIjogdHJ1ZQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHBhcmFtcy5fY291bnQgPSA1MDA7CiAgICAgIHZhciB1cmwgPSAiL2ZoaXIvIiArIHRoaXMucmVzb3VyY2UgKyAiPyIgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkocGFyYW1zKTsKICAgICAgdGhpcy5pdGVtcyA9IFtdOwogICAgICB0aGlzLmFkZEl0ZW1zKHVybCwgdGhpcy5pdGVtcyk7CiAgICB9LAogICAgY2hlY2tDaGlsZHJlbjogZnVuY3Rpb24gY2hlY2tDaGlsZHJlbihpdGVtKSB7CiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgInBhcnRvZiI6IGl0ZW0uaWQsCiAgICAgICAgIl9zdW1tYXJ5IjogImNvdW50IgogICAgICB9OwogICAgICB2YXIgdXJsID0gIi9maGlyLyIgKyB0aGlzLnJlc291cmNlICsgIj8iICsgcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHBhcmFtcyk7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICByZXNwb25zZS5qc29uKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgIGlmIChkYXRhLnRvdGFsICYmIGRhdGEudG90YWwgPiAwKSB7CiAgICAgICAgICAgICAgICBpdGVtLmNoaWxkcmVuID0gW107CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZmFpbGVkIHRvIGNoZWNrIGNoaWxkcmVuIGZvciIsIHVybCwgZXJyKTsKICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coImZhaWxlZCB0byBjaGVjayBjaGlsZHJlbiBmb3IiLCB1cmwsIHJlc3BvbnNlLnN0YXR1cyk7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiZmFpbGVkIHRvIGNoZWNrIGNoaWxkcmVuIGZvciIsIHVybCwgZXJyKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgYWRkSXRlbXM6IGZ1bmN0aW9uIGFkZEl0ZW1zKHVybCwgaXRlbXMpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICByZXNwb25zZS5qc29uKCkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZGF0YSkgewogICAgICAgICAgICAgIHZhciBfaXRlcmF0b3IsIF9zdGVwLCBlbnRyeSwgbG9ja2VkLCBpdGVtLCBuZXh0OwoKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICBpZiAoIShkYXRhLmVudHJ5ICYmIGRhdGEuZW50cnkubGVuZ3RoID4gMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihkYXRhLmVudHJ5KTsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyOwoKICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5zKCk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgIGlmICgoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgIGxvY2tlZCA9IF90aGlzMi5hbGxBbGxvd2VkID8gZmFsc2UgOiAhZW50cnkucmVzb3VyY2UubWV0YS5wcm9maWxlLmluY2x1ZGVzKF90aGlzMi50YXJnZXRQcm9maWxlKTsKICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbnRyeS5yZXNvdXJjZS5yZXNvdXJjZVR5cGUgKyAiLyIgKyBlbnRyeS5yZXNvdXJjZS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZW50cnkucmVzb3VyY2UubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgbG9ja2VkOiBsb2NrZWQKICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmNoZWNrQ2hpbGRyZW4oaXRlbSk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczIudHJlZUxvb2t1cFtpdGVtLmlkXSA9IGl0ZW0ubmFtZTsKICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbSk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTY7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwoKICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5lKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOTsKCiAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZigpOwoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5maW5pc2goMTkpOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubGluaykgewogICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0gZGF0YS5saW5rLmZpbmQoZnVuY3Rpb24gKGxpbmspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGluay5yZWxhdGlvbiA9PT0gIm5leHQiOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmFkZEl0ZW1zKG5leHQudXJsLCBpdGVtcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMiwgMTYsIDE5LCAyMl1dKTsKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIkZhaWxlZCB0byBhZGQgaXRlbXMgZm9yIiwgdXJsLCBlcnIpOwogICAgICAgICAgICBfdGhpczIubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJGYWlsZWQgdG8gYWRkIGl0ZW1zIGZvciIsIHVybCwgcmVzcG9uc2Uuc3RhdHVzKTsKICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coIkZhaWxlZCB0byBhZGQgaXRlbXMgZm9yIiwgdXJsLCBlcnIpOwogICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGZldGNoQ2hpbGRyZW46IGZ1bmN0aW9uIGZldGNoQ2hpbGRyZW4oaXRlbSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBwYXJhbXMgPSB7fTsKICAgICAgcGFyYW1zID0gewogICAgICAgICJwYXJ0b2YiOiBpdGVtLmlkLAogICAgICAgIF9jb3VudDogNTAwCiAgICAgIH07CiAgICAgIHZhciB1cmwgPSAiL2ZoaXIvIiArIHRoaXMucmVzb3VyY2UgKyAiPyIgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkocGFyYW1zKTsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5hZGRJdGVtcyh1cmwsIGl0ZW0uY2hpbGRyZW4pOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICB2YXIgY291bnQgPSAwOwoKICAgICAgICB2YXIgY2hlY2tMb2FkaW5nID0gZnVuY3Rpb24gY2hlY2tMb2FkaW5nKCkgewogICAgICAgICAgaWYgKCFfdGhpczMubG9hZGluZyB8fCBjb3VudCsrID4gMTAwKSB7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoY2hlY2tMb2FkaW5nLCAyMDApOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGNoZWNrTG9hZGluZygpOwogICAgICB9KTsKICAgIH0sCiAgICBxdWVyeVNlbGVjdGlvbnM6IGZ1bmN0aW9uIHF1ZXJ5U2VsZWN0aW9ucyh2YWwpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICJuYW1lOmNvbnRhaW5zIjogdmFsCiAgICAgIH07CgogICAgICBpZiAoIXRoaXMudGFyZ2V0UHJvZmlsZS5lbmRzV2l0aCh0aGlzLnJlc291cmNlKSkgewogICAgICAgIHBhcmFtcy5fcHJvZmlsZSA9IHRoaXMudGFyZ2V0UHJvZmlsZTsKICAgICAgfQoKICAgICAgdmFyIHVybCA9ICIvZmhpci8iICsgdGhpcy5yZXNvdXJjZSArICI/IiArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShwYXJhbXMpOwogICAgICBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICByZXNwb25zZS5qc29uKCkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihkYXRhKSB7CiAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvcjIsIF9zdGVwMiwgZW50cnksIHJlZiwgaXRlbTsKCiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5pdGVtcyA9IFtdOwoKICAgICAgICAgICAgICAgICAgICAgIGlmICghKGRhdGEuZW50cnkgJiYgZGF0YS5lbnRyeS5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihkYXRhLmVudHJ5KTsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMzsKCiAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLnMoKTsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgaWYgKChfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZSkgewogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgIHJlZiA9IGVudHJ5LnJlc291cmNlLnJlc291cmNlVHlwZSArICIvIiArIGVudHJ5LnJlc291cmNlLmlkOwogICAgICAgICAgICAgICAgICAgICAgaXRlbSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlZgogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LiRmaGlydXRpbHMucmVzb3VyY2VMb29rdXAocmVmKTsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICAgIGl0ZW0udGV4dCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5pdGVtcy5wdXNoKGl0ZW0pOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE3OwogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDMpOwoKICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIuZShfY29udGV4dDIudDApOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAyMDsKCiAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsKCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmZpbmlzaCgyMCk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczQubG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzMsIDE3LCAyMCwgMjNdXSk7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9KCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiRmFpbGVkIHRvIHJldHJpZXZlIiwgX3RoaXM0LnJlc291cmNlKTsKICAgICAgICAgIF90aGlzNC5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXREaXNwbGF5OiBmdW5jdGlvbiBnZXREaXNwbGF5KCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIGlmICgoIXRoaXMuZWRpdCB8fCB0aGlzLnByZXNldCkgJiYgdGhpcy52YWx1ZSAmJiB0aGlzLnZhbHVlLnJlZmVyZW5jZSkgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgdGhpcy4kZmhpcnV0aWxzLnJlc291cmNlTG9va3VwKHRoaXMudmFsdWUucmVmZXJlbmNlKS50aGVuKGZ1bmN0aW9uIChkaXNwbGF5KSB7CiAgICAgICAgICBfdGhpczUuZGlzcGxheVZhbHVlID0gZGlzcGxheTsKCiAgICAgICAgICBpZiAoX3RoaXM1LmRpc3BsYXlUeXBlICE9PSAidHJlZSIpIHsKICAgICAgICAgICAgX3RoaXM1Lml0ZW1zLnB1c2goewogICAgICAgICAgICAgIHRleHQ6IGRpc3BsYXksCiAgICAgICAgICAgICAgdmFsdWU6IF90aGlzNS52YWx1ZS5yZWZlcmVuY2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXM1LmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGluZGV4OiBmdW5jdGlvbiBpbmRleCgpIHsKICAgICAgaWYgKHRoaXMuc2xvdFByb3BzKSByZXR1cm4gdGhpcy5zbG90UHJvcHMuaW5wdXQ7ZWxzZSByZXR1cm4gdW5kZWZpbmVkOwogICAgfSwKICAgIGRpc3BsYXk6IGZ1bmN0aW9uIGRpc3BsYXkoKSB7CiAgICAgIGlmICh0aGlzLnNsb3RQcm9wcyAmJiB0aGlzLnNsb3RQcm9wcy5pbnB1dCkgcmV0dXJuIHRoaXMuc2xvdFByb3BzLmlucHV0LmxhYmVsO2Vsc2UgcmV0dXJuIHRoaXMubGFiZWw7CiAgICB9LAogICAgcmVxdWlyZWQ6IGZ1bmN0aW9uIHJlcXVpcmVkKCkgewogICAgICByZXR1cm4gKHRoaXMuaW5kZXggfHwgMCkgPCB0aGlzLm1pbjsKICAgIH0sCiAgICBydWxlczogZnVuY3Rpb24gcnVsZXMoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMucmVxdWlyZWQpIHsKICAgICAgICByZXR1cm4gW2Z1bmN0aW9uICh2KSB7CiAgICAgICAgICByZXR1cm4gISF2IHx8IF90aGlzNi5kaXNwbGF5ICsgIiBpcyByZXF1aXJlZCI7CiAgICAgICAgfV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["fhir-reference.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <ihris-element :edit=\"edit\" :loading=\"loading\">\n    <template #form>\n      <v-menu \n        v-if=\"displayType == 'tree'\"\n        ref=\"menu\"\n        v-model=\"menu\"\n        :close-on-content-click=\"false\"\n        transition=\"scale-transition\"\n        offset-y\n        min-width=\"290px\"\n        max-height=\"500px\"\n        >\n        <template v-slot:activator=\"{ on }\">\n          <v-text-field\n            v-model=\"displayValue\"\n            :label=\"display\"\n            readonly\n            v-on=\"on\"\n            outlined\n            hide-details=\"auto\"\n            :rules=\"rules\"\n            :error-messages=\"errors\"\n            :loading=\"loading\"\n            dense>\n            <template #label>{{display}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n          </v-text-field>\n        </template>\n        <v-card v-if=\"!((disabled) || (preset && $route.name === 'resource_add'))\">\n          <v-treeview\n            :active.sync=\"active\"\n            :items=\"items\"\n            :load-children=\"fetchChildren\"\n            :open.sync=\"open\"\n            item-disabled=\"locked\"\n            activatable\n            :multiple-active=\"false\"\n            selection-type=\"independent\"\n            :loading=\"loading\"\n            ></v-treeview>\n        </v-card>\n      </v-menu>\n      <v-autocomplete\n        v-else\n        v-model=\"select\"\n        :loading=\"loading\"\n        :items=\"items\"\n        :search-input.sync=\"search\"\n        cache-items\n        flat\n        hide-no-data\n        hide-details\n        :label=\"display\"\n        outlined\n        dense\n        placeholder=\"Start typing for selection\"\n        :rules=\"rules\"\n        :disabled=\"(disabled) || (preset && $route.name === 'resource_add')\"\n        :error-messages=\"errors\"\n        @change=\"errors = []\"\n      >\n        <template #label>{{display}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n      </v-autocomplete>\n    </template>\n    <template #header>\n      {{display}}\n    </template>\n    <template #value>\n      {{displayValue}}\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport IhrisElement from \"../ihris/ihris-element.vue\"\n\nconst querystring = require('querystring')\nconst fhirurl = \"http://hl7.org/fhir/StructureDefinition/\"\nexport default {\n  name: \"fhir-reference\",\n  props: [\"field\",\"label\",\"sliceName\",\"targetProfile\",\"targetResource\",\"min\",\"max\",\"base-min\",\"base-max\",\n    \"slotProps\",\"path\",\"sub-fields\",\"edit\",\"readOnlyIfSet\",\"constraints\", \"displayType\", \"initialValue\", \"overrideValue\"],\n  components: {\n    IhrisElement\n  },\n  data: function() {\n    return {\n      source: { path: \"\", data: {} },\n      value: { reference: \"\" },\n      qField: \"valueReference\",\n      loading: false,\n      search: \"\",\n      menu: false,\n      items: [],\n      select: \"\",\n      resource: \"\",\n      awaitingSearch: false,\n      displayValue: \"\",\n      preset: false,\n      disabled: false,\n      errors: [],\n      lockWatch: false,\n      active: [],\n      open: [],\n      treeLookup: {},\n      allAllowed: true\n    }\n  },\n  created: function() {\n    this.setupData()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH REFERENCE\",this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    },\n    search: function (val) {\n      if ( !this.awaitingSearch) {\n        setTimeout( () => {\n          val && val.length > 1 && this.querySelections( this.search )\n          this.awaitingSearch = false\n        }, 500 )\n      }\n      this.awaitingSearch = true\n    },\n    select: function(val) {\n      this.value.reference = val\n      this.getDisplay()\n    },\n    active: function() {\n      if ( this.active.length ) {\n        this.select = this.active[0]\n        this.displayValue = this.treeLookup[ this.select ]\n      } else {\n        this.select = undefined\n        this.displayValue = \"\"\n      }\n      this.menu = false\n    }\n  },\n  methods: {\n    setupData: function() {\n      if ( this.targetProfile && this.targetResource ) {\n        if ( this.targetProfile.replace( fhirurl, \"\" ) === this.targetResource ) {\n          this.allAllowed = true\n        } else {\n          this.allAllowed = false\n        }\n        this.resource = this.targetResource\n      }\n      if ( this.displayType === \"tree\" ) {\n        this.setupTreeItems()\n      }\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          let results = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          this.source.data = results[0]\n        }\n        if( this.source.data ) {\n          this.preset = true\n          this.select = this.source.data.reference\n          this.lockWatch = true\n        }\n      }\n      this.disabled = this.readOnlyIfSet && this.preset\n    },\n    setupTreeItems: function() {\n      let treetop = this.initialValue\n      if ( this.overrideValue ) {\n        treetop = this.overrideValue\n      }\n      this.loading = true\n      let params = {}\n      if ( treetop ) {\n        params = { \"partof\": treetop }\n      } else {\n        params = { \"partof:missing\": true }\n      }\n      params._count = 500\n      let url = \"/fhir/\"+this.resource+\"?\"+querystring.stringify( params )\n      this.items = []\n      this.addItems( url, this.items )\n\n    },\n    checkChildren: function(item) {\n      let params = { \"partof\": item.id, \"_summary\": \"count\" }\n      let url = \"/fhir/\"+this.resource+\"?\"+querystring.stringify( params )\n      return new Promise( resolve => {\n        fetch( url ).then( response => {\n          if ( response.ok ) {\n            response.json().then( data => {\n              if ( data.total && data.total > 0 ) {\n                item.children = []\n              }\n              resolve()\n            } ).catch( err => {\n              console.log(\"failed to check children for\",url,err)\n              resolve()\n            } )\n          } else {\n            console.log(\"failed to check children for\",url,response.status)\n            resolve()\n          }\n        } ).catch( err => {\n          console.log(\"failed to check children for\",url,err)\n          resolve()\n        } )\n      } )\n    },\n    addItems: function(url, items) {\n      fetch( url ).then( response => {\n        if ( response.ok ) {\n          response.json().then( async data => {\n            if ( data.entry && data.entry.length > 0 ) {\n              for( let entry of data.entry ) {\n                let locked = this.allAllowed ? false : !entry.resource.meta.profile.includes( this.targetProfile )\n                let item = { \n                  id: entry.resource.resourceType+\"/\"+entry.resource.id,\n                  name: entry.resource.name,\n                  locked: locked\n                }\n                await this.checkChildren( item )\n                this.treeLookup[ item.id ] = item.name\n                items.push( item )\n              }\n            }\n            if ( data.link ) {\n              let next = data.link.find( link => link.relation === \"next\" )\n              if ( next ) {\n                this.addItems( next.url, items )\n              } else {\n                this.loading = false\n              }\n            } else {\n              this.loading = false\n            }\n          } ).catch( err => {\n            console.log(\"Failed to add items for\",url,err)\n            this.loading = false\n          } )\n        } else {\n          console.log(\"Failed to add items for\",url,response.status)\n          this.loading = false\n        }\n      } ).catch( err => {\n        console.log(\"Failed to add items for\",url,err)\n        this.loading = false\n      } )\n    },\n    fetchChildren: function(item) {\n      let params = {}\n      params = { \"partof\": item.id, _count: 500 }\n      let url = \"/fhir/\"+this.resource+\"?\"+querystring.stringify( params )\n      this.loading = true\n      this.addItems( url, item.children )\n      return new Promise( resolve => {\n        let count = 0\n        const checkLoading = () => {\n          if ( !this.loading || count++ > 100) {\n            resolve()\n          } else {\n            setTimeout( checkLoading, 200 )\n          }\n        }\n        checkLoading()\n      } )\n    },\n    querySelections: function( val ) {\n      this.loading = true\n      let params = { \"name:contains\": val }\n      if ( !this.targetProfile.endsWith( this.resource ) ) {\n        params._profile = this.targetProfile\n      }\n      let url = \"/fhir/\"+this.resource+\"?\"+querystring.stringify( params )\n      fetch( url ).then( response => {\n        if ( response.ok ) {\n          response.json().then( async (data) => {\n            this.items = []\n            if ( data.entry && data.entry.length ) {\n              for( let entry of data.entry ) {\n                let ref = entry.resource.resourceType+\"/\"+entry.resource.id\n                let item = { value: ref }\n                item.text = await this.$fhirutils.resourceLookup( ref )\n                this.items.push( item )\n              }\n            }\n            this.loading = false\n          } )\n        } else {\n          console.log(\"Failed to retrieve\",this.resource)\n          this.loading = false\n        }\n      } )\n    },\n    getDisplay: function() {\n      if ( (!this.edit || this.preset) && this.value && this.value.reference ) {\n        this.loading = true\n        this.$fhirutils.resourceLookup( this.value.reference ).then( display => {\n          this.displayValue = display\n          if ( this.displayType !== \"tree\" ) {\n            this.items.push( {text: display, value: this.value.reference} )\n          }\n          this.loading = false\n        } )\n      }\n    }\n  },\n  computed: {\n    index: function() {\n      if ( this.slotProps ) return this.slotProps.input\n      else return undefined\n    },\n    display: function() {\n      if ( this.slotProps && this.slotProps.input) return this.slotProps.input.label\n      else return this.label\n    },\n    required: function() {\n      return (this.index || 0) < this.min\n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.display+\" is required\" ]\n      } else {\n        return []\n      }\n    }\n  }\n\n}\n</script>\n"],"sourceRoot":"src/components/fhir"}]}