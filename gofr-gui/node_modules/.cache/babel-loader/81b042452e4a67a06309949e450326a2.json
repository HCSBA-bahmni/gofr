{"remainingRequest":"/home/ally/gofr2/node_modules/babel-loader/lib/index.js!/home/ally/gofr2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ally/gofr2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ally/gofr2/src/components/RolesManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ally/gofr2/src/components/RolesManagement.vue","mtime":1619183307863},{"path":"/home/ally/gofr2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ally/gofr2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ally/gofr2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ally/gofr2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IGdlbmVyYWxNaXhpbiB9IGZyb20gJy4uL21peGlucy9nZW5lcmFsTWl4aW4nOwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbZ2VuZXJhbE1peGluXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcm9sZToge30sCiAgICAgIHRhc2s6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcm9sZVNlbGVjdGVkOiBmdW5jdGlvbiByb2xlU2VsZWN0ZWQoaWQpIHsKICAgICAgdGhpcy5yb2xlID0gdGhpcy5yb2xlcy5maW5kKGZ1bmN0aW9uIChyb2xlKSB7CiAgICAgICAgcmV0dXJuIHJvbGUudmFsdWUgPT09IGlkOwogICAgICB9KTsKICAgIH0sCiAgICBzYXZlUm9sZTogZnVuY3Rpb24gc2F2ZVJvbGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5wcm9ncmVzc1RpdGxlID0gJ1VwZGF0aW5nIHJvbGUnOwogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5keW5hbWljUHJvZ3Jlc3MgPSB0cnVlOwogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCdyb2xlJywgSlNPTi5zdHJpbmdpZnkodGhpcy5yb2xlKSk7CiAgICAgIGF4aW9zLnBvc3QoJy91cGRhdGVSb2xlJywgZm9ybURhdGEsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy4kc3RvcmUuc3RhdGUuZHluYW1pY1Byb2dyZXNzID0gZmFsc2U7CiAgICAgICAgX3RoaXMuJHN0b3JlLnN0YXRlLmRpYWxvZ0Vycm9yID0gdHJ1ZTsKICAgICAgICBfdGhpcy4kc3RvcmUuc3RhdGUuZXJyb3JUaXRsZSA9ICdJbmZvJzsKICAgICAgICBfdGhpcy4kc3RvcmUuc3RhdGUuZXJyb3JDb2xvciA9ICdwcmltYXJ5JzsKICAgICAgICBfdGhpcy4kc3RvcmUuc3RhdGUuZXJyb3JEZXNjcmlwdGlvbiA9ICJSb2xlICIuY29uY2F0KF90aGlzLnJvbGUudGV4dCwgIiB1cGRhdGVkIHN1Y2Nlc3NmdWxseSIpOwoKICAgICAgICBfdGhpcy5nZXRSb2xlcygpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBfdGhpcy4kc3RvcmUuc3RhdGUuZHluYW1pY1Byb2dyZXNzID0gZmFsc2U7CiAgICAgICAgX3RoaXMuJHN0b3JlLnN0YXRlLmRpYWxvZ0Vycm9yID0gdHJ1ZTsKICAgICAgICBfdGhpcy4kc3RvcmUuc3RhdGUuZXJyb3JUaXRsZSA9ICdFcnJvcic7CiAgICAgICAgX3RoaXMuJHN0b3JlLnN0YXRlLmVycm9yQ29sb3IgPSAnZXJyb3InOwogICAgICAgIF90aGlzLiRzdG9yZS5zdGF0ZS5lcnJvckRlc2NyaXB0aW9uID0gIkFuIGVycm9yIGhhcyBvY2N1cmVkIHdoaWxlIHVwZGF0aW5nIHJvbGUgIi5jb25jYXQoX3RoaXMucm9sZS50ZXh0KTsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Um9sZXMoKTsKICAgIHRoaXMuZ2V0VGFza3MoKTsKICB9Cn07"},{"version":3,"sources":["RolesManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA,OAAA,KAAA,MAAA,OAAA;AACA,SAAA,YAAA,QAAA,wBAAA;AAEA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,YAAA,CADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA;AAFA,KAAA;AAIA,GAPA;AAQA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,EADA,EACA;AACA,WAAA,IAAA,GAAA,KAAA,KAAA,CAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,eAAA,IAAA,CAAA,KAAA,KAAA,EAAA;AACA,OAFA,CAAA;AAGA,KALA;AAMA,IAAA,QANA,sBAMA;AAAA;;AACA,WAAA,MAAA,CAAA,KAAA,CAAA,aAAA,GAAA,eAAA;AACA,WAAA,MAAA,CAAA,KAAA,CAAA,eAAA,GAAA,IAAA;AACA,UAAA,QAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,IAAA,CAAA,SAAA,CAAA,KAAA,IAAA,CAAA;AACA,MAAA,KAAA,CAAA,IAAA,CAAA,aAAA,EAAA,QAAA,EAAA;AACA,QAAA,OAAA,EAAA;AACA,0BAAA;AADA;AADA,OAAA,EAIA,IAJA,CAIA,YAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,eAAA,GAAA,KAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,WAAA,GAAA,IAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,UAAA,GAAA,MAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,UAAA,GAAA,SAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,gBAAA,kBAAA,KAAA,CAAA,IAAA,CAAA,IAAA;;AACA,QAAA,KAAA,CAAA,QAAA;AACA,OAXA,EAWA,KAXA,CAWA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,eAAA,GAAA,KAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,WAAA,GAAA,IAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,UAAA,GAAA,OAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,UAAA,GAAA,OAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,gBAAA,sDAAA,KAAA,CAAA,IAAA,CAAA,IAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,OAlBA;AAmBA;AA9BA,GARA;AAwCA,EAAA,OAxCA,qBAwCA;AACA,SAAA,QAAA;AACA,SAAA,QAAA;AACA;AA3CA,CAAA","sourcesContent":["<template>\n  <v-container>\n    Select role to edit tasks\n    <v-select\n      required\n      :items=\"roles\"\n      @change=\"roleSelected\"\n      single-line\n      filled\n      label=\"Select Role\"\n    ></v-select>\n    <v-card v-if=\"role.value\">\n      <v-card-title primary-title>\n        Tasks assigned to role {{role.text}}\n      </v-card-title>\n      <v-card-text>\n        <v-data-table\n          :items=\"tasks\"\n          height=\"10px\"\n          hide-default-footer\n        >\n          <template v-slot:item=\"{ item }\">\n            <tr>\n              <td>\n                <v-checkbox\n                  :value=\"item._id\"\n                  v-model=\"role.tasks\"\n                >\n                </v-checkbox>\n              </td>\n              <td>{{item.display}}</td>\n            </tr>\n          </template>\n        </v-data-table>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn\n          color=\"primary\"\n          @click=\"saveRole\"\n        >\n          <v-icon left>mdi-content-save</v-icon> Save\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-container>\n</template>\n<script>\nimport axios from 'axios'\nimport { generalMixin } from '../mixins/generalMixin'\n\nexport default {\n  mixins: [generalMixin],\n  data () {\n    return {\n      role: {},\n      task: ''\n    }\n  },\n  methods: {\n    roleSelected (id) {\n      this.role = this.roles.find((role) => {\n        return role.value === id\n      })\n    },\n    saveRole () {\n      this.$store.state.progressTitle = 'Updating role'\n      this.$store.state.dynamicProgress = true\n      let formData = new FormData()\n      formData.append('role', JSON.stringify(this.role))\n      axios.post('/updateRole', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(() => {\n        this.$store.state.dynamicProgress = false\n        this.$store.state.dialogError = true\n        this.$store.state.errorTitle = 'Info'\n        this.$store.state.errorColor = 'primary'\n        this.$store.state.errorDescription = `Role ${this.role.text} updated successfully`\n        this.getRoles()\n      }).catch((error) => {\n        this.$store.state.dynamicProgress = false\n        this.$store.state.dialogError = true\n        this.$store.state.errorTitle = 'Error'\n        this.$store.state.errorColor = 'error'\n        this.$store.state.errorDescription = `An error has occured while updating role ${this.role.text}`\n        console.log(error)\n      })\n    }\n  },\n  created () {\n    this.getRoles()\n    this.getTasks()\n  }\n}\n</script>\n\n"],"sourceRoot":"src/components"}]}