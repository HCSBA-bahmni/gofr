(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-573e074d"],{7958:function(t,e,i){},f774:function(t,e,i){"use strict";var a=i("5530"),s=(i("a9e3"),i("c7cd"),i("99af"),i("7958"),i("adda")),n=i("3a66"),r=i("a9ad"),o=i("b848"),c=i("e4cd"),h=i("e707"),u=i("d10f"),l=i("7560"),d=i("a293"),v=i("dc22"),p=i("c3f0"),f=i("80d2"),m=i("58df"),g=Object(m["a"])(Object(n["a"])("left",["isActive","isMobile","miniVariant","expandOnHover","permanent","right","temporary","width"]),r["a"],o["a"],c["a"],h["a"],u["a"],l["a"]);e["a"]=g.extend({name:"v-navigation-drawer",directives:{ClickOutside:d["a"],Resize:v["a"],Touch:p["a"]},provide:function(){return{isInNav:"nav"===this.tag}},props:{bottom:Boolean,clipped:Boolean,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,height:{type:[Number,String],default:function(){return this.app?"100vh":"100%"}},miniVariant:Boolean,miniVariantWidth:{type:[Number,String],default:56},permanent:Boolean,right:Boolean,src:{type:[String,Object],default:""},stateless:Boolean,tag:{type:String,default:function(){return this.app?"nav":"aside"}},temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},value:null},data:function(){return{isMouseover:!1,touchArea:{left:0,right:0},stackMinZIndex:6}},computed:{applicationProperty:function(){return this.right?"right":"left"},classes:function(){return Object(a["a"])({"v-navigation-drawer":!0,"v-navigation-drawer--absolute":this.absolute,"v-navigation-drawer--bottom":this.bottom,"v-navigation-drawer--clipped":this.clipped,"v-navigation-drawer--close":!this.isActive,"v-navigation-drawer--fixed":!this.absolute&&(this.app||this.fixed),"v-navigation-drawer--floating":this.floating,"v-navigation-drawer--is-mobile":this.isMobile,"v-navigation-drawer--is-mouseover":this.isMouseover,"v-navigation-drawer--mini-variant":this.isMiniVariant,"v-navigation-drawer--custom-mini-variant":56!==Number(this.miniVariantWidth),"v-navigation-drawer--open":this.isActive,"v-navigation-drawer--open-on-hover":this.expandOnHover,"v-navigation-drawer--right":this.right,"v-navigation-drawer--temporary":this.temporary},this.themeClasses)},computedMaxHeight:function(){if(!this.hasApp)return null;var t=this.$vuetify.application.bottom+this.$vuetify.application.footer+this.$vuetify.application.bar;return this.clipped?t+this.$vuetify.application.top:t},computedTop:function(){if(!this.hasApp)return 0;var t=this.$vuetify.application.bar;return t+=this.clipped?this.$vuetify.application.top:0,t},computedTransform:function(){return this.isActive?0:this.isBottom||this.right?100:-100},computedWidth:function(){return this.isMiniVariant?this.miniVariantWidth:this.width},hasApp:function(){return this.app&&!this.isMobile&&!this.temporary},isBottom:function(){return this.bottom&&this.isMobile},isMiniVariant:function(){return!this.expandOnHover&&this.miniVariant||this.expandOnHover&&!this.isMouseover},isMobile:function(){return!this.stateless&&!this.permanent&&c["a"].options.computed.isMobile.call(this)},reactsToClick:function(){return!this.stateless&&!this.permanent&&(this.isMobile||this.temporary)},reactsToMobile:function(){return this.app&&!this.disableResizeWatcher&&!this.permanent&&!this.stateless&&!this.temporary},reactsToResize:function(){return!this.disableResizeWatcher&&!this.stateless},reactsToRoute:function(){return!this.disableRouteWatcher&&!this.stateless&&(this.temporary||this.isMobile)},showOverlay:function(){return!this.hideOverlay&&this.isActive&&(this.isMobile||this.temporary)},styles:function(){var t=this.isBottom?"translateY":"translateX";return{height:Object(f["h"])(this.height),top:this.isBottom?"auto":Object(f["h"])(this.computedTop),maxHeight:null!=this.computedMaxHeight?"calc(100% - ".concat(Object(f["h"])(this.computedMaxHeight),")"):void 0,transform:"".concat(t,"(").concat(Object(f["h"])(this.computedTransform,"%"),")"),width:Object(f["h"])(this.computedWidth)}}},watch:{$route:"onRouteChange",isActive:function(t){this.$emit("input",t)},isMobile:function(t,e){!t&&this.isActive&&!this.temporary&&this.removeOverlay(),null!=e&&this.reactsToResize&&this.reactsToMobile&&(this.isActive=!t)},permanent:function(t){t&&(this.isActive=!0)},showOverlay:function(t){t?this.genOverlay():this.removeOverlay()},value:function(t){this.permanent||(null!=t?t!==this.isActive&&(this.isActive=t):this.init())},expandOnHover:"updateMiniVariant",isMouseover:function(t){this.updateMiniVariant(!t)}},beforeMount:function(){this.init()},methods:{calculateTouchArea:function(){var t=this.$el.parentNode;if(t){var e=t.getBoundingClientRect();this.touchArea={left:e.left+50,right:e.right-50}}},closeConditional:function(){return this.isActive&&!this._isDestroyed&&this.reactsToClick},genAppend:function(){return this.genPosition("append")},genBackground:function(){var t={height:"100%",width:"100%",src:this.src},e=this.$scopedSlots.img?this.$scopedSlots.img(t):this.$createElement(s["a"],{props:t});return this.$createElement("div",{staticClass:"v-navigation-drawer__image"},[e])},genDirectives:function(){var t=this,e=[{name:"click-outside",value:{handler:function(){t.isActive=!1},closeConditional:this.closeConditional,include:this.getOpenDependentElements}}];return this.touchless||this.stateless||e.push({name:"touch",value:{parent:!0,left:this.swipeLeft,right:this.swipeRight}}),e},genListeners:function(){var t=this,e={transitionend:function(e){if(e.target===e.currentTarget){t.$emit("transitionend",e);var i=document.createEvent("UIEvents");i.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(i)}}};return this.miniVariant&&(e.click=function(){return t.$emit("update:mini-variant",!1)}),this.expandOnHover&&(e.mouseenter=function(){return t.isMouseover=!0},e.mouseleave=function(){return t.isMouseover=!1}),e},genPosition:function(t){var e=Object(f["t"])(this,t);return e?this.$createElement("div",{staticClass:"v-navigation-drawer__".concat(t)},e):e},genPrepend:function(){return this.genPosition("prepend")},genContent:function(){return this.$createElement("div",{staticClass:"v-navigation-drawer__content"},this.$slots.default)},genBorder:function(){return this.$createElement("div",{staticClass:"v-navigation-drawer__border"})},init:function(){this.permanent?this.isActive=!0:this.stateless||null!=this.value?this.isActive=this.value:this.temporary||(this.isActive=!this.isMobile)},onRouteChange:function(){this.reactsToRoute&&this.closeConditional()&&(this.isActive=!1)},swipeLeft:function(t){this.isActive&&this.right||(this.calculateTouchArea(),Math.abs(t.touchendX-t.touchstartX)<100||(this.right&&t.touchstartX>=this.touchArea.right?this.isActive=!0:!this.right&&this.isActive&&(this.isActive=!1)))},swipeRight:function(t){this.isActive&&!this.right||(this.calculateTouchArea(),Math.abs(t.touchendX-t.touchstartX)<100||(!this.right&&t.touchstartX<=this.touchArea.left?this.isActive=!0:this.right&&this.isActive&&(this.isActive=!1)))},updateApplication:function(){if(!this.isActive||this.isMobile||this.temporary||!this.$el)return 0;var t=Number(this.computedWidth);return isNaN(t)?this.$el.clientWidth:t},updateMiniVariant:function(t){this.miniVariant!==t&&this.$emit("update:mini-variant",t)}},render:function(t){var e=[this.genPrepend(),this.genContent(),this.genAppend(),this.genBorder()];return(this.src||Object(f["t"])(this,"img"))&&e.unshift(this.genBackground()),t(this.tag,this.setBackgroundColor(this.color,{class:this.classes,style:this.styles,directives:this.genDirectives(),on:this.genListeners()}),e)}})},f977:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"my-3"},[i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t._t("default"),i("v-overlay",{attrs:{value:t.overlay}},[i("v-progress-circular",{attrs:{size:"50",color:"primary",indeterminate:""}}),i("v-btn",{attrs:{icon:""},on:{click:function(e){t.overlay=!1}}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("v-navigation-drawer",{staticClass:"primary darken-1 white--text",staticStyle:{"z-index":"3"},attrs:{app:"",left:"",permanent:"",clipped:""}},[i("v-list",{staticClass:"white--text"},[i("v-list-item",[i("v-btn",{staticClass:"secondary",attrs:{small:"",dark:""},on:{click:function(e){return t.$router.go(-1)}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-pencil-off")]),i("span",[t._v("Cancel")])],1),i("v-spacer"),t.valid?i("v-btn",{staticClass:"success darken-1",attrs:{small:"",dark:"",disabled:!t.valid},on:{click:function(e){return t.processFHIR()}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-content-save")]),i("span",[t._v("Save")])],1):i("v-btn",{staticClass:"warning",attrs:{dark:"",small:""},on:{click:function(e){return t.$refs.form.validate()}}},[i("v-icon",{attrs:{light:""}},[t._v("mdi-content-save")]),i("span",[t._v("Save")])],1)],1),i("v-divider",{attrs:{color:"white"}}),t.sectionMenu?i("v-subheader",{staticClass:"white--text"},[i("h2",[t._v("Sections")])]):t._e(),t._l(t.sectionMenu,(function(e){return i("v-list-item",{key:e.id,attrs:{href:"#section-"+e.id}},[i("v-list-item-content",{staticClass:"white--text"},[i("v-list-item-title",{staticClass:"text-uppercase"},[i("h4",[t._v(t._s(e.title))])]),i("v-list-item-subtitle",{staticClass:"white--text"},[t._v(t._s(e.desc))])],1)],1)}))],2)],1)],2)],1)},s=[],n=i("b85c"),r=i("1da1"),o=(i("ac1f"),i("1276"),i("96cf"),i("bc3a")),c=i.n(o),h=i("b383"),u={name:"ihris-questionnaire",props:["id","url","title","description","purpose","section-menu","view-page","edit","constraints"],data:function(){return{fhir:{},loading:!1,overlay:!1,isEdit:!1,valid:!0,advancedValid:!0}},methods:{processFHIR:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$refs.form.validate(),this.valid){t.next=3;break}return t.abrupt("return");case 3:return this.advancedValid=!0,this.overlay=!0,this.loading=!0,e=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a,s,r){var o,c,h,u,l,d,v,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r||(r={}),o=Object(n["a"])(s),t.prev=2,o.s();case 4:if((c=o.n()).done){t.next=67;break}if(h=c.value,u=a,l={},!h.isArray){t.next=11;break}t.next=39;break;case 11:if(!h.isQuestionnaireGroup){t.next=17;break}d={linkId:h.path,text:h.label,item:[]},u.push(d),u=d.item,t.next=39;break;case 17:if(!h.qField){t.next=39;break}if(v=void 0,r.hasOwnProperty(h.path)?v=r[h.path]:(v={linkId:h.path,answer:[]},r[h.path]=v,u.push(v)),p={},p[h.qField]=h.value,v.answer.push(p),!h.constraints){t.next=39;break}if(h.errors=[],t.prev=25,t.t0=i.advancedValid,!t.t0){t.next=31;break}return t.next=30,i.$fhirutils.checkConstraints(h.constraints,i.constraints,h.value,h.errors);case 30:t.t0=t.sent;case 31:i.advancedValid=t.t0,t.next=39;break;case 34:t.prev=34,t.t1=t["catch"](25),i.advancedValid=!1,h.errors.push("An unknown error occurred."),console.log(t.t1);case 39:if(!h.$children){t.next=49;break}return t.prev=40,t.next=43,e(u,h.$children,l);case 43:t.next=49;break;case 45:t.prev=45,t.t2=t["catch"](40),i.advancedValid=!1,console.log(t.t2);case 49:if(!h.isQuestionnaireGroup||!h.constraints){t.next=65;break}if(h.errors=[],t.prev=51,t.t3=i.advancedValid,!t.t3){t.next=57;break}return t.next=56,i.$fhirutils.checkConstraints(h.constraints,i.constraints,u,h.errors);case 56:t.t3=t.sent;case 57:i.advancedValid=t.t3,t.next=65;break;case 60:t.prev=60,t.t4=t["catch"](51),i.advancedValid=!1,h.errors.push("An unknown error occurred."),console.log(t.t4);case 65:t.next=4;break;case 67:t.next=72;break;case 69:t.prev=69,t.t5=t["catch"](2),o.e(t.t5);case 72:return t.prev=72,o.f(),t.finish(72);case 75:case"end":return t.stop()}}),t,null,[[2,69,72,75],[25,34],[40,45],[51,60]])})));return function(e,i,a){return t.apply(this,arguments)}}(),this.fhir={resourceType:"QuestionnaireResponse",questionnaire:this.url,status:"completed",item:[]},t.prev=8,t.next=11,e(this.fhir.item,this.$children);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](8),this.advancedValid=!1,console.log(t.t0);case 17:if(this.advancedValid){t.next=22;break}return this.overlay=!1,this.loading=!1,this.$store.commit("setMessage",{type:"error",text:"There were errors on the form."}),t.abrupt("return");case 22:console.log("SAVE",this.fhir),c()({url:"/fhir/QuestionnaireResponse?"+h.stringify(this.$route.query),method:"POST",data:this.fhir}).then((function(t){i.overlay=!1,i.loading=!1,i.$store.state.alert.show=!0,i.$store.state.alert.width="600px",i.$store.state.alert.msg="Saved successfully!",i.$store.state.alert.type="success",i.$router.push({name:"ResourceView",params:{page:i.viewPage,id:t.data.subject.reference.split("/")[1]}})})).catch((function(t){i.overlay=!1,i.loading=!1,console.log(t),i.$store.state.alert.show=!0,i.$store.state.alert.width="600px",i.$store.state.alert.msg="Failed to save!",i.$store.state.alert.type="error"}));case 24:case"end":return t.stop()}}),t,this,[[8,13]])})));function e(){return t.apply(this,arguments)}return e}()}},l=u,d=i("2877"),v=i("6544"),p=i.n(v),f=i("8336"),m=i("a523"),g=i("ce7e"),b=i("4bd4"),w=i("132d"),y=i("8860"),x=i("da13"),k=i("5d23"),A=i("f774"),V=i("a797"),$=i("490a"),M=i("2fa4"),C=i("e0c7"),O=Object(d["a"])(l,a,s,!1,null,null,null);e["default"]=O.exports;p()(O,{VBtn:f["a"],VContainer:m["a"],VDivider:g["a"],VForm:b["a"],VIcon:w["a"],VList:y["a"],VListItem:x["a"],VListItemContent:k["a"],VListItemSubtitle:k["b"],VListItemTitle:k["c"],VNavigationDrawer:A["a"],VOverlay:V["a"],VProgressCircular:$["a"],VSpacer:M["a"],VSubheader:C["a"]})}}]);
//# sourceMappingURL=chunk-573e074d.5d046eed.js.map